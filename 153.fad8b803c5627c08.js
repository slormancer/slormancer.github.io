"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[153],{2153:(gr,X,h)=>{h.r(X),h.d(X,{SlormPlannerModule:()=>sr});var d=h(9808),B=h(4802),k=h(1083),O=h(6446),c=h(2419),Se=h(1135),C=h(311),e=h(5e3);let A=(()=>{class a{constructor(t){this.buildStorageService=t,this.draggingItem=new Se.X(!1),this.dragCount=0,this.item=null,this.requiredBase=null,this.callback=null,this.equipCallback=null}hold(t,n,i=null){this.dragCount=0,this.item=t,this.requiredBase=n,this.callback=i}setEquipCallback(t){this.equipCallback=t}startDragging(){this.draggingItem.getValue()||(this.dragCount++,null!==this.item&&this.dragCount>5&&this.draggingItem.next(!0))}isDragItemCompatible(t,n){return!(null!==t&&null!==this.requiredBase&&t.base!==this.requiredBase||null===this.item||null!==n&&this.item.base!==n)}isHoldItem(t){return t===this.item&&null!==t}getHoldItem(){return this.item}releaseHoldItem(){this.item=null,this.requiredBase=null,this.callback=null,this.draggingItem.next(!1)}swap(t,n,i){const r=this.item,s=this.callback,g=this.isDragItemCompatible(t,n);this.releaseHoldItem(),t!==r&&(g?(s&&s(!0,t),i&&i(!0,r)):(s&&s(!1,null),i&&i(!1,null)))}moveDraggedItemToItemGroup(t){const n=this.item,i=this.callback,r=t.indexOf(null),s=t.indexOf(n);if(this.releaseHoldItem(),-1!==r||-1!==s){i&&i(!0,null);const g=Math.min(...[r,s].filter(p=>-1!==p));t.splice(g,1,n)}else i&&i(!1,null)}equip(t,n){const i=this.buildStorageService.getLayer();if(null!==i&&null!==i.character){const r=t.base,s=this.getCompatibleGearSlot(i.character,t);this.hold(t,r,n),this.swap(i.character.gear[s],r,(g,p)=>{null!==this.equipCallback&&this.equipCallback(g,p,s)})}}moveToStash(t,n){const i=this.buildStorageService.getLayer();if(null!==i&&null!==i.character){const r=[i.character.inventory,...i.character.sharedInventory].filter(s=>void 0!==s.find(g=>null===g))[0];r&&(this.hold(t,null,n),this.moveDraggedItemToItemGroup(r))}}getCompatibleGearSlot(t,n){let i;switch(n.base){case c.JNB.Amulet:i=c.SHB.Amulet;break;case c.JNB.Belt:i=c.SHB.Belt;break;case c.JNB.Body:i=c.SHB.Body;break;case c.JNB.Boot:i=c.SHB.Boot;break;case c.JNB.Bracer:i=c.SHB.Bracer;break;case c.JNB.Cape:i=c.SHB.Cape;break;case c.JNB.Glove:i=c.SHB.Glove;break;case c.JNB.Helm:i=c.SHB.Helm;break;case c.JNB.Shoulder:i=c.SHB.Shoulder;break;case c.JNB.Ring:i=null===t.gear.ring_r?c.SHB.RightRing:c.SHB.LeftRing}return i}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(C.x))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var M=h(2722),E=h(3251),T=h(5245),H=h(2638),l=h(3075),u=h(2349),S=h(7423);let ke=(()=>{class a{constructor(t){this.name=t.name}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete-layer-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a layer"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",1),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",2),e._uU(8,"Delete"),e.qZA()()),2&t&&(e.xp6(3),e.hij(" You're about to delete layer ",n.name,"\n"),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[S.lW,u.ZT,u.uh,u.xY,u.H8]}),a})();var _=h(7322),w=h(7531);function Te(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Layer name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A layer name is required"),e.qZA()()(),e.TgZ(11,"mat-dialog-actions")(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Oqu(t.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}let Q=(()=>{class a{constructor(t,n){this.dialog=t,this.title=n.title,this.form=new l.cw({name:new l.NI(n.name,l.kI.required)})}submit(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.so),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-layer-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,Te,16,3,"form",0),2&t&&e.Q6J("ngIf",null!==n.form)},dependencies:[d.O5,S.lW,u.ZT,u.uh,u.xY,u.H8,_.TO,_.KE,_.hX,w.Nt,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u]}),a})();var Y=h(2340);let L=(()=>{class a{constructor(t){this.slormancerCharacterBuilderService=t}createBuild(t,n,i){return{version:Y.N.version,name:n,heroClass:t,layers:[],configuration:i}}createBuildWithCharacter(t,n,i,r){const s={version:Y.N.version,name:t,heroClass:i.heroClass,layers:[],configuration:r},g=this.slormancerCharacterBuilderService.getCharacterClone(i);return g.importVersion=null,g.fromCorrupted=!1,this.addLayer(s,n,g),s}addLayer(t,n,i=null){const r={name:n,character:null!==i?i:this.slormancerCharacterBuilderService.getCharacter(t.heroClass)};return t.layers.push(r),r}duplicateLayer(t,n,i){return this.addLayer(t,i,this.slormancerCharacterBuilderService.getCharacterClone(n.character))}deleteLayer(t,n){const i=t.layers.indexOf(n);-1!==i&&t.layers.splice(i,1)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(c.oYj))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var q=h(2424),$=h(9300),x=h(9224),I=h(4102),U=h(508),Z=h(7238);function we(a,o){if(1&a&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Ze(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"mat-icon",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeSearch())}),e._uU(1,"close"),e.qZA()}}let Ae=(()=>{class a extends O.B{constructor(t,n,i,r){super(),this.buildStorageService=t,this.buildService=n,this.searchService=i,this.dialog=r,this.searchControl=new l.NI(""),this.layerControl=new l.NI(null),this.layerOptions=[]}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.layerControl.setValue(t,{emitEvent:!1})),this.buildStorageService.buildChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>{this.layerOptions=null===t?[]:t.layers.map(n=>({label:n.name,value:n}))}),this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.searchControl.setValue(t,{emitEvent:!1})),this.layerControl.setValue(this.buildStorageService.getLayer(),{emitEvent:!1}),this.layerControl.valueChanges.pipe((0,$.h)(c.BXh)).subscribe(t=>this.buildStorageService.loadLayer(t)),this.searchControl.valueChanges.subscribe(t=>this.searchService.setSearch(t))}hasSearch(){return this.searchService.hasSearch()}removeSearch(){this.searchService.setSearch(null)}editLayer(){const t=this.buildStorageService.getLayer();null!==t&&this.dialog.open(Q,{data:{title:"Edit layer name",name:t.name}}).afterClosed().subscribe(i=>{i&&(t.name=i,this.buildStorageService.saveLayer())})}addLayer(){this.dialog.open(Q,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(n=>{const i=this.buildStorageService.getBuild();if(n&&null!==i){const r=this.buildService.addLayer(i,n);this.buildStorageService.loadLayer(r)}})}duplicateLayer(){this.dialog.open(Q,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(n=>{const i=this.buildStorageService.getBuild(),r=this.buildStorageService.getLayer();if(n&&null!==i&&null!==r){const s=this.buildService.duplicateLayer(i,r,n);this.buildStorageService.loadLayer(s)}})}removeLayer(){const t=this.buildStorageService.getLayer(),n=this.buildStorageService.getBuild();null!==t&&this.dialog.open(ke,{data:{name:t.name}}).afterClosed().subscribe(r=>{r&&null!==n&&(this.buildService.deleteLayer(n,t),this.buildStorageService.saveBuild())})}hasRoomForMoreLayer(){return this.buildStorageService.hasRoomForAnotherLayer()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x),e.Y36(L),e.Y36(q.o),e.Y36(u.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build-header"]],features:[e.qOj],decls:27,vars:7,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"layer"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit layer name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Add new layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Duplicate this layer",3,"disabled","click"],[1,"search"],["matInput","","type","text","autocomplete","off",3,"formControl"],["matSuffix","",3,"click",4,"ngIf"],[3,"value"],["matSuffix","",3,"click"]],template:function(t,n){1&t&&(e._UZ(0,"input",0),e.TgZ(1,"mat-card")(2,"mat-card-content")(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),e._uU(6,"Current layer"),e.qZA(),e.TgZ(7,"mat-select",3),e.YNc(8,we,2,2,"mat-option",4),e.qZA()(),e.TgZ(9,"button",5),e.NdJ("click",function(){return n.editLayer()}),e.TgZ(10,"mat-icon"),e._uU(11,"edit"),e.qZA()(),e.TgZ(12,"button",6),e.NdJ("click",function(){return n.removeLayer()}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()(),e.TgZ(15,"button",7),e.NdJ("click",function(){return n.addLayer()}),e.TgZ(16,"mat-icon"),e._uU(17,"add"),e.qZA()(),e.TgZ(18,"button",8),e.NdJ("click",function(){return n.duplicateLayer()}),e.TgZ(19,"mat-icon"),e._uU(20,"content_copy"),e.qZA()()(),e.TgZ(21,"div",9)(22,"mat-form-field",2)(23,"mat-label"),e._uU(24,"Search"),e.qZA(),e._UZ(25,"input",10),e.YNc(26,Ze,2,0,"mat-icon",11),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("formControl",n.layerControl),e.xp6(1),e.Q6J("ngForOf",n.layerOptions),e.xp6(4),e.Q6J("disabled",n.layerOptions.length<=1),e.xp6(3),e.Q6J("disabled",!n.hasRoomForMoreLayer()),e.xp6(3),e.Q6J("disabled",!n.hasRoomForMoreLayer()),e.xp6(7),e.Q6J("formControl",n.searchControl),e.xp6(1),e.Q6J("ngIf",n.hasSearch()))},dependencies:[d.sg,d.O5,S.lW,T.Hw,x.a8,x.dn,_.KE,_.hX,_.R9,w.Nt,I.gD,U.ey,Z.gM,l.Fj,l.JJ,l.oH],styles:["mat-card[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;margin-bottom:16px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;padding:4px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex-direction:column}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:250px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),a})();var qe=h(6729);let F=(()=>{class a{constructor(t,n,i,r){this.slormancerCharacterBuilderService=t,this.slormancerSaveParserService=n,this.slormancerShortDataService=i,this.jsonConverterService=r;const s=document.getElementsByTagName("base")[0];let g="/";if(void 0!==s){const p=s.getAttribute("href");null!==p&&(g=p)}this.VIEW_BUILD_PATH=window.origin+g+"slorm-planner/view/build/"}parseSaveData(t,n){const i=this.slormancerSaveParserService.parseSaveFile(t);return{character:this.slormancerCharacterBuilderService.getCharacterFromSave(i,n),configuration:this.slormancerCharacterBuilderService.getConfigFromSave(i),layer:null,planner:null}}parseUrlData(t){let n={character:null,configuration:null,layer:null,planner:null},i=null;try{const s=new URL(t).pathname.split("/");i=(0,c.lA$)(s[s.length-1])}catch(r){}return null!==i&&(n=this.importFromShortData(i)),n}parseJsonData(t){const n=JSON.parse(t);return this.jsonConverterService.jsonToSharedData(n)}import(t,n=null){let i={character:null,configuration:null,layer:null,planner:null};if(null!==n)try{return i=this.parseSaveData(t,n),i}catch(r){console.error("Error when parsing save file : ",r)}try{return i=this.parseJsonData(atob(t)),i}catch(r){}try{return i=this.parseJsonData(t),i}catch(r){}return i=this.importFromShortData(t),null===i.character&&(i=this.parseUrlData(t)),i}exportCharacter(t){return btoa(JSON.stringify(this.jsonConverterService.characterToJson(t)))}exportLayer(t){return btoa(JSON.stringify(this.jsonConverterService.layerToJson(t)))}exportBuild(t){return btoa(JSON.stringify(this.jsonConverterService.buildToJson(t)))}exportCharacterAsLink(t,n){const i=this.slormancerShortDataService.characterToShortData(t,n);return this.VIEW_BUILD_PATH+i}importFromShortData(t){return Object.assign(Object.assign({},this.slormancerShortDataService.shortDataToCharacter(t)),{layer:null,planner:null})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(c.oYj),e.LFG(c.XeX),e.LFG(c.qY3),e.LFG(qe.D))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var R=h(8223),z=h(2763);function Ie(a,o){if(1&a&&(e.TgZ(0,"mat-icon",5),e._uU(1,"help_outline"),e.qZA()),2&a){const t=e.oxw(2);e.Q6J("matTooltip",t.help)}}function Le(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-icon"),e._uU(2,"file_upload"),e.qZA(),e._uU(3),e.YNc(4,Ie,2,1,"mat-icon",4),e.BQk()),2&a){const t=e.oxw();e.xp6(3),e.hij("",t.label," "),e.xp6(1),e.Q6J("ngIf",null!==t.help)}}function Ue(a,o){1&a&&(e.ynx(0),e.TgZ(1,"mat-icon",6),e._uU(2,"sync"),e.qZA(),e._uU(3,"Uploading..."),e.BQk())}let W=(()=>{class a{constructor(t){this.messageService=t,this.MAX_UPLOAD_FILE_SIZE_MO=1,this.MAX_UPLOAD_FILE_SIZE=1048576*this.MAX_UPLOAD_FILE_SIZE_MO,this.label=null,this.help=null,this.upload=new e.vpe,this.busy=!1,this.parsing=!1}uploadFile(t){return new Promise((n,i)=>{var r=new FileReader;r.onerror=()=>{r=null,i()},r.onloadend=()=>{null!==r&&null!==r.result&&(n(r.result.toString()),r=null)},r.readAsText(t)})}startUpload(t){const n=t.target;if(null!==n&&!this.busy){const i=n.files,r=null===i?null:(0,c.lA$)(i[0]);null!==r&&(r.size<=this.MAX_UPLOAD_FILE_SIZE?(this.busy=!0,this.uploadFile(r).then(s=>{this.upload.emit(s),n.value="",this.busy=!1},()=>{n.value="",this.messageService.error("Failed to upload this file"),this.busy=!1})):this.messageService.error("Cannot upload files bigger than "+this.MAX_UPLOAD_FILE_SIZE_MO+"Mo"))}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(R.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-file-upload-button"]],inputs:{label:"label",help:"help"},outputs:{upload:"upload"},decls:5,vars:2,consts:[["type","file",3,"change"],["fileInput",""],["mat-flat-button","","color","primary",3,"click"],[4,"ngIf"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"animation-rotation"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"input",0,1),e.NdJ("change",function(s){return n.startUpload(s)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){e.CHM(i);const s=e.MAs(1);return e.KtG(s.click())}),e.YNc(3,Le,5,2,"ng-container",3),e.YNc(4,Ue,4,0,"ng-container",3),e.qZA()}2&t&&(e.xp6(3),e.Q6J("ngIf",!n.busy),e.xp6(1),e.Q6J("ngIf",n.busy))},dependencies:[d.O5,S.lW,T.Hw,Z.gM],styles:["input[type=file][_ngcontent-%COMP%]{display:none}button[_ngcontent-%COMP%]{width:100%}"]}),a})();function Ne(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.selectedClass=r)}),e._UZ(1,"img",9),e.TgZ(2,"div",10),e._uU(3),e.qZA()()}if(2&a){const t=o.$implicit,n=e.oxw();e.ekj("selected",n.selectedClass===t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t,"/head.png",e.LSH),e.xp6(2),e.Oqu(n.getLevel(t))}}let Je=(()=>{class a{constructor(t,n,i,r,s,g,p){this.messageService=t,this.buildStorageService=n,this.buildService=i,this.slormancerSaveParserService=r,this.slormancerCharacterBuilderService=s,this.importExportService=g,this.clipboardService=p,this.HERO_CLASSES=[c.iHO.Warrior,c.iHO.Huntress,c.iHO.Mage],this.created=new e.vpe,this.name="Default name",this.characters=null,this.config=null,this.selectedClass=null}parseGameSave(t){try{const n=this.slormancerSaveParserService.parseSaveFile(t);this.characters={[c.iHO.Warrior]:this.slormancerCharacterBuilderService.getCharacterFromSave(n,c.iHO.Warrior),[c.iHO.Huntress]:this.slormancerCharacterBuilderService.getCharacterFromSave(n,c.iHO.Huntress),[c.iHO.Mage]:this.slormancerCharacterBuilderService.getCharacterFromSave(n,c.iHO.Mage)},this.config=this.slormancerCharacterBuilderService.getConfigFromSave(n),this.selectedClass=null}catch(n){console.error(n),this.messageService.error("An error occured while parsing this save file")}}getLevel(t){let n="";return null!==this.characters&&(n=this.characters[t].level.toString()),n}createBuild(){if(null!==this.selectedClass&&null!==this.characters){const t=null===this.config?c.g5j:Object.assign(Object.assign({},c.g5j),this.config),n=this.buildService.createBuildWithCharacter(this.name,"New layer",this.characters[this.selectedClass],t);this.buildStorageService.addBuild(n),this.created.emit()}}copyExternalLink(){if(null!==this.selectedClass&&null!==this.characters){let t=c.g5j;null!==this.config&&(t=Object.assign(Object.assign({},t),this.config));const n=this.importExportService.exportCharacterAsLink(this.characters[this.selectedClass],t);this.clipboardService.copyToClipboard(n)?this.messageService.message("Link copied to clipboard"):this.messageService.error("Failed to copy link to clipboard")}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(R.e),e.Y36(C.x),e.Y36(L),e.Y36(c.XeX),e.Y36(c.oYj),e.Y36(F),e.Y36(z.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-from-game"]],inputs:{name:"name"},outputs:{created:"created"},decls:13,vars:7,consts:[[1,"import-game"],["label","Upload a Slormancer save file","help","Save files are located in :\n        C:\\Users\\[User]\\AppData\\Local\\The_Slormancer",3,"upload"],[1,"save-summary"],[1,"classes"],["class","head",3,"selected","click",4,"ngFor","ngForOf"],[1,"actions"],["mat-flat-button","","color","primary",1,"create",3,"disabled","click"],["mat-icon-button","","matTooltip","Generate an external link of this build",3,"disabled","click"],[1,"head",3,"click"],[3,"src"],[1,"level"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"app-file-upload-button",1),e.NdJ("upload",function(r){return n.parseGameSave(r)}),e.qZA(),e.TgZ(2,"div",2)(3,"p"),e._uU(4,"Choose which character you want to upload"),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,Ne,4,4,"div",4),e.qZA()(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return n.createBuild()}),e._uU(9,"Create build"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return n.copyExternalLink()}),e.TgZ(11,"mat-icon"),e._uU(12,"share"),e.qZA()()()()),2&t&&(e.xp6(2),e.ekj("disabled",null===n.characters),e.xp6(1),e.ekj("disabled",null===n.characters),e.xp6(3),e.Q6J("ngForOf",n.HERO_CLASSES),e.xp6(2),e.Q6J("disabled",null===n.characters||null===n.selectedClass),e.xp6(2),e.Q6J("disabled",null===n.characters||null===n.selectedClass))},dependencies:[d.sg,S.lW,T.Hw,Z.gM,W],styles:[".import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px;padding-bottom:20px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;border:4px solid black;width:40px;height:40px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;image-rendering:pixelated;transition:opacity .5s}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{position:absolute;bottom:-20px;width:24px;height:24px;line-height:8px;font-size:12px;text-align:center;border:2px solid black;padding:4px;border-radius:20% 20% 50% 50%;background-color:#353535;transition:opacity .5s;left:50%;transform:translate(-50%)}.import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.1}.import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%], .import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%], .import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{border-color:#b7b7b7}.import-game[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px}.import-game[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]{flex-grow:1}"]}),a})();function Ee(a,o){1&a&&(e.TgZ(0,"mat-hint",8),e._uU(1,"Paste here a save, build, layer or link"),e.qZA())}function Re(a,o){1&a&&(e.TgZ(0,"mat-hint",8),e._uU(1,"Paste here a build, layer or link"),e.qZA())}function Be(a,o){1&a&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Character found"),e.qZA())}function Qe(a,o){1&a&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Layer found"),e.qZA())}function Fe(a,o){1&a&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Build found"),e.qZA())}function He(a,o){1&a&&(e.TgZ(0,"mat-hint",10),e._uU(1,"No valid data found"),e.qZA())}let ee=(()=>{class a{constructor(t){this.importExportService=t,this.MAX_UPLOAD_FILE_SIZE_MO=1,this.MAX_UPLOAD_FILE_SIZE=1048576*this.MAX_UPLOAD_FILE_SIZE_MO,this.uploadLabel=null,this.importLabel=null,this.heroClass=null,this.import=new e.vpe,this.sharedData=null,this.importContent=new l.NI(null,l.kI.maxLength(this.MAX_UPLOAD_FILE_SIZE)),this.importContent.valueChanges.subscribe(n=>{null===n||0===n.length?this.sharedData=null:this.parseExportedData(n)})}parseExportedData(t){this.sharedData=this.importExportService.import(t,this.heroClass)}hasValidSharedData(){return null!==this.sharedData&&(null!==this.sharedData.character&&(null===this.heroClass||this.sharedData.character.heroClass===this.heroClass)||null!==this.sharedData.layer&&(null===this.heroClass||this.sharedData.layer.character.heroClass===this.heroClass)||null!==this.sharedData.planner&&(null===this.heroClass||this.sharedData.planner.heroClass===this.heroClass))}upload(t){this.importContent.setValue(t)}importData(){null!==this.sharedData&&(this.import.emit(this.sharedData),this.importContent.setValue(""),this.sharedData=null)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-import-data"]],inputs:{uploadLabel:"uploadLabel",importLabel:"importLabel",heroClass:"heroClass"},outputs:{import:"import"},decls:16,vars:11,consts:[[1,"import"],[3,"label","upload"],["appearance","outline","color","primary","floatLabel","never"],["matInput","",3,"formControl"],["align","end",4,"ngIf"],["align","end","class","success",4,"ngIf"],["align","end","class","error",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"],["align","end"],["align","end",1,"success"],["align","end",1,"error"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"app-file-upload-button",1),e.NdJ("upload",function(r){return n.upload(r)}),e.qZA(),e.TgZ(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Import content..."),e.qZA(),e._UZ(5,"textarea",3),e.YNc(6,Ee,2,0,"mat-hint",4),e.YNc(7,Re,2,0,"mat-hint",4),e.YNc(8,Be,2,0,"mat-hint",5),e.YNc(9,Qe,2,0,"mat-hint",5),e.YNc(10,Fe,2,0,"mat-hint",5),e.YNc(11,He,2,0,"mat-hint",6),e.TgZ(12,"mat-error"),e._uU(13),e.qZA()(),e.TgZ(14,"button",7),e.NdJ("click",function(){return n.importData()}),e._uU(15),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("label",n.uploadLabel),e.xp6(4),e.Q6J("formControl",n.importContent),e.xp6(1),e.Q6J("ngIf",null===n.sharedData&&null!==n.heroClass),e.xp6(1),e.Q6J("ngIf",null===n.sharedData&&null===n.heroClass),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&n.hasValidSharedData()&&null!==n.sharedData.character),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&n.hasValidSharedData()&&null!==n.sharedData.layer),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&n.hasValidSharedData()&&null!==n.sharedData.planner),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&!n.hasValidSharedData()),e.xp6(2),e.hij("Cannot parse files bigger than ",n.MAX_UPLOAD_FILE_SIZE_MO,"Mo"),e.xp6(1),e.Q6J("disabled",!n.hasValidSharedData()),e.xp6(1),e.Oqu(n.importLabel))},dependencies:[d.O5,S.lW,_.TO,_.KE,_.bx,_.hX,w.Nt,l.Fj,l.JJ,l.oH,W],styles:[".import[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;width:100%}.import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:60px;max-height:60px}"]}),a})(),Ye=(()=>{class a{constructor(t,n){this.buildStorageService=t,this.buildService=n,this.created=new e.vpe,this.name="Default name"}createBuild(t){let n=c.g5j;if(null!==t.configuration&&(n=Object.assign(Object.assign({},n),t.configuration)),null!==t.character){const i=this.buildService.createBuildWithCharacter(this.name,"Imported layer",t.character,n);this.buildStorageService.addBuild(i),this.created.emit()}else if(null!==t.layer){const i=this.buildService.createBuildWithCharacter(this.name,t.layer.name,t.layer.character,n);this.buildStorageService.addBuild(i),this.created.emit()}else null!==t.planner&&(this.buildStorageService.addBuild(t.planner),this.created.emit())}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x),e.Y36(L))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-from-export"]],inputs:{name:"name"},outputs:{created:"created"},decls:2,vars:0,consts:[[1,"import-game"],["uploadLabel","Upload an exported file","importLabel","Create build",3,"import"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"app-import-data",1),e.NdJ("import",function(r){return n.createBuild(r)}),e.qZA()())},dependencies:[ee],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}"]}),a})();function De(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.selectedClass=r)}),e._UZ(1,"img",6),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw();e.ekj("selected",n.selectedClass===t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t,"/head.png",e.LSH)}}let Ve=(()=>{class a{constructor(t,n){this.buildService=t,this.buildStorageService=n,this.HERO_CLASSES=[c.iHO.Warrior,c.iHO.Huntress,c.iHO.Mage],this.created=new e.vpe,this.name="Default name",this.selectedClass=null}createBuild(){if(null!==this.selectedClass){const t=this.buildService.createBuild(this.selectedClass,this.name,c.g5j);this.buildService.addLayer(t,this.name),this.buildStorageService.addBuild(t),this.created.emit()}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(L),e.Y36(C.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-empty"]],inputs:{name:"name"},outputs:{created:"created"},decls:8,vars:2,consts:[[1,"import-game"],[1,"save-summary"],[1,"classes"],["class","head",3,"selected","click",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"head",3,"click"],[3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p"),e._uU(3,"Choose which character you want to build"),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,De,2,3,"div",3),e.qZA()(),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.createBuild()}),e._uU(7,"Create build"),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",n.HERO_CLASSES),e.xp6(1),e.Q6J("disabled",null===n.selectedClass))},dependencies:[d.sg,S.lW],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px;padding-bottom:20px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;border:4px solid black;width:40px;height:40px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;image-rendering:pixelated;transition:opacity .5s}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{position:absolute;bottom:-20px;width:16px;height:16px;line-height:14px;text-align:center;border:2px solid black;padding:4px;border-radius:20% 20% 50% 50%;background-color:#353535;transition:opacity .5s;left:50%;transform:translate(-50%)}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%]{border-color:#b7b7b7}"]}),a})(),te=(()=>{class a{constructor(){this.created=new e.vpe,this.buildName="My build"}passCreatedEvent(){this.created.emit()}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build"]],outputs:{created:"created"},decls:16,vars:4,consts:[[3,"name","created"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","text",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"h2"),e._uU(1,"Create build from a Slormancer save"),e.qZA(),e.TgZ(2,"app-create-build-from-game",0),e.NdJ("created",function(){return n.passCreatedEvent()}),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"h2"),e._uU(5,"Create build from exported data"),e.qZA(),e.TgZ(6,"app-create-build-from-export",0),e.NdJ("created",function(){return n.passCreatedEvent()}),e.qZA(),e._UZ(7,"hr"),e.TgZ(8,"h2"),e._uU(9,"Create empty build"),e.qZA(),e.TgZ(10,"app-create-build-empty",0),e.NdJ("created",function(){return n.passCreatedEvent()}),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"mat-form-field",1)(13,"mat-label"),e._uU(14,"Build name"),e.qZA(),e.TgZ(15,"input",2),e.NdJ("ngModelChange",function(r){return n.buildName=r}),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("name",n.buildName),e.xp6(4),e.Q6J("name",n.buildName),e.xp6(4),e.Q6J("name",n.buildName),e.xp6(5),e.Q6J("ngModel",n.buildName))},dependencies:[_.KE,_.hX,w.Nt,l.Fj,l.JJ,l.On,Je,Ye,Ve],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}hr[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}"]}),a})(),je=(()=>{class a{constructor(t){this.dialog=t}created(){this.dialog.close()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-modal"]],decls:2,vars:0,consts:[[3,"created"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content")(1,"app-create-build",0),e.NdJ("created",function(){return n.created()}),e.qZA()())},dependencies:[u.xY,te],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:16px;padding:16px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;width:340px;padding:0 60px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:0}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{width:auto;padding:0}}"]}),a})(),Ge=(()=>{class a{constructor(t){this.name=t.name}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete-build-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a build"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",1),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",2),e._uU(8,"Delete"),e.qZA()()),2&t&&(e.xp6(3),e.hij(" You're about to delete the build ",n.name,"\n"),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[S.lW,u.ZT,u.uh,u.xY,u.H8]}),a})();function Ke(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Build name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A build name is required"),e.qZA()()(),e.TgZ(11,"mat-dialog-actions")(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Oqu(t.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}let Xe=(()=>{class a{constructor(t,n){this.dialog=t,this.title=n.title,this.form=new l.cw({name:new l.NI(n.name,l.kI.required)})}submit(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.so),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-build-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,Ke,16,3,"form",0),2&t&&e.Q6J("ngIf",null!==n.form)},dependencies:[d.O5,S.lW,u.ZT,u.uh,u.xY,u.H8,_.TO,_.KE,_.hX,w.Nt,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u]}),a})();var ne=h(4296);let $e=(()=>{class a{constructor(){}downloadFile(t,n){const i=document.createElement("a"),r=new Blob([t],{type:"text/plain"}),s=window.URL.createObjectURL(r);i.href=s,i.download=n,i.click(),window.URL.revokeObjectURL(s),i.remove()}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function ze(a,o){if(1&a&&(e.TgZ(0,"a",23),e._UZ(1,"img",24),e.qZA()),2&a){const t=o.$implicit;e.Q6J("routerLink",t.link),e.xp6(1),e.Q6J("src",t.icon,e.LSH)("matTooltip",t.label)}}function We(a,o){if(1&a&&(e.TgZ(0,"mat-select-trigger"),e._UZ(1,"img",25),e._uU(2),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.MGl("src","assets/img/character/icon/",t.buildControl.value.heroClass,"/head.png",e.LSH),e.xp6(1),e.hij(" ",t.buildControl.value.name," ")}}function et(a,o){if(1&a&&(e.TgZ(0,"mat-option",26),e._UZ(1,"img",25),e._uU(2),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t.heroClass,"/head.png",e.LSH),e.xp6(1),e.hij(" ",t.name," ")}}let tt=(()=>{class a extends O.B{constructor(t,n,i,r,s,g,p,m){super(),this.messageService=t,this.downloadService=n,this.clipboardService=i,this.importExportService=r,this.buildStorageService=s,this.buildService=g,this.router=p,this.dialog=m,this.SHORTCUTS=[{link:"/slorm-reaper",icon:"assets/img/reaper/0/0.png",label:"Slorm reapers"}],this.VERSION=Y.N.version,this.GITHUB_PROJECT_LINK=ne.yF,this.GAME_LINK=ne.F1,this.sidenav=null,this.busy=!1,this.buildControl=new l.NI(this.buildStorageService.getBuildPreview()),this.buildControl.valueChanges.pipe((0,M.R)(this.unsubscribe),(0,$.h)(c.BXh)).subscribe(f=>this.buildStorageService.loadBuild(f)),this.buildStorageService.buildChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(()=>{this.buildControl.setValue(this.buildStorageService.getBuildPreview(),{emitEvent:!1})})}ngOnInit(){}closeSideNav(){null!==this.sidenav&&this.sidenav.close()}getBuilds(){return this.buildStorageService.getBuilds()}getHeroClass(){let t=c.iHO.Warrior;const n=this.buildStorageService.getBuild();return null!==n&&(t=n.heroClass),t}import(t){const n=this.buildStorageService.getBuild();if(null!==t&&null!==n)if(null!==t.character)this.dialog.open(Q,{data:{title:"New character layer's name",name:null}}).afterClosed().subscribe(r=>{if(r){const s=this.buildService.addLayer(n,r,t.character);this.buildStorageService.loadLayer(s),this.closeSideNav()}});else if(null!==t.layer){const i=this.buildService.addLayer(n,t.layer.name,t.layer.character);this.buildStorageService.loadLayer(i),this.closeSideNav()}else if(null!==t.planner){let i=null;for(const r of t.planner.layers)i=this.buildService.addLayer(n,r.name,r.character);null!==i&&this.buildStorageService.loadLayer(i),this.closeSideNav()}}downloadLayer(){const t=this.buildStorageService.getLayer();if(null!==t){const n=this.importExportService.exportLayer(t);this.downloadService.downloadFile(n,t.name)}}copyLayer(){const t=this.buildStorageService.getLayer();if(null!==t){const n=this.importExportService.exportLayer(t);this.clipboardService.copyToClipboard(n)?this.messageService.message("Layer copied to clipboard"):this.messageService.error("Failed to copy layer to clipboard")}}downloadBuild(){const t=this.buildStorageService.getBuild();if(null!==t){const n=this.importExportService.exportBuild(t);this.downloadService.downloadFile(n,"build.sav")}}copyBuild(){const t=this.buildStorageService.getBuild();if(null!==t){const n=this.importExportService.exportBuild(t);this.clipboardService.copyToClipboard(n)?this.messageService.message("Build copied to clipboard"):this.messageService.error("Failed to copy build to clipboard")}}copyExternalLink(){const t=this.buildStorageService.getLayer(),n=this.buildStorageService.getBuild();if(null!==t&&null!==n){const i=this.importExportService.exportCharacterAsLink(t.character,n.configuration);this.clipboardService.copyToClipboard(i)?this.messageService.message("Link copied to clipboard"):this.messageService.error("Failed to copy link to clipboard")}}deleteBuild(){const t=this.buildStorageService.getBuild();null!==t&&this.dialog.open(Ge,{data:{name:t.name}}).afterClosed().subscribe(i=>{i&&(this.buildStorageService.deleteBuild(),0===this.buildStorageService.getBuilds().length&&this.router.navigate(["slorm-planner","create"]))})}editBuild(){const t=this.buildStorageService.getBuild();null!==t&&this.dialog.open(Xe,{data:{title:"Edit build name",name:t.name}}).afterClosed().subscribe(i=>{i&&(t.name=i,this.buildStorageService.saveBuild())})}createNewBuild(){this.dialog.open(je)}trackbyBuildPreview(t,n){return n.storageKey}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(R.e),e.Y36($e),e.Y36(z.Y),e.Y36(F),e.Y36(C.x),e.Y36(L),e.Y36(k.F0),e.Y36(u.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build-sidenav"]],inputs:{sidenav:"sidenav"},features:[e.qOj],decls:63,vars:8,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"sidenav"],[1,"shortcuts"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"build"],[1,"build-selection"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit build name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete build",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"import"],["uploadLabel","From file","importLabel","Import into current build",3,"heroClass","import"],[1,"export"],[1,"export-details"],[1,"actions"],["mat-icon-button","","matTooltip","Download",3,"click"],["mat-icon-button","","matTooltip","Copy to clipboard",3,"click"],["mat-icon-button","","matTooltip","External link",3,"click"],[1,"info"],["target","blank",3,"href"],[3,"routerLink"],[3,"src","matTooltip"],[1,"hero-icon",3,"src"],[3,"value"]],template:function(t,n){1&t&&(e._UZ(0,"input",0),e.TgZ(1,"div",1)(2,"div",2)(3,"span"),e._uU(4,"Other tools :"),e.qZA(),e.YNc(5,ze,2,3,"a",3),e.qZA(),e.TgZ(6,"div",4)(7,"h3"),e._uU(8,"Builds"),e.qZA(),e.TgZ(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"Current build"),e.qZA(),e.TgZ(13,"mat-select",7),e.YNc(14,We,3,2,"mat-select-trigger",8),e.YNc(15,et,3,3,"mat-option",9),e.qZA()(),e.TgZ(16,"button",10),e.NdJ("click",function(){return n.editBuild()}),e.TgZ(17,"mat-icon"),e._uU(18,"edit"),e.qZA()(),e.TgZ(19,"button",11),e.NdJ("click",function(){return n.deleteBuild()}),e.TgZ(20,"mat-icon"),e._uU(21,"delete"),e.qZA()()(),e.TgZ(22,"button",12),e.NdJ("click",function(){return n.createNewBuild()}),e._uU(23,"New build"),e.qZA()(),e._UZ(24,"hr"),e.TgZ(25,"div",13)(26,"h3"),e._uU(27,"Import"),e.qZA(),e.TgZ(28,"app-import-data",14),e.NdJ("import",function(r){return n.import(r)}),e.qZA()(),e._UZ(29,"hr"),e.TgZ(30,"div",15)(31,"h3"),e._uU(32,"Export"),e.qZA(),e.TgZ(33,"div",16)(34,"p"),e._uU(35,"Current layer"),e.qZA(),e.TgZ(36,"div",17)(37,"button",18),e.NdJ("click",function(){return!n.busy&&n.downloadLayer()}),e.TgZ(38,"mat-icon"),e._uU(39,"file_download"),e.qZA()(),e.TgZ(40,"button",19),e.NdJ("click",function(){return!n.busy&&n.copyLayer()}),e.TgZ(41,"mat-icon"),e._uU(42,"content_copy"),e.qZA()(),e.TgZ(43,"button",20),e.NdJ("click",function(){return!n.busy&&n.copyExternalLink()}),e.TgZ(44,"mat-icon"),e._uU(45,"share"),e.qZA()()()(),e.TgZ(46,"div",16)(47,"p"),e._uU(48,"Current build"),e.qZA(),e.TgZ(49,"div",17)(50,"button",18),e.NdJ("click",function(){return!n.busy&&n.downloadBuild()}),e.TgZ(51,"mat-icon"),e._uU(52,"file_download"),e.qZA()(),e.TgZ(53,"button",19),e.NdJ("click",function(){return!n.busy&&n.copyBuild()}),e.TgZ(54,"mat-icon"),e._uU(55,"content_copy"),e.qZA()()()()(),e.TgZ(56,"div",21),e._uU(57),e.TgZ(58,"a",22),e._uU(59,"Github"),e.qZA(),e._uU(60," - "),e.TgZ(61,"a",22),e._uU(62,"The Slormancer"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",n.SHORTCUTS),e.xp6(8),e.Q6J("formControl",n.buildControl),e.xp6(1),e.Q6J("ngIf",null!==n.buildControl.value),e.xp6(1),e.Q6J("ngForOf",n.getBuilds()),e.xp6(13),e.Q6J("heroClass",n.getHeroClass()),e.xp6(29),e.hij(" Slorm Planner ",n.VERSION," - "),e.xp6(1),e.Q6J("href",n.GITHUB_PROJECT_LINK,e.LSH),e.xp6(3),e.Q6J("href",n.GAME_LINK,e.LSH))},dependencies:[d.sg,d.O5,S.lW,T.Hw,_.KE,_.hX,I.gD,I.$L,U.ey,Z.gM,l.JJ,l.oH,ee,k.yS],styles:[".sidenav[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;height:100%}.sidenav[_ngcontent-%COMP%]   .shortcuts[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px;padding:4px}.sidenav[_ngcontent-%COMP%]   .shortcuts[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{outline:0}.sidenav[_ngcontent-%COMP%]   .shortcuts[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;padding:4px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:400}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:48px;max-height:48px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.sidenav[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#505050;margin-top:auto;text-align:right}"]}),a})();const nt=["dragImage"],at=["dragBackground"];function it(a,o){if(1&a&&(e.TgZ(0,"a",11,12)(2,"span",13),e._uU(3),e.qZA()()),2&a){const t=o.$implicit,n=e.MAs(1);e.Q6J("routerLink",t.route)("active",n.isActive),e.xp6(3),e.Oqu(t.name)}}let ot=(()=>{class a extends O.B{constructor(t){super(),this.itemMoveService=t,this.ROUTES=[{name:"Inventory",route:"inventory"},{name:"Skills",route:"skills"},{name:"Ancestral legacies",route:"ancestral-legacies"},{name:"Attributes",route:"attributes"},{name:"Stats",route:"stats"},{name:"Config",route:"config"},{name:"Compare",route:"compare"}],this.isDragging=!1,this.dragImage=null,this.dragBackground=null,this.itemMoveService.draggingItem.pipe((0,M.R)(this.unsubscribe)).subscribe(n=>{this.isDragging=n;const i=this.itemMoveService.getHoldItem();null!==i&&this.dragImage&&this.dragBackground&&(this.dragImage.nativeElement.src=i.icon,this.dragBackground.nativeElement.src=i.itemIconBackground)})}onMouseMove(t){if(this.itemMoveService.startDragging(),this.isDragging&&null!==this.itemMoveService.getHoldItem()&&this.dragImage&&this.dragBackground){const n=t.clientY-this.dragImage.nativeElement.height/2+"px",i=t.clientX-this.dragImage.nativeElement.width/2+"px";this.dragImage.nativeElement.style.top=n,this.dragImage.nativeElement.style.left=i,this.dragBackground.nativeElement.style.top=n,this.dragBackground.nativeElement.style.left=i}}onMouseUp(){this.itemMoveService.releaseHoldItem()}onMouseContextMenu(){this.itemMoveService.releaseHoldItem()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build"]],viewQuery:function(t,n){if(1&t&&(e.Gf(nt,5),e.Gf(at,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.dragImage=i.first),e.iGM(i=e.CRH())&&(n.dragBackground=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mousemove",function(r){return n.onMouseMove(r)})("mouseup",function(){return n.onMouseUp()})("contextmenu",function(){return n.onMouseContextMenu()})},features:[e.qOj],decls:17,vars:6,consts:[[1,"header"],[1,"tools"],[3,"click"],["mat-tab-nav-bar","","color","primary"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active",4,"ngFor","ngForOf"],["sidenav",""],[3,"sidenav"],["id","drag-background"],["dragBackground",""],["id","drag-image"],["dragImage",""],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],["translate",""]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),e.NdJ("click",function(){e.CHM(i);const s=e.MAs(8);return e.KtG(s.toggle())}),e._uU(3,"menu"),e.qZA()(),e.TgZ(4,"nav",3),e.YNc(5,it,4,3,"a",4),e.qZA()(),e.TgZ(6,"mat-sidenav-container")(7,"mat-sidenav",null,5),e._UZ(9,"app-build-sidenav",6),e.qZA(),e.TgZ(10,"mat-sidenav-content"),e._UZ(11,"app-build-header")(12,"router-outlet")(13,"img",7,8)(15,"img",9,10),e.qZA()()}if(2&t){const i=e.MAs(8);e.xp6(5),e.Q6J("ngForOf",n.ROUTES),e.xp6(4),e.Q6J("sidenav",i),e.xp6(4),e.ekj("dragging",n.isDragging),e.xp6(2),e.ekj("dragging",n.isDragging)}},dependencies:[d.sg,E.BU,E.Nj,T.Hw,H.JX,H.TM,H.Rh,k.lC,k.yS,k.Od,Ae,tt],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:stretch}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;z-index:2;background-color:#0c0c0c;box-shadow:0 2px 4px -1px #b7b7b733,0 4px 5px #b7b7b724,0 1px 10px #b7b7b71f}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:48px;min-width:48px;cursor:pointer}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{flex-grow:1}#drag-image[_ngcontent-%COMP%], #drag-background[_ngcontent-%COMP%]{z-index:1;position:fixed;pointer-events:none}#drag-image[_ngcontent-%COMP%]:not(.dragging), #drag-background[_ngcontent-%COMP%]:not(.dragging){display:none}#drag-background[_ngcontent-%COMP%]{opacity:.6}"]}),a})();var y=h(1314);function rt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,s=e.MAs(1),g=e.oxw(2);return e.KtG(g.showOverlay(s,r))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.hideOverlay())}),e.TgZ(2,"div",6),e._UZ(3,"img",7),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()}if(2&a){const t=o.$implicit;e.xp6(3),e.MGl("src","assets/img/icon/",t.icon,".png",e.LSH),e.xp6(2),e.Oqu(t.name)}}function ct(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,s=e.MAs(1),g=e.oxw(2);return e.KtG(g.showOverlay(s,r))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.hideOverlay())}),e.TgZ(2,"div",6),e._UZ(3,"img",7),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()}if(2&a){const t=o.$implicit;e.xp6(3),e.MGl("src","assets/img/icon/",t.icon,".png",e.LSH),e.xp6(2),e.Oqu(t.name)}}function lt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,s=e.MAs(1),g=e.oxw(2);return e.KtG(g.showOverlay(s,r))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.hideOverlay())}),e.TgZ(2,"div",6),e._UZ(3,"img",7),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()}if(2&a){const t=o.$implicit;e.xp6(3),e.MGl("src","assets/img/icon/",t.icon,".png",e.LSH),e.xp6(2),e.Oqu(t.name)}}function st(a,o){if(1&a&&(e.TgZ(0,"div",10)(1,"div",11),e._UZ(2,"h3",12)(3,"p",12),e.qZA()()),2&a){const t=e.oxw(3);e.xp6(2),e.Q6J("innerHTML",t.overlayMechanic.name,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.overlayMechanic.description,e.oJD)}}function gt(a,o){if(1&a&&e.YNc(0,st,4,2,"ng-template",9),2&a){const t=e.oxw(2);e.Q6J("cdkConnectedOverlayOpen",!0)("cdkConnectedOverlayOrigin",t.overlayTrigger)}}function dt(a,o){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,rt,6,2,"div",2),e.YNc(2,ct,6,2,"div",2),e.YNc(3,lt,6,2,"div",2),e.YNc(4,gt,1,2,null,3),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.classMechanics),e.xp6(1),e.Q6J("ngForOf",t.mechanics),e.xp6(1),e.Q6J("ngForOf",t.buffs),e.xp6(1),e.Q6J("ngIf",null!==t.overlayMechanic&&null!==t.overlayTrigger)}}let ae=(()=>{class a{constructor(){this.classMechanics=[],this.mechanics=[],this.buffs=[],this.overlayTrigger=null,this.overlayMechanic=null}showOverlay(t,n){this.overlayMechanic=n,this.overlayTrigger=t}hideOverlay(){this.overlayTrigger=null,this.overlayMechanic=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-mechanics-view"]],inputs:{classMechanics:"classMechanics",mechanics:"mechanics",buffs:"buffs"},decls:1,vars:1,consts:[["class","mechanics",4,"ngIf"],[1,"mechanics"],["class","mechanic","cdkOverlayOrigin","",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[4,"ngIf"],["cdkOverlayOrigin","",1,"mechanic",3,"mouseenter","mouseleave"],["trigger","cdkOverlayOrigin"],[1,"mechanic-icon"],[3,"src"],[1,"mechanic-name"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[1,"slormancer-tooltip"],[1,"inner-box"],[3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,dt,5,4,"div",0),2&t&&e.Q6J("ngIf",n.classMechanics.length>0||n.mechanics.length>0||n.buffs.length>0)},dependencies:[d.sg,d.O5,y.pI,y.xu],styles:[".mechanics[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;background-color:#000;padding:4px;gap:4px}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]   .mechanic-icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]   .mechanic-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:36px;min-height:36px;width:36px;height:36px}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]   .mechanic-name[_ngcontent-%COMP%]{background-color:#141310;padding:8px;display:flex;flex-direction:row;align-items:center;flex-grow:1}.slormancer-tooltip[_ngcontent-%COMP%]{max-width:350px}.slormancer-tooltip[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:8px 0;font-weight:400;color:#ce4607}.slormancer-tooltip[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.slormancer-tooltip[_ngcontent-%COMP%]     .value{color:#ce4607}"]}),a})();function ut(a,o){if(1&a&&e._UZ(0,"div",17),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.ancestralLegacy.genresLabel,e.oJD)}}function pt(a,o){if(1&a&&e._UZ(0,"div",18),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.ancestralLegacy.cooldownLabel,e.oJD)}}function mt(a,o){if(1&a&&e._UZ(0,"div",19),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.ancestralLegacy.costLabel,e.oJD)}}function _t(a,o){if(1&a&&(e.TgZ(0,"div")(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"div",6)(8,"img",7),e.qZA()(),e.TgZ(9,"div",8),e._UZ(10,"div",9),e.YNc(11,ut,1,1,"div",10),e.YNc(12,pt,1,1,"div",11),e._UZ(13,"div",12),e.YNc(14,mt,1,1,"div",13),e.qZA()(),e._UZ(15,"div",14)(16,"div",15)(17,"app-mechanics-view",16),e.qZA()()),2&a){const t=e.oxw();e.Gre("ancestral-legacy ",t.ancestralLegacy.damageTypes.length>0?t.ancestralLegacy.damageTypes[0]:"",""),e.xp6(2),e.Oqu(t.ancestralLegacy.name),e.xp6(6),e.Q6J("src",t.ancestralLegacy.icon,e.LSH),e.xp6(2),e.Q6J("innerHTML",t.ancestralLegacy.typeLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==t.ancestralLegacy.genresLabel),e.xp6(1),e.Q6J("ngIf",null!==t.ancestralLegacy.cooldownLabel),e.xp6(1),e.Q6J("innerHTML",t.ancestralLegacy.rankLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==t.ancestralLegacy.costLabel),e.xp6(2),e.Q6J("innerHTML",t.ancestralLegacy.description,e.oJD),e.xp6(1),e.Q6J("mechanics",t.ancestralLegacy.relatedMechanics)("buffs",t.ancestralLegacy.relatedBuffs)}}let D=(()=>{class a{constructor(t){this.slormancerTranslateService=t,this.NEXT_RANK_LABEL=this.slormancerTranslateService.translate("tt_next_rank"),this.MAX_RANK_LABEL=this.slormancerTranslateService.translate("tt_max_rank"),this.ancestralLegacy=null,this.hideNextRank=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(c.n6D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacy-view"]],inputs:{ancestralLegacy:"ancestralLegacy",hideNextRank:"hideNextRank"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head"],[1,"content"],[1,"info"],[1,"visual"],[1,"icon"],[1,"icon-border"],[3,"src"],[1,"data"],[1,"type",3,"innerHTML"],["class","genre",3,"innerHTML",4,"ngIf"],["class","cooldown",3,"innerHTML",4,"ngIf"],[1,"rank",3,"innerHTML"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"separator"],[1,"description",3,"innerHTML"],[3,"mechanics","buffs"],[1,"genre",3,"innerHTML"],[1,"cooldown",3,"innerHTML"],[1,"cost",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,_t,18,13,"div",0),2&t&&e.Q6J("ngIf",null!==n.ancestralLegacy)},dependencies:[d.O5,ae],styles:[".ancestral-legacy[_ngcontent-%COMP%]{background-color:#090909;border:3px solid black;color:#fff;display:flex;flex-direction:column;max-width:400px}.ancestral-legacy[_ngcontent-%COMP%]  .description .value{color:#ce4607}.ancestral-legacy[_ngcontent-%COMP%]  .next-rank .value, .ancestral-legacy[_ngcontent-%COMP%]  .head, .ancestral-legacy[_ngcontent-%COMP%]  .rank .current, .ancestral-legacy[_ngcontent-%COMP%]  .cooldown .value{color:#bb1fe2}.ancestral-legacy[_ngcontent-%COMP%]  .range, .ancestral-legacy[_ngcontent-%COMP%]  .range .value, .ancestral-legacy[_ngcontent-%COMP%]  .details, .ancestral-legacy[_ngcontent-%COMP%]  .details .value, .ancestral-legacy[_ngcontent-%COMP%]  .formula, .ancestral-legacy[_ngcontent-%COMP%]  .formula .value{color:#686868}.ancestral-legacy[_ngcontent-%COMP%]  .affixes .range, .ancestral-legacy[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.ancestral-legacy[_ngcontent-%COMP%]  .life{color:#257539}.ancestral-legacy[_ngcontent-%COMP%]  .mana{color:#3397dd}.ancestral-legacy.mag[_ngcontent-%COMP%]  .value:not(.mana){color:#bb1fe2}.ancestral-legacy[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:3px solid rgb(60,57,49)}.ancestral-legacy[_ngcontent-%COMP%]   .head.head[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.head[_ngcontent-%COMP%]{text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:10px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:10px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{display:flex;align-items:center}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border:3px solid rgb(190,135,31);min-width:60px;min-height:60px;width:60px;height:60px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black;image-rendering:pixelated;width:54px;height:54px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-transform:uppercase;height:100%;flex-grow:1;padding:5px 0;gap:5px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#3155bc}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]{display:flex;flex-direction:row}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{min-width:8px;padding-right:8px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;background-color:#ce4607;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}"]}),a})();function ht(a,o){if(1&a&&e._UZ(0,"app-ancestral-legacy-view",8),2&a){const t=e.oxw(3);e.Q6J("ancestralLegacy",t.ancestralLegacy)}}function ft(a,o){if(1&a&&e.YNc(0,ht,1,1,"ng-template",7),2&a){e.oxw();const t=e.MAs(1),n=e.oxw();e.Q6J("cdkConnectedOverlayOpen",n.showOverlay)("cdkConnectedOverlayOrigin",t)}}function Ct(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",1,2),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.increasesRank())})("contextmenu",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.decreasesRank())}),e.TgZ(2,"div",3),e._UZ(3,"img",4),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.YNc(6,ft,1,2,null,6),e.qZA()}if(2&a){const t=e.oxw();e.ekj("ranked",t.ancestralLegacy.rank>0)("equipped",t.equipped)("selected",t.selected)("readonly",t.readonly)("hidden-search",t.hiddenBySearch),e.xp6(3),e.Q6J("src",t.ancestralLegacy.icon,e.LSH),e.xp6(1),e.ekj("max",t.ancestralLegacy.rank===t.ancestralLegacy.maxRank),e.xp6(1),e.Oqu(t.ancestralLegacy.rank===t.ancestralLegacy.maxRank?"Max":t.ancestralLegacy.rank),e.xp6(1),e.Q6J("ngIf",t.showOverlay&&t.overlay)}}let ie=(()=>{class a extends O.B{constructor(t,n,i){super(),this.searchService=t,this.slormancerAncestralLegacyService=n,this.buildStorageService=i,this.ancestralLegacy=null,this.equipped=!1,this.selected=!1,this.readonly=!1,this.overlay=!1,this.changed=new e.vpe,this.showOverlay=!1,this.hiddenBySearch=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}ngOnInit(){this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.hiddenBySearch=null!==t&&null!==this.ancestralLegacy&&!this.searchService.ancestralLegacyMatchSearch(this.ancestralLegacy))}setRank(t,n){t.baseRank!==n&&this.selected&&(this.slormancerAncestralLegacyService.updateAncestralLegacyModel(t,n),this.slormancerAncestralLegacyService.updateAncestralLegacyView(t),this.buildStorageService.saveLayer())}increasesRank(){return null!==this.ancestralLegacy&&(this.setRank(this.ancestralLegacy,Math.max(0,this.ancestralLegacy.baseRank+1)),this.changed.emit(this.ancestralLegacy)),!1}decreasesRank(){return null!==this.ancestralLegacy&&(this.setRank(this.ancestralLegacy,Math.max(0,this.ancestralLegacy.baseRank-1)),this.changed.emit(this.ancestralLegacy)),!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(q.o),e.Y36(c.OXA),e.Y36(C.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacy-slot"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})},inputs:{ancestralLegacy:"ancestralLegacy",equipped:"equipped",selected:"selected",readonly:"readonly",overlay:"overlay"},outputs:{changed:"changed"},features:[e.qOj],decls:1,vars:1,consts:[["class","ancestral-legacy","cdkOverlayOrigin","",3,"ranked","equipped","selected","readonly","hidden-search","click","contextmenu",4,"ngIf"],["cdkOverlayOrigin","",1,"ancestral-legacy",3,"click","contextmenu"],["trigger","cdkOverlayOrigin"],[1,"inner"],[3,"src"],[1,"rank"],[4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"ancestralLegacy"]],template:function(t,n){1&t&&e.YNc(0,Ct,7,15,"div",0),2&t&&e.Q6J("ngIf",null!==n.ancestralLegacy)},dependencies:[d.O5,y.pI,y.xu,D],styles:[".ancestral-legacy[_ngcontent-%COMP%]{position:relative;z-index:1;border-radius:50%;border:1px solid transparent}.ancestral-legacy[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.ancestral-legacy.selected[_ngcontent-%COMP%]{border:1px solid rgb(132,30,6)}.ancestral-legacy.hidden-search[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.1}.ancestral-legacy.ranked.equipped[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{background-color:#d5ad48}.ancestral-legacy[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{position:absolute;background-color:#202020;padding:0 2px;bottom:0;right:0;font-size:4px;border-radius:4px}.ancestral-legacy[_ngcontent-%COMP%]   .rank.max[_ngcontent-%COMP%]{color:#edd371}.ancestral-legacy[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#202020;border:1px solid black;border-radius:50%;width:16px;height:16px}.ancestral-legacy[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid black;width:12px;height:12px;border-radius:50%;overflow:hidden}.ancestral-legacy.readonly[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{width:40px;height:40px;border-width:4px}.ancestral-legacy.readonly[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-width:0;width:34px;height:34px}.ancestral-legacy.readonly[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{font-size:10px}"]}),a})();function vt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-ancestral-legacy-slot",12),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectAncestralLegacy(i))}),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw().$implicit,i=e.oxw();e.Akn(n.iconStyle),e.Q6J("ancestralLegacy",i.getAncestralLegacy(t))("equipped",i.isAncestralLegacyEquipped(t))("selected",i.isNodeSelected(t))}}function Mt(a,o){if(1&a&&(e.TgZ(0,"div")(1,"div",10),e.YNc(2,vt,1,5,"app-ancestral-legacy-slot",11),e.qZA()()),2&a){const t=o.$implicit,n=e.oxw();e.Akn(t.style),e.MT6("zone absolute color-",t.color," size-",t.size,""),e.ekj("active",n.isRealmActive(t.realmId)),e.xp6(2),e.Q6J("ngForOf",t.ancestralLegacies)}}function bt(a,o){1&a&&e._UZ(0,"div",13),2&a&&e.Akn(o.$implicit.style)}function Ot(a,o){1&a&&e._UZ(0,"div",14),2&a&&e.Akn(o.$implicit.style)}function xt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.toggleNode(r.nodeId))}),e.TgZ(1,"div",16),e._UZ(2,"div",17),e.qZA()()}if(2&a){const t=o.$implicit,n=e.oxw();e.Akn(t.style),e.ekj("active",n.isNodeActive(t.nodeId))("first-active",n.isFirstNodeActive(t.nodeId))("available",n.isNodeAvailable(t.nodeId))("first-available",n.isFirstNodeAvailable())}}let yt=(()=>{class a extends O.B{constructor(t,n,i,r){super(),this.buildStorageService=t,this.slormancerDataService=n,this.slormancerCharacterModifierService=i,this.slormancerAncestralLegacyNodesService=r,this.selectedAncestralLegacy=null,this.selectedAncestralLegacyChange=new e.vpe,this.BOUNDS_X={min:-500,max:500},this.BOUNDS_Y={min:-500,max:500},this.availableNodes=[],this.activeRealms=[],this.weldingShapes=[],this.lineShapes=[],this.zoneShapes=[],this.nodeShapes=[],this.character=null,this.position={x:0,y:0},this.scale=1,this.grabbed=!1,this.drawMap()}onWheelUp(t){return this.scale=Math.max(1,Math.min(2,this.scale+(t.deltaY>0?-.2:.2))),!1}onMouseDown(){this.grabbed=!0}onMouseUp(){this.grabbed=!1}onMouseMouve(t){this.grabbed&&(this.position.x=Math.min(this.BOUNDS_X.max,Math.max(this.BOUNDS_X.min,this.position.x+t.movementX)),this.position.y=Math.min(this.BOUNDS_Y.max,Math.max(this.BOUNDS_Y.min,this.position.y+t.movementY)))}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>{this.character=null===t?null:t.character,this.updateMap()})}drawMap(){this.addLineShapes(5,-90,37,50),this.addZoneShapes((0,c.pb)(0,9),-72,75),this.addWeldinghapes(5,-90,67,16),this.addWeldinghapes(5,-54,72,8),this.addNodeShapes((0,c.pb)(0,9),-72,52),this.addNodeShapes((0,c.pb)(0,9).map(t=>10+2*t),-82.8,92),this.addNodeShapes((0,c.pb)(0,9).map(t=>11+2*t),-61.2,92),this.addZoneShapes((0,c.pb)(10,19),-54,112),this.addZoneShapes((0,c.pb)(20,29),-72,150,2),this.addLineShapes(10,-72,106,16),this.addNodeShapes((0,c.pb)(0,9).map(t=>31+3*t),-72,120),this.addNodeShapes((0,c.pb)(10,19).map(t=>3*t),-81,127),this.addNodeShapes((0,c.pb)(10,19).map(t=>2+3*t),-63,127),this.addZoneShapes((0,c.pb)(30,39),-90,173),this.addNodeShapes([60,63,65,68,70,73,75,78,80,83],-97,160),this.addNodeShapes((0,c.pb)(0,4).map(t=>61+5*t),-90,150),this.addNodeShapes([62,64,67,69,72,74,77,79,82,84],-83,160),this.addLineShapes(5,-90,140,10),this.addZoneShapes([41,45,49,53,57],-71,204),this.addZoneShapes([42,46,50,54,58],-37,204),this.addNodeShapes([87,89,92,94,97,99,102,104,107,109],-72,181),this.addZoneShapes((0,c.pb)(10,14).map(t=>4*t+3),-24.5,216),this.addNodeShapes([90,95,100,105,85],-22,194),this.addNodeShapes([115,121,127,133,139],-30.5,209),this.addZoneShapes((0,c.pb)(10,14).map(t=>4*t),360/70-88.5,216),this.addNodeShapes([86,91,96,101,106],360/70-91.5,194),this.addNodeShapes([112,118,124,130,136],360/70-82.5,209),this.addZoneShapes((0,c.pb)(60,64),-54,238,3),this.addNodeShapes([88,93,98,103,108],-54,198),this.addNodeShapes([154,142,145,148,151],-116.5,246),this.addNodeShapes([141,144,147,150,153],-54,279.5),this.addNodeShapes([140,143,146,149,152],-63.5,246),this.addZoneShapes((0,c.pb)(22,26).map(t=>3*t),-70,258,2),this.addNodeShapes([113,119,125,131,137],-70.5,228),this.addZoneShapes((0,c.pb)(22,26).map(t=>3*t+1),-38,258,2),this.addNodeShapes([114,120,126,132,138],-37.5,228),this.addNodeShapes([157,168,178,190,201],-104.5,277),this.addNodeShapes([155,166,177,188,199],-109.5,290),this.addNodeShapes([163,174,185,196,207],-75.5,277),this.addNodeShapes([165,176,187,198,209],-69.8,289),this.addZoneShapes([65,68,71,74,77],-90,256),this.addZoneShapes([83,86,89,92,80],-28,293),this.addZoneShapes([82,85,88,91,94],360/70-85,293),this.addLineShapes(5,-100,252,37),this.addWeldinghapes(5,-99.7,234.2,1.5),this.addLineShapes(5,-80,252,37),this.addWeldinghapes(5,-80.3,234.2,1.5),this.addNodeShapes([110,116,122,128,134],-93,236),this.addNodeShapes([111,117,123,129,135],-87,236),this.addNodeShapes([158,169,180,191,202],-100,270),this.addNodeShapes([162,173,183,195,206],-80,266),this.addZoneShapes([96,99,102,105,108],-54,310,2),this.addZoneShapes([95,98,101,104,107],-70,320,2),this.addNodeShapes([164,175,186,197,208],-75,304),this.addZoneShapes([97,100,103,106,109],-38,320,2),this.addNodeShapes([167,179,189,200,156],-32.5,304),this.addZoneShapes([81,84,87,90,93],-90,304,1),this.addNodeShapes([160,171,182,193,204],-90,280),this.addNodeShapes([161,172,184,194,205],-85,300),this.addNodeShapes([159,170,181,192,203],-95,300),this.addZoneShapes([110,111,112,113,114],-90,361,2),this.addNodeShapes([210,220,230,240,250],-90,329),this.addZoneShapes([117,122,127,132,137],-54,370,1),this.addNodeShapes([215,225,235,245,255],-54,343),this.addZoneShapes([118,123,128,133,138],-43,370,1),this.addNodeShapes([216,226,236,246,256],-47,370),this.addNodeShapes([217,227,237,247,257],-41,348),this.addZoneShapes([116,121,126,131,136],-65,370,1),this.addNodeShapes([214,224,234,244,254],-61,370),this.addNodeShapes([213,223,233,243,253],-67,348),this.addZoneShapes([119,124,129,134,139],-33,370,1),this.addNodeShapes([218,228,238,248,258],-35,347),this.addNodeShapes([219,229,239,249,259],-29,370),this.addZoneShapes([115,120,125,130,135],-75,370,1),this.addNodeShapes([212,222,232,242,252],-73,347),this.addNodeShapes([211,221,231,241,251],-79,370),this.addLineShapes(5,-49.5,354,47,45),this.addWeldinghapes(5,-52.1,337,1.5),this.addLineShapes(5,85.5,354,47,-45),this.addWeldinghapes(5,88.1,337,1.5),this.addLineShapes(5,-11,343.1,66,45),this.addWeldinghapes(5,-15,320,2),this.addLineShapes(5,-25,343.1,66,-45),this.addWeldinghapes(5,-21,320,2)}updateMap(){this.availableNodes=[],this.activeRealms=[],null!==this.character&&(this.availableNodes=this.slormancerAncestralLegacyNodesService.getAvailableEmptyNodes(this.character),this.activeRealms=this.slormancerAncestralLegacyNodesService.getActiveRealms(this.character).map(t=>t.realm))}isNodeActive(t){return null!==this.character&&-1!==this.character.ancestralLegacies.activeNodes.indexOf(t)}isFirstNodeActive(t){return null!==this.character&&this.character.ancestralLegacies.activeFirstNode===t}isRealmActive(t){return-1!==this.activeRealms.indexOf(t)}isNodeAvailable(t){return-1!==this.availableNodes.indexOf(t)}isFirstNodeAvailable(){return null!==this.character&&null===this.character.ancestralLegacies.activeFirstNode}isNodeSelected(t){return null!==this.selectedAncestralLegacy&&this.selectedAncestralLegacy.id===t}isAncestralLegacyEquipped(t){return null!==this.character&&-1!==this.character.ancestralLegacies.activeAncestralLegacies.indexOf(t)}getAncestralLegacy(t){let n=null;return null!==this.character&&(n=(0,c.lA$)(this.character.ancestralLegacies.ancestralLegacies.find(i=>i.id==t))),n}toggleNode(t){if(null!==this.character){let n=!1;n=this.slormancerCharacterModifierService.toggleAncestralLegacyNode(this.character,t),this.buildStorageService.saveLayer(),n&&this.updateMap()}}selectAncestralLegacy(t){console.log(t),this.selectedAncestralLegacyChange.emit(t)}addLineShapes(t,n,i,r,s=0){const g=360/t;this.lineShapes.push(...(0,c.pb)(t).map(p=>({style:{width:r+"px",transform:"translate(-50%, -50%) rotate("+(n+p*g)+"deg) translateX("+i+"px) rotate("+s+"deg)"}})))}addWeldinghapes(t,n,i,r){const s=360/t;this.weldingShapes.push(...(0,c.pb)(t).map(g=>({style:{width:r+"px",transform:"translate(-50%, -50%) rotate("+(n+g*s)+"deg) translateX("+i+"px)"}})))}addZoneShapes(t,n,i,r=1){const s=360/t.length;this.zoneShapes.push(...t.map((g,p)=>{const m=this.slormancerDataService.getAncestralRealmColor(g),f=this.slormancerAncestralLegacyNodesService.getAncestralLegacyIdsFromRealm(g),P=n+p*s;return{style:{transform:"translate(-50%, -50%) rotate("+P+"deg) translateX("+i+"px)"},iconStyle:{transform:"rotate("+-P+"deg)"},size:r,realmId:g,ancestralLegacies:f,color:m}}))}addNodeShapes(t,n,i){const r=t.length,s=360/r;this.nodeShapes.push(...(0,c.pb)(r).map(g=>({style:{transform:"translate(-50%, -50%) rotate("+(n+g*s)+"deg) translateX("+i+"px)"},nodeId:(0,c.BeF)(t[g],0)})))}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x),e.Y36(c.ogB),e.Y36(c.Y5A),e.Y36(c.IB_))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacy-map"]],hostBindings:function(t,n){1&t&&e.NdJ("wheel",function(r){return n.onWheelUp(r)})("mousedown",function(){return n.onMouseDown()})("mouseup",function(){return n.onMouseUp()})("mouseleave",function(){return n.onMouseUp()})("mousemove",function(r){return n.onMouseMouve(r)})},inputs:{selectedAncestralLegacy:"selectedAncestralLegacy"},outputs:{selectedAncestralLegacyChange:"selectedAncestralLegacyChange"},features:[e.qOj],decls:10,vars:12,consts:[[1,"frame"],[1,"center"],[1,"initial","absolute"],[1,"initial-outer-circle"],[1,"initial-inner-circle"],[1,"initial-point"],[3,"class","style","active",4,"ngFor","ngForOf"],["class","branch absolute",3,"style",4,"ngFor","ngForOf"],["class","welding absolute",3,"style",4,"ngFor","ngForOf"],["class","node absolute",3,"style","active","first-active","available","first-available","click",4,"ngFor","ngForOf"],[1,"zone-inner"],[3,"style","ancestralLegacy","equipped","selected","changed",4,"ngFor","ngForOf"],[3,"ancestralLegacy","equipped","selected","changed"],[1,"branch","absolute"],[1,"welding","absolute"],[1,"node","absolute",3,"click"],[1,"node-inner"],[1,"node-preview"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"div",5),e.qZA()()(),e.YNc(6,Mt,3,9,"div",6),e.YNc(7,bt,1,2,"div",7),e.YNc(8,Ot,1,2,"div",8),e.YNc(9,xt,3,10,"div",9),e.qZA()()),2&t&&(e.ekj("grabbed",n.grabbed),e.xp6(1),e.Udp("top",n.position.y+"px")("left",n.position.x+"px")("transform","scale("+n.scale+")"),e.xp6(5),e.Q6J("ngForOf",n.zoneShapes),e.xp6(1),e.Q6J("ngForOf",n.lineShapes),e.xp6(1),e.Q6J("ngForOf",n.weldingShapes),e.xp6(1),e.Q6J("ngForOf",n.nodeShapes))},dependencies:[d.sg,ie],styles:[".frame[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid #353535;background-color:#202020;box-sizing:border-box;position:relative;overflow:hidden;width:100%;height:100%;cursor:grab;-webkit-user-select:none;user-select:none}.frame.grabbed[_ngcontent-%COMP%]{cursor:grabbing}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{position:relative;overflow:visible;width:0;height:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .absolute[_ngcontent-%COMP%]{transform:translate(-50%,-50%);position:absolute;top:0;left:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;pointer-events:none;width:24px;height:24px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:20px;height:20px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:6px;height:6px;border:1px solid rgb(213,173,72);border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]   .initial-point[_ngcontent-%COMP%]{background-color:#d5ad48;width:2px;height:2px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .branch[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:4px;border:1px solid black;border-left:0;border-right:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .welding[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:2px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:48px;height:48px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;background-color:#0e0e0e;border:1px solid black;width:42px;height:42px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-0.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #f9501c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-1.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #cecece}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-2.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #81a9ed}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-3.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #bfab5c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-4.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #8b0eab}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-5.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #673e17}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-2[_ngcontent-%COMP%]{width:62px;height:62px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-2[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{width:56px;height:56px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-3[_ngcontent-%COMP%]{width:82px;height:82px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-3[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{width:76px;height:76px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:12px;height:12px;border-radius:50%;cursor:pointer}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#0e0e0e;border:1px solid black;width:8px;height:8px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.available[_ngcontent-%COMP%]:not(.active):not(.first-active){background-color:#d5ad48}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.active[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#c13907}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.first-active[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#27cbae}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-preview[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]:not(.active):hover.available   .node-preview[_ngcontent-%COMP%]{background-color:#c1390799}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]:not(.active):hover.first-available:not(.available)   .node-preview[_ngcontent-%COMP%]{background-color:#27cbae99}"]}),a})();function Pt(a,o){if(1&a&&(e.TgZ(0,"div",4),e._UZ(1,"div",13),e.qZA()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.ekj("used",n.isStoneUsed(t))}}function St(a,o){if(1&a&&(e.TgZ(0,"div",14),e._uU(1),e.TgZ(2,"span",15),e._uU(3),e.qZA(),e._UZ(4,"img",16),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.MIGHT_MESSAGE," : "),e.xp6(2),e.Oqu(t.character.might.ancestral)}}let kt=(()=>{class a extends O.B{constructor(t,n,i){super(),this.buildStorageService=t,this.slormancerAncestralLegacyService=n,this.slormancerTranslateService=i,this.ANCESTRAL_LEGACY_POINTS=(0,c.pb)(c.JYy),this.character=null,this.selectedAncestralLegacy=null,this.MIGHT_MESSAGE=this.slormancerTranslateService.translate("bonus_elemental_damage")}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>{this.character=null===t?null:t.character,this.selectDefaultAncestralLegacy()})}selectDefaultAncestralLegacy(){if(this.selectedAncestralLegacy=null,null!==this.character){if(this.character.ancestralLegacies.activeAncestralLegacies.length>0){const t=(0,c.lA$)(this.character.ancestralLegacies.activeAncestralLegacies[0]);this.selectedAncestralLegacy=null===t?null:(0,c.lA$)(this.character.ancestralLegacies.ancestralLegacies[t])}null===this.selectedAncestralLegacy&&(this.selectedAncestralLegacy=(0,c.lA$)(this.character.ancestralLegacies.ancestralLegacies[0]))}}optimizeAncestralLegacies(){if(null!==this.character){for(const t of this.character.ancestralLegacies.ancestralLegacies)t.baseRank=t.baseMaxRank,this.slormancerAncestralLegacyService.updateAncestralLegacyModel(t,t.baseMaxRank,t.bonusRank,t.forcedRank),this.slormancerAncestralLegacyService.updateAncestralLegacyView(t);this.buildStorageService.saveLayer()}}isStoneUsed(t){return c.JYy-t<=(null===this.character?0:this.character.ancestralLegacies.activeNodes.length)}isAncestralStoneUsed(){return null!==this.character&&null!==this.character.ancestralLegacies.activeFirstNode}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x),e.Y36(c.OXA),e.Y36(c.n6D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacies"]],features:[e.qOj],decls:16,vars:6,consts:[[1,"actions"],[1,"info"],[1,"avaialble-points"],["class","stone-border",4,"ngFor","ngForOf"],[1,"stone-border"],[1,"stone","ancestral"],["class","might",4,"ngIf"],["matTooltip","Set all ancestral legacies to max rank",3,"click"],[1,"content"],[1,"map"],[3,"selectedAncestralLegacy","selectedAncestralLegacyChange"],[1,"selected"],[3,"ancestralLegacy"],[1,"stone"],[1,"might"],[1,"value"],["src","assets/img/icon/stat/magical.png"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"div",1)(4,"div",2),e.YNc(5,Pt,2,2,"div",3),e.TgZ(6,"div",4),e._UZ(7,"div",5),e.qZA()(),e.YNc(8,St,5,2,"div",6),e.qZA(),e.TgZ(9,"mat-icon",7),e.NdJ("click",function(){return n.optimizeAncestralLegacies()}),e._uU(10,"vertical_align_top"),e.qZA()(),e.TgZ(11,"div",8)(12,"div",9)(13,"app-ancestral-legacy-map",10),e.NdJ("selectedAncestralLegacyChange",function(r){return n.selectedAncestralLegacy=r}),e.qZA()(),e.TgZ(14,"div",11),e._UZ(15,"app-ancestral-legacy-view",12),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",n.ANCESTRAL_LEGACY_POINTS),e.xp6(2),e.ekj("used",n.isAncestralStoneUsed()),e.xp6(1),e.Q6J("ngIf",null!==n.character),e.xp6(5),e.Q6J("selectedAncestralLegacy",n.selectedAncestralLegacy),e.xp6(2),e.Q6J("ancestralLegacy",n.selectedAncestralLegacy))},dependencies:[d.sg,d.O5,T.Hw,x.a8,x.dn,Z.gM,D,yt],styles:["[_nghost-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]{height:100%}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:16px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:16px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{align-items:flex-start}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:16px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{align-items:flex-start}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .stone-border[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:2px solid black;width:26px;min-width:26px;height:26px;min-height:26px;border-radius:50%;background-color:#505050}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .stone-border[_ngcontent-%COMP%]   .stone[_ngcontent-%COMP%]{border:2px solid black;width:18px;height:18px;border-radius:50%;background-color:#ce4607}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .stone-border[_ngcontent-%COMP%]   .stone.ancestral[_ngcontent-%COMP%]{background-color:#46e7b0}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .stone-border[_ngcontent-%COMP%]   .stone.used[_ngcontent-%COMP%]{background-color:#202020}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .might[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:4px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .might[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#ce4607}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .might[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px;image-rendering:pixelated}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#353535}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:16px;flex-grow:1}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-direction:column}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;flex-grow:1}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   app-ancestral-legacy-map[_ngcontent-%COMP%]{height:100%}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   app-ancestral-legacy-map[_ngcontent-%COMP%]{height:550px}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;overflow-y:auto;min-height:500px;min-width:350px;width:350px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{min-width:unset;width:auto}}"]}),a})();function Tt(a,o){if(1&a&&e._UZ(0,"div",7),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.attributeTraits.summary,e.oJD)}}function wt(a,o){if(1&a&&(e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5),e._uU(8),e.qZA(),e.YNc(9,Tt,1,1,"div",6),e.qZA()()),2&a){const t=e.oxw();e.Gre("trait attribute-",t.attributeTraits.attribute,""),e.xp6(3),e.Oqu(t.attributeTraits.attributeName),e.xp6(2),e.Oqu(t.attributeTraits.title),e.xp6(3),e.Oqu(t.attributeTraits.recapLabel),e.xp6(1),e.Q6J("ngIf",null!==t.attributeTraits.summary)}}let Zt=(()=>{class a{constructor(){this.attributeTraits=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attribute-summary-view"]],inputs:{attributeTraits:"attributeTraits"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head"],[1,"attribute"],[1,"subtitle"],[1,"content"],[1,"info"],["class","description",3,"innerHTML",4,"ngIf"],[1,"description",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,wt,10,7,"div",0),2&t&&e.Q6J("ngIf",null!==n.attributeTraits)},dependencies:[d.O5],styles:[".trait[_ngcontent-%COMP%]{background-color:#151412;border:3px solid black;color:#fff;display:flex;flex-direction:column;gap:5px;min-width:250px}.trait.attribute-0[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]     .value{color:#2f5996}.trait.attribute-1[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]     .value{color:#a83007}.trait.attribute-2[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]     .value{color:#79b549}.trait.attribute-3[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]     .value{color:#d0b545}.trait.attribute-4[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]     .value{color:#4bc1b2}.trait.attribute-5[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]     .value{color:#753098}.trait.attribute-6[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]     .value{color:#cd7028}.trait.attribute-7[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]     .value{color:#bf3c59}.trait[_ngcontent-%COMP%]  .locked{color:#686868}.trait[_ngcontent-%COMP%]  .range, .trait[_ngcontent-%COMP%]  .range .value, .trait[_ngcontent-%COMP%]  .details, .trait[_ngcontent-%COMP%]  .details .value, .trait[_ngcontent-%COMP%]  .formula, .trait[_ngcontent-%COMP%]  .formula .value, .trait[_ngcontent-%COMP%]  .max, .trait[_ngcontent-%COMP%]  .max .value{color:#686868}.trait[_ngcontent-%COMP%]  .affixes .range, .trait[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:3px solid rgb(60,57,49)}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-transform:uppercase;padding:10px;gap:2px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]{font-size:19px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:14px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px 10px;gap:20px;text-align:center}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}"]}),a})();function At(a,o){if(1&a&&e._UZ(0,"div",9),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.trait.cumulativeStats,e.oJD)}}function qt(a,o){if(1&a&&e._UZ(0,"div",9),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.trait.description,e.oJD)}}function It(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"div",10)(2,"div",11),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("innerHTML",t.trait.unlockLabel,e.oJD)}}function Lt(a,o){if(1&a&&(e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3)(5,"span",4),e._uU(6),e.qZA(),e._uU(7," - "),e.TgZ(8,"span",5),e._uU(9),e.qZA()()(),e.TgZ(10,"div",6),e.YNc(11,At,1,1,"div",7),e.YNc(12,qt,1,1,"div",7),e.YNc(13,It,3,1,"ng-container",8),e.qZA()()),2&a){const t=e.oxw();e.Gre("trait attribute-",t.trait.attribute,""),e.xp6(3),e.Oqu(t.trait.attributeName),e.xp6(3),e.Oqu(t.trait.rankLabel),e.xp6(3),e.Oqu(t.trait.traitLevelLabel),e.xp6(2),e.Q6J("ngIf",null!==t.trait.cumulativeStats),e.xp6(1),e.Q6J("ngIf",null!==t.trait.description),e.xp6(1),e.Q6J("ngIf",null!==t.trait.unlockLabel)}}let Ut=(()=>{class a{constructor(){this.trait=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-trait-view"]],inputs:{trait:"trait"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head"],[1,"attribute"],[1,"subtitle"],[1,"rank"],[1,"level"],[1,"content"],["class","description",3,"innerHTML",4,"ngIf"],[4,"ngIf"],[1,"description",3,"innerHTML"],[1,"separator"],[1,"unlock",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,Lt,14,9,"div",0),2&t&&e.Q6J("ngIf",null!==n.trait)},dependencies:[d.O5],styles:[".trait[_ngcontent-%COMP%]{background-color:#151412;border:3px solid black;color:#fff;display:flex;flex-direction:column;gap:5px;min-width:250px}.trait.attribute-0[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]     .value{color:#2f5996}.trait.attribute-1[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]     .value{color:#a83007}.trait.attribute-2[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]     .value{color:#79b549}.trait.attribute-3[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]     .value{color:#d0b545}.trait.attribute-4[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]     .value{color:#4bc1b2}.trait.attribute-5[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]     .value{color:#753098}.trait.attribute-6[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]     .value{color:#cd7028}.trait.attribute-7[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]     .value{color:#bf3c59}.trait[_ngcontent-%COMP%]  .range, .trait[_ngcontent-%COMP%]  .range .value, .trait[_ngcontent-%COMP%]  .details, .trait[_ngcontent-%COMP%]  .details .value, .trait[_ngcontent-%COMP%]  .formula, .trait[_ngcontent-%COMP%]  .formula .value{color:#686868}.trait[_ngcontent-%COMP%]  .affixes .range, .trait[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:3px solid rgb(60,57,49)}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-transform:uppercase;padding:10px;gap:2px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]{font-size:19px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:14px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px 10px;gap:20px;text-align:center}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}"]}),a})();function Nt(a,o){1&a&&e._UZ(0,"div",7)}function Jt(a,o){if(1&a&&e._UZ(0,"app-trait-view",9),2&a){const t=e.oxw(3);e.Q6J("trait",t.trait)}}function Et(a,o){if(1&a&&e.YNc(0,Jt,1,1,"ng-template",8),2&a){e.oxw();const t=e.MAs(1),n=e.oxw();e.Q6J("cdkConnectedOverlayOpen",n.isMouseOver)("cdkConnectedOverlayOrigin",t)}}function Rt(a,o){if(1&a&&(e.TgZ(0,"div",1,2),e.YNc(2,Nt,1,0,"div",3),e.TgZ(3,"div",4),e._UZ(4,"div",5),e.qZA(),e.YNc(5,Et,1,2,null,6),e.qZA()),2&a){const t=e.oxw();e.Gre("trait attribute-",t.trait.attribute,""),e.ekj("first",t.first)("last",t.last)("minor",t.isMinor(t.trait))("major",t.isMajor(t.trait))("greater",t.isGreater(t.trait))("active",t.unlocked)("bonus",t.bonus)("highlight",t.highlight)("hidden-by-search",t.isHiddenBySearch),e.xp6(2),e.Q6J("ngIf",t.trait.additive),e.xp6(3),e.Q6J("ngIf",t.isMouseOver)}}let Bt=(()=>{class a extends O.B{constructor(t){super(),this.searchService=t,this.trait=null,this.first=!1,this.last=!1,this.highlight=!1,this.unlocked=!1,this.bonus=!1,this.isMouseOver=!1,this.isHiddenBySearch=!1}onMouseEnter(){this.isMouseOver=!0}onMouseLeave(){this.isMouseOver=!1}ngOnInit(){this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(()=>this.isHiddenBySearch=null!==this.trait&&!this.searchService.traitMatchSearch(this.trait))}isMinor(t){return t.traitLevel===c.y$Z.Minor}isMajor(t){return t.traitLevel===c.y$Z.Major}isGreater(t){return t.traitLevel===c.y$Z.Greater}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(q.o))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-trait"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},inputs:{trait:"trait",first:"first",last:"last",highlight:"highlight",unlocked:"unlocked",bonus:"bonus"},features:[e.qOj],decls:1,vars:1,consts:[["cdkOverlayOrigin","",3,"class","first","last","minor","major","greater","active","bonus","highlight","hidden-by-search",4,"ngIf"],["cdkOverlayOrigin",""],["trigger","cdkOverlayOrigin"],["class","additive",4,"ngIf"],[1,"content"],[1,"node"],[4,"ngIf"],[1,"additive"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"trait"]],template:function(t,n){1&t&&e.YNc(0,Rt,6,23,"div",0),2&t&&e.Q6J("ngIf",null!==n.trait)},dependencies:[d.O5,y.pI,y.xu,Ut],styles:[".trait[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;position:relative;height:54px;width:8px;overflow:hidden;cursor:pointer}.trait.hidden-by-search[_ngcontent-%COMP%]{opacity:.2}.trait[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{position:absolute;width:4px;height:36px;left:4px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;border:4px solid black;background-color:#353535;overflow:hidden;border-left-width:0;border-right-width:0;height:30px;z-index:1}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{border:2px solid black;background-color:#202020;height:14px}.trait.attribute-0.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#2f5996}.trait.attribute-0.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#2f59964d}.trait.attribute-1.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#a83007}.trait.attribute-1.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#a830074d}.trait.attribute-2.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#79b549}.trait.attribute-2.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#79b5494d}.trait.attribute-3.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#d0b545}.trait.attribute-3.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#d0b5454d}.trait.attribute-4.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#4bc1b2}.trait.attribute-4.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#4bc1b24d}.trait.attribute-5.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#753098}.trait.attribute-5.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#7530984d}.trait.attribute-6.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#cd7028}.trait.attribute-6.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#cd70284d}.trait.attribute-7.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#bf3c59}.trait.attribute-7.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#bf3c594d}.trait.bonus[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#61f18f}.trait.bonus.highlight[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#61f18f4d}.trait[_ngcontent-%COMP%]:not(.greater)   .content[_ngcontent-%COMP%]{border-left-width:2px;border-right-width:2px}.trait.minor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-left-width:0;border-right-width:0}.trait.minor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{width:8px}.trait.minor.first[_ngcontent-%COMP%]{width:10px}.trait.minor.first[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{border-left-width:4px;width:10px}.trait.major[_ngcontent-%COMP%]{width:12px}.trait.major[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-left-width:0;border-right-width:0}.trait.major[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{width:12px}.trait.greater[_ngcontent-%COMP%]{width:16px;position:relative}.trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:absolute;transform:rotate(45deg);border-width:4px;height:36px;width:36px;left:-10px}.trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{border-width:2px;width:14px;height:14px}.trait.greater[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{left:6px;height:54px}.trait.greater.last[_ngcontent-%COMP%]{width:32px}"]}),a})();function Qt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-trait",9),e.NdJ("mouseenter",function(){const r=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.nodeEnter(r))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.nodeLeave())})("click",function(){const r=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.nodeClick(r))}),e.qZA()}if(2&a){const t=o.$implicit,n=o.index,i=e.oxw(2);e.Q6J("trait",t)("first",0===n)("last",n===i.attribute.traits.length-1)("highlight",i.isHighlight(n))("bonus",i.isBonus(n))("unlocked",i.isUnlocked(n))}}function Ft(a,o){if(1&a&&e._UZ(0,"app-attribute-summary-view",10),2&a){const t=e.oxw(2);e.Q6J("attributeTraits",t.attribute)}}function Ht(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.addPoint(i))}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.remainingPoints<=0||t.attribute.baseRank===t.MAX_RANK)}}function Yt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.removePoint(i))}),e.TgZ(1,"mat-icon"),e._uU(2,"remove"),e.qZA()()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.attribute.baseRank<=0)}}function Dt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",1,2)(2,"img",3),e.NdJ("mouseenter",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSummary=!0)})("mouseleave",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSummary=!1)}),e.qZA(),e.TgZ(3,"div",4),e.NdJ("mouseenter",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.nodeEnter(-1))})("mouseleave",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.nodeLeave())})("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.nodeClick(0))}),e.qZA(),e.YNc(4,Qt,1,6,"app-trait",5),e.TgZ(5,"div",6),e._uU(6),e.qZA(),e.YNc(7,Ft,1,1,"ng-template",7),e.YNc(8,Ht,3,1,"button",8),e.YNc(9,Yt,3,1,"button",8),e.qZA()}if(2&a){const t=e.MAs(1),n=e.oxw();e.Gre("bar attribute-",n.attribute.attribute,""),e.ekj("icon-shift",n.iconShift)("readonly",n.readonly)("short",n.short),e.xp6(2),e.Q6J("src",n.attribute.icon,e.LSH),e.xp6(2),e.Q6J("ngForOf",n.attribute.traits)("ngForTrackBy",n.trackByTrait),e.xp6(2),e.AsE(" +",n.attribute.rank," ",n.attribute.attributeName," "),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",n.showSummary)("cdkConnectedOverlayOrigin",t),e.xp6(1),e.Q6J("ngIf",!n.readonly),e.xp6(1),e.Q6J("ngIf",!n.readonly)}}let oe=(()=>{class a{constructor(t,n){this.slormancerAttributeService=t,this.buildStorageService=n,this.MAX_RANK=75,this.attribute=null,this.remainingPoints=0,this.iconShift=!1,this.short=!1,this.readonly=!1,this.unlockedRange={min:0,max:0},this.highlightRange={min:0,max:0},this.bonusRange={min:0,max:0},this.cappedCursor=0,this.showSummary=!1,this.cursorIndex=null}ngOnInit(){this.updateCursor()}ngOnChanges(){this.updateCursor()}updateCursor(){null!==this.attribute&&(null===this.cursorIndex?(this.cappedCursor=this.attribute.baseRank,this.highlightRange={min:0,max:0},this.unlockedRange={min:0,max:this.attribute.baseRank},this.bonusRange={min:this.attribute.baseRank,max:this.attribute.baseRank+this.attribute.bonusRank}):(this.cappedCursor=Math.min(this.attribute.baseRank+this.remainingPoints,this.cursorIndex+1),this.bonusRange={min:Math.max(this.cappedCursor,this.attribute.baseRank),max:this.attribute.baseRank+this.attribute.bonusRank},this.highlightRange=this.cursorIndex<this.attribute.baseRank?{min:this.cursorIndex+1,max:Math.max(this.attribute.baseRank,this.cursorIndex+1)}:{min:this.attribute.baseRank,max:this.cappedCursor}))}nodeEnter(t){this.cursorIndex=t,this.updateCursor()}nodeLeave(){this.cursorIndex=null,this.updateCursor()}setRank(t){null!==this.attribute&&this.attribute.baseRank!==t&&!this.readonly&&(this.attribute.baseRank=t,this.slormancerAttributeService.updateAttributeTraits(this.attribute),this.buildStorageService.saveLayer(),this.updateCursor())}nodeClick(t){null!==this.attribute&&(this.setRank(this.cappedCursor),console.log(this.attribute.traits[t]))}isUnlocked(t){return t>=this.unlockedRange.min&&t<this.unlockedRange.max}isHighlight(t){return t>=this.highlightRange.min&&t<this.highlightRange.max}isBonus(t){return t>=this.bonusRange.min&&t<this.bonusRange.max}addPoint(t){if(null!==this.attribute&&this.remainingPoints>0){let n=Math.min(this.remainingPoints,this.MAX_RANK-this.attribute.baseRank);this.setRank(this.attribute.baseRank+Math.min(n,t.shiftKey?10:1))}}removePoint(t){null!==this.attribute&&this.attribute.baseRank>0&&this.setRank(this.attribute.baseRank-Math.min(this.attribute.baseRank,t.shiftKey?10:1))}trackByTrait(t,n){return t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(c.Qup),e.Y36(C.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attribute-line"]],inputs:{attribute:"attribute",remainingPoints:"remainingPoints",iconShift:"iconShift",short:"short",readonly:"readonly"},features:[e.TTD],decls:1,vars:1,consts:[["cdkOverlayOrigin","",3,"class","icon-shift","readonly","short",4,"ngIf"],["cdkOverlayOrigin",""],["trigger","cdkOverlayOrigin"],[3,"src","mouseenter","mouseleave"],[1,"pre-bar",3,"mouseenter","mouseleave","click"],[3,"trait","first","last","highlight","bonus","unlocked","mouseenter","mouseleave","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"total"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],["mat-icon-button","","color","primary",3,"disabled","click",4,"ngIf"],[3,"trait","first","last","highlight","bonus","unlocked","mouseenter","mouseleave","click"],[3,"attributeTraits"],["mat-icon-button","","color","primary",3,"disabled","click"]],template:function(t,n){1&t&&e.YNc(0,Dt,10,18,"div",0),2&t&&e.Q6J("ngIf",null!==n.attribute)},dependencies:[d.sg,d.O5,S.lW,T.Hw,y.pI,y.xu,Zt,Bt],styles:['.bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:4px 0;position:relative;height:60px}.bar.icon-shift[_ngcontent-%COMP%]{margin-left:16px}.bar[_ngcontent-%COMP%]:before{content:" ";position:absolute;background-color:#353535;border:4px solid black;transform:rotate(45deg);width:38px;height:38px}.bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{z-index:2;padding-left:1px}.bar[_ngcontent-%COMP%]   .pre-bar[_ngcontent-%COMP%]{background-color:#353535;border:4px solid black;margin-left:-6px;border-left:0;border-right:0;min-width:20px;width:20px;height:30px;z-index:1}.bar[_ngcontent-%COMP%]:not(.readonly)   .pre-bar[_ngcontent-%COMP%]{cursor:pointer}.bar[_ngcontent-%COMP%]:not(.icon-shift)   .pre-bar[_ngcontent-%COMP%]{width:36px}.bar[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:none;background-color:#353535;border:4px solid black;font-weight:700;border-left:0;width:130px;height:30px}.bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.bar.short[_ngcontent-%COMP%]   app-trait[_ngcontent-%COMP%]{display:none}.bar.short[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}@media (max-width: 768px){.bar[_ngcontent-%COMP%]   app-trait[_ngcontent-%COMP%]{display:none}.bar[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}}.bar.attribute-0[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#2f5996}.bar.attribute-1[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#a83007}.bar.attribute-2[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#79b549}.bar.attribute-3[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#d0b545}.bar.attribute-4[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#4bc1b2}.bar.attribute-5[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#753098}.bar.attribute-6[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#cd7028}.bar.attribute-7[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#bf3c59}']}),a})();function Vt(a,o){if(1&a&&e._UZ(0,"app-attribute-line",2),2&a){const t=o.$implicit,n=e.oxw(2);e.Q6J("iconShift",t%2==0)("attribute",n.attributes.allocated[t])("remainingPoints",n.attributes.remainingPoints)}}function jt(a,o){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"p"),e._uU(3),e.qZA(),e.YNc(4,Vt,1,3,"app-attribute-line",1),e.qZA()()),2&a){const t=e.oxw();e.xp6(3),e.AsE("",t.attributes.remainingPoints,"/",t.attributes.maxPoints," Points to spend"),e.xp6(1),e.Q6J("ngForOf",t.ALL_ATTRIBUTES)}}let Gt=(()=>{class a extends O.B{constructor(t){super(),this.buildStorageService=t,this.ALL_ATTRIBUTES=c.AFD,this.attributes=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.attributes=null===t?null:t.character.attributes)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attributes"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"iconShift","attribute","remainingPoints",4,"ngFor","ngForOf"],[3,"iconShift","attribute","remainingPoints"]],template:function(t,n){1&t&&e.YNc(0,jt,5,3,"mat-card",0),2&t&&e.Q6J("ngIf",null!==n.attributes)},dependencies:[d.sg,d.O5,x.a8,x.dn,oe],styles:["[_nghost-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]{height:100%}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:4px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c84407}"]}),a})(),Kt=(()=>{class a{constructor(){this.character=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-defense-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(t,n){1&t&&e._uU(0,"TODO")}}),a})(),Xt=(()=>{class a{constructor(){this.character=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-turret-syndrome-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(t,n){1&t&&e._uU(0,"TODO TURRET")}}),a})();function $t(a,o){if(1&a&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function zt(a,o){1&a&&(e.TgZ(0,"p"),e._uU(1,"Choose a calc tu display"),e.qZA())}function Wt(a,o){if(1&a&&e._UZ(0,"app-defense-calc",6),2&a){const t=e.oxw(2);e.Q6J("character",t.character)}}function en(a,o){if(1&a&&e._UZ(0,"app-turret-syndrome-calc",6),2&a){const t=e.oxw(2);e.Q6J("character",t.character)}}function tn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"main")(1,"mat-card")(2,"mat-card-content")(3,"mat-form-field",1)(4,"mat-label"),e._uU(5,"Selected calc"),e.qZA(),e.TgZ(6,"mat-select",2),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.currentCalc=i)}),e.YNc(7,$t,2,2,"mat-option",3),e.qZA()(),e.YNc(8,zt,2,0,"p",0),e.YNc(9,Wt,1,1,"app-defense-calc",4),e.YNc(10,en,1,1,"app-turret-syndrome-calc",4),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.currentCalc),e.xp6(1),e.Q6J("ngForOf",t.options),e.xp6(1),e.Q6J("ngIf",null===t.currentCalc),e.xp6(1),e.Q6J("ngIf",t.currentCalc===t.CalcPage.Defense),e.xp6(1),e.Q6J("ngIf",t.currentCalc===t.CalcPage.TurretSyndrome)}}var N=(()=>{return(a=N||(N={}))[a.Defense=0]="Defense",a[a.TurretSyndrome=1]="TurretSyndrome",N;var a})();let nn=(()=>{class a extends O.B{constructor(t){super(),this.buildStorageService=t,this.CalcPage=N,this.character=null,this.options=[{value:N.Defense,label:"Defenses"},{value:N.TurretSyndrome,label:"Turret"}],this.currentCalc=null,this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(n=>this.character=null===n?null:n.character)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-calcs"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline",1,"no-error-padding"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"character",4,"ngIf"],[3,"value"],[3,"character"]],template:function(t,n){1&t&&e.YNc(0,tn,11,5,"main",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.sg,d.O5,x.a8,x.dn,_.KE,_.hX,I.gD,U.ey,l.JJ,l.On,Kt,Xt],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),a})();function an(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.select(s.stats,r))}),e.TgZ(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA()()}if(2&a){const t=o.$implicit,n=e.oxw(3);e.ekj("selected",n.isSelected(t)),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(n.getValue(n.stats,t))}}function on(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.YNc(3,an,5,4,"div",4),e.BQk()),2&a){const t=o.$implicit;e.xp6(2),e.Oqu(t.section),e.xp6(1),e.Q6J("ngForOf",t.stats)}}function rn(a,o){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,on,4,2,"ng-container",2),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.SECTIONS)}}let V=(()=>{class a extends O.B{constructor(t){super(),this.slormancerTranslateService=t,this.SECTIONS=[{section:this.slormancerTranslateService.translate("cat_adventure"),stats:[{name:this.slormancerTranslateService.translate("essence_find"),stat:"essence_find",sign:!0},{name:this.slormancerTranslateService.translate("xp_find"),stat:"xp_find",sign:!0},{name:this.slormancerTranslateService.translate("influence_gain"),stat:"influence_gain",sign:!0},{name:this.slormancerTranslateService.translate("mf_find"),stat:"mf_find",sign:!0},{name:this.slormancerTranslateService.translate("mf_qual"),stat:"mf_qual",sign:!0}]},{section:this.slormancerTranslateService.translate("cat_health"),stats:[{name:this.slormancerTranslateService.translate("max_health"),stat:"max_health",sign:!1},{name:this.slormancerTranslateService.translate("health_regeneration"),stat:"health_regeneration",sign:!1},{name:this.slormancerTranslateService.translate("health_leech_percent"),stat:"health_leech_percent",sign:!1},{name:this.slormancerTranslateService.translate("life_on_hit"),stat:"life_on_hit",sign:!0},{name:this.slormancerTranslateService.translate("life_on_kill"),stat:"life_on_kill",sign:!0}]},{section:this.slormancerTranslateService.translate("cat_mana"),stats:[{name:this.slormancerTranslateService.translate("max_mana"),stat:"max_mana",sign:!1},{name:this.slormancerTranslateService.translate("mana_regeneration"),stat:"mana_regeneration",sign:!1},{name:this.slormancerTranslateService.translate("mana_leech_percent"),stat:"mana_leech_percent",sign:!1},{name:this.slormancerTranslateService.translate("mana_on_hit"),stat:"mana_on_hit",sign:!0},{name:this.slormancerTranslateService.translate("mana_on_kill"),stat:"mana_on_kill",sign:!0}]},{section:this.slormancerTranslateService.translate("cat_movement"),stats:[{name:this.slormancerTranslateService.translate("movement_speed"),stat:"movement_speed",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_attack"),stats:[{name:this.slormancerTranslateService.translate("cooldown_reduction"),stat:"cooldown_reduction",sign:!1},{name:this.slormancerTranslateService.translate("attack_speed"),stat:"attack_speed",sign:!1},{name:this.slormancerTranslateService.translate("basic_damage"),stat:"basic_damage",sign:!1},{name:this.slormancerTranslateService.translate("weapon_damage"),stat:"weapon_damage",sign:!1},{name:this.slormancerTranslateService.translate("physical_damage"),stat:"physical_damage",sign:!1},{name:this.slormancerTranslateService.translate("elemental_damage"),stat:"elemental_damage",sign:!1},{name:this.slormancerTranslateService.translate("critical_chance"),stat:"critical_chance",sign:!1},{name:this.slormancerTranslateService.translate("critical_damage"),stat:"critical_damage",sign:!1},{name:this.slormancerTranslateService.translate("ancestral_chance"),stat:"ancestral_chance",sign:!1},{name:this.slormancerTranslateService.translate("ancestral_damage"),stat:"ancestral_damage",sign:!1},{name:this.slormancerTranslateService.translate("armor_penetration"),stat:"armor_penetration",sign:!1},{name:this.slormancerTranslateService.translate("elemental_penetration"),stat:"elemental_penetration",sign:!1},{name:this.slormancerTranslateService.translate("dot_increased_damage"),stat:"dot_increased_damage",sign:!0},{name:this.slormancerTranslateService.translate("increased_on_elite"),stat:"increased_on_elite",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_defense"),stats:[{name:this.slormancerTranslateService.translate("armor"),stat:"armor",sign:!1},{name:this.slormancerTranslateService.translate("elemental_resist"),stat:"elemental_resist",sign:!1},{name:this.slormancerTranslateService.translate("fire_resistance"),stat:"fire_resistance",sign:!1},{name:this.slormancerTranslateService.translate("ice_resistance"),stat:"ice_resistance",sign:!1},{name:this.slormancerTranslateService.translate("lightning_resistance"),stat:"lightning_resistance",sign:!1},{name:this.slormancerTranslateService.translate("light_resistance"),stat:"light_resistance",sign:!1},{name:this.slormancerTranslateService.translate("shadow_resistance"),stat:"shadow_resistance",sign:!1},{name:this.slormancerTranslateService.translate("dodge"),stat:"dodge",sign:!1},{name:this.slormancerTranslateService.translate("thorns"),stat:"thorns",sign:!1},{name:this.slormancerTranslateService.translate("retaliate"),stat:"retaliate",sign:!1},{name:this.slormancerTranslateService.translate("tenacity"),stat:"tenacity",sign:!1},{name:this.slormancerTranslateService.translate("reduced_on_all"),stat:"reduced_on_all",sign:!1},{name:this.slormancerTranslateService.translate("reduced_by_elite"),stat:"reduced_by_elite",sign:!1},{name:this.slormancerTranslateService.translate("reduced_on_melee"),stat:"reduced_on_melee",sign:!1},{name:this.slormancerTranslateService.translate("reduced_on_projectile"),stat:"reduced_on_projectile",sign:!1},{name:this.slormancerTranslateService.translate("reduced_on_area"),stat:"reduced_on_area",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_secondary_resources"),stats:[{name:this.slormancerTranslateService.translate("gold_find"),stat:"gold_find",sign:!0},{name:this.slormancerTranslateService.translate("scrap_find"),stat:"scrap_find",sign:!0},{name:this.slormancerTranslateService.translate("slormite_find"),stat:"slormite_find",sign:!0},{name:this.slormancerTranslateService.translate("slormeline_find"),stat:"slormeline_find",sign:!0},{name:this.slormancerTranslateService.translate("reaper_find"),stat:"reaper_find",sign:!0},{name:this.slormancerTranslateService.translate("skill_mastery_gain"),stat:"skill_mastery_gain",sign:!0}]},{section:this.slormancerTranslateService.translate("cat_secondary_melee"),stats:[{name:this.slormancerTranslateService.translate("inner_fire_chance"),stat:"inner_fire_chance",sign:!1},{name:this.slormancerTranslateService.translate("inner_fire_max_number"),stat:"inner_fire_max_number",sign:!1},{name:this.slormancerTranslateService.translate("inner_fire_duration"),stat:"inner_fire_duration",sign:!1},{name:this.slormancerTranslateService.translate("inner_fire_damage"),stat:"inner_fire_damage",sign:!1},{name:this.slormancerTranslateService.translate("overdrive_chance"),stat:"overdrive_chance",sign:!1},{name:this.slormancerTranslateService.translate("overdrive_bounce_number"),stat:"overdrive_bounce_number",sign:!1},{name:this.slormancerTranslateService.translate("overdrive_damage"),stat:"overdrive_damage",sign:!1},{name:this.slormancerTranslateService.translate("recast_chance"),stat:"recast_chance",sign:!1},{name:this.slormancerTranslateService.translate("knockback_melee"),stat:"knockback_melee",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_secondary_projectile"),stats:[{name:this.slormancerTranslateService.translate("additional_projectile"),stat:"additional_projectile",sign:!0},{name:this.slormancerTranslateService.translate("chance_to_pierce"),stat:"chance_to_pierce",sign:!1},{name:this.slormancerTranslateService.translate("fork_chance"),stat:"fork_chance",sign:!1},{name:this.slormancerTranslateService.translate("chance_to_rebound"),stat:"chance_to_rebound",sign:!1},{name:this.slormancerTranslateService.translate("projectile_speed"),stat:"projectile_speed",sign:!0},{name:this.slormancerTranslateService.translate("knockback_projectile"),stat:"knockback_projectile",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_secondary_aoe"),stats:[{name:this.slormancerTranslateService.translate("aoe_increased_size"),stat:"aoe_increased_size",sign:!1},{name:this.slormancerTranslateService.translate("aoe_increased_effect"),stat:"aoe_increased_effect",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_secondary_extras"),stats:[{name:this.slormancerTranslateService.translate("totem_increased_effect"),stat:"totem_increased_effect",sign:!0},{name:this.slormancerTranslateService.translate("aura_increased_effect"),stat:"aura_increased_effect",sign:!0},{name:this.slormancerTranslateService.translate("minion_increased_damage"),stat:"minion_increased_damage",sign:!0}]}],this.stats=null,this.selectedMergedStat=null,this.selected=new e.vpe}ngOnInit(){}valueToString(t,n,i){let r;return r="number"==typeof t?(t<0?"":n?"+":"")+(0,c.D$L)(t)+i:(t.min<0?"":n?"+":"")+(0,c.D$L)(t.min)+i+" - "+(t.max<0?"":n?"+":"")+(0,c.D$L)(t.max)+i,r}getValue(t,n){const i=t.find(s=>s.stat===n.stat);let r="0";return i&&(r=this.valueToString(i.totalDisplayed,n.sign,i.suffix)),r}select(t,n){const i=t.find(r=>r.stat===n.stat);i&&(this.selectedMergedStat=i,this.selected.emit(i))}translate(t){return this.slormancerTranslateService.translate(t)}isSelected(t){return null!==this.selectedMergedStat&&this.selectedMergedStat.stat===t.stat}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(c.n6D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-main-stats"]],inputs:{stats:"stats"},outputs:{selected:"selected"},features:[e.qOj],decls:1,vars:1,consts:[["class","sections",4,"ngIf"],[1,"sections"],[4,"ngFor","ngForOf"],[1,"section"],["class","stat",3,"selected","click",4,"ngFor","ngForOf"],[1,"stat",3,"click"],[1,"label"],[1,"value"]],template:function(t,n){1&t&&e.YNc(0,rn,2,1,"div",0),2&t&&e.Q6J("ngIf",null!==n.stats)},dependencies:[d.sg,d.O5],styles:[".sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.sections[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding-left:8px;cursor:pointer}.sections[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.sections[_ngcontent-%COMP%]   .stat.selected[_ngcontent-%COMP%]{background-color:#ffffff4d}"]}),a})();function cn(a,o){if(1&a&&(e.TgZ(0,"div",4)(1,"div",5),e._uU(2),e.qZA(),e.TgZ(3,"div",6)(4,"span",7),e._uU(5),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",8),e._uU(8),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw();e.ekj("increase",t.difference>0)("decrease",t.difference<0),e.xp6(1),e.Q6J("matTooltip",n.valueToString(t.left,!0)),e.xp6(1),e.Oqu(n.valueToString(t.left)),e.xp6(3),e.Oqu(n.changeToString(t.difference)),e.xp6(1),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("matTooltip",n.valueToString(t.right,!0)),e.xp6(1),e.Oqu(n.valueToString(t.right))}}function ln(a,o){if(1&a&&(e.ynx(0),e.YNc(1,cn,9,10,"div",3),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",0!==t.difference)}}function sn(a,o){1&a&&(e.TgZ(0,"div",9),e._uU(1,"No differences"),e.qZA())}let re=(()=>{class a{constructor(){this.differences=[]}valueToString(t,n=!1){let i="";return i+="number"==typeof t?t>1e4&&!n?Math.floor(t/1e3)+"k":t:t.min>1e4&&t.max>1e4&&!n?Math.floor(t.min/1e3)+"k - "+Math.floor(t.max/1e3)+"k":t.min+" - "+t.max,i}changeToString(t){let n="";return Number.isFinite(t)&&(t>0&&(n="+"),n+=t+"%"),n}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compare-view"]],inputs:{differences:"differences"},decls:3,vars:2,consts:[[1,"differences"],[4,"ngFor","ngForOf"],["class","no-differences",4,"ngIf"],["class","difference",3,"increase","decrease",4,"ngIf"],[1,"difference"],[1,"left",3,"matTooltip"],[1,"change"],[1,"value"],[1,"right",3,"matTooltip"],[1,"no-differences"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ln,2,1,"ng-container",1),e.YNc(2,sn,2,0,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.differences),e.xp6(1),e.Q6J("ngIf",0===n.differences.length))},dependencies:[d.sg,d.O5,Z.gM],styles:[".differences[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:8px;min-width:350px}@media (max-width: 374px){.differences[_ngcontent-%COMP%]{min-width:auto}}.differences[_ngcontent-%COMP%]   .no-differences[_ngcontent-%COMP%]{text-align:center}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{gap:8px}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-basis:auto}}}@media (max-width: 374px){.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:none}}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;text-align:center}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{flex-basis:auto}}}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{text-align:left}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.differences[_ngcontent-%COMP%]   .difference.increase[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:green}.differences[_ngcontent-%COMP%]   .difference.decrease[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:red}"]}),a})();function gn(a,o){1&a&&(e.TgZ(0,"p"),e._uU(1,"Choose another layer to compare with"),e.qZA())}function dn(a,o){if(1&a&&e._UZ(0,"app-compare-view",9),2&a){const t=e.oxw(2);e.Q6J("differences",t.differences)}}function un(a,o){if(1&a&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function pn(a,o){if(1&a&&e._UZ(0,"app-main-stats",2),2&a){const t=e.oxw(2);e.Q6J("stats",t.layerControl.value.character.stats)}}function mn(a,o){if(1&a&&(e.TgZ(0,"main")(1,"mat-card",1)(2,"mat-card-content")(3,"h2"),e._uU(4),e.qZA(),e._UZ(5,"app-main-stats",2),e.qZA()(),e.TgZ(6,"mat-card",3)(7,"mat-card-content"),e.YNc(8,gn,2,0,"p",0),e.YNc(9,dn,1,1,"app-compare-view",4),e.qZA()(),e.TgZ(10,"mat-card",1)(11,"mat-card-content")(12,"mat-form-field",5)(13,"mat-label"),e._uU(14,"Layer to compare with"),e.qZA(),e.TgZ(15,"mat-select",6),e.YNc(16,un,2,2,"mat-option",7),e.qZA()(),e.YNc(17,pn,1,1,"app-main-stats",8),e.qZA()()()),2&a){const t=e.oxw();e.xp6(4),e.Oqu(t.currentLayer.name),e.xp6(1),e.Q6J("stats",t.currentLayer.character.stats),e.xp6(3),e.Q6J("ngIf",null===t.differences),e.xp6(1),e.Q6J("ngIf",null!==t.differences),e.xp6(6),e.Q6J("formControl",t.layerControl),e.xp6(1),e.Q6J("ngForOf",t.layers),e.xp6(1),e.Q6J("ngIf",t.layerControl.value)}}let _n=(()=>{class a extends O.B{constructor(t,n){super(),this.buildStorageService=t,this.slormancerCharacterComparatorService=n,this.differences=null,this.currentLayer=null,this.layers=[],this.config=null,this.layerControl=new l.NI(null),this.buildStorageService.buildChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(i=>{var r;this.layers=null===i?[]:i.layers,this.layerControl.setValue(null!==(r=this.layers[0])&&void 0!==r?r:null)}),this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(i=>{var r;if(this.currentLayer=i,null!==i){const s=this.layers.indexOf(i);-1!==s&&(this.layerControl.setValue(null!==(r=this.layers[0===s&&this.layers.length>1?1:0])&&void 0!==r?r:null),this.updateDifferences())}}),this.layerControl.valueChanges.subscribe(()=>this.updateDifferences())}ngOnInit(){}updateDifferences(){this.differences=null,null!==this.currentLayer&&this.layerControl.value&&this.currentLayer!==this.layerControl.value&&(this.differences=this.slormancerCharacterComparatorService.compareCharacters(this.currentLayer.character,this.layerControl.value.character))}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x),e.Y36(c.PeY))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compare"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"layer"],[3,"stats"],[1,"compare"],[3,"differences",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"stats",4,"ngIf"],[3,"differences"],[3,"value"]],template:function(t,n){1&t&&e.YNc(0,mn,18,7,"main",0),2&t&&e.Q6J("ngIf",null!==n.currentLayer&&n.layers.length>0)},dependencies:[d.sg,d.O5,x.a8,x.dn,_.KE,_.hX,I.gD,U.ey,l.JJ,l.oH,V,re],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card.compare[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}"]}),a})();var j=h(7446);function hn(a,o){if(1&a&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&a){const t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function fn(a,o){if(1&a&&(e.TgZ(0,"mat-form-field",3)(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",4),e.YNc(4,hn,2,1,"mat-icon",5),e.qZA()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(t.config.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function Cn(a,o){if(1&a&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function vn(a,o){if(1&a&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&a){const t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function Mn(a,o){if(1&a&&(e.TgZ(0,"mat-form-field",3)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",7),e.YNc(4,Cn,2,2,"mat-option",8),e.qZA(),e.YNc(5,vn,2,1,"mat-icon",5),e.qZA()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(t.config.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngForOf",t.config.values),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function bn(a,o){if(1&a&&(e.TgZ(0,"mat-icon",12),e._uU(1,"info"),e.qZA()),2&a){const t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function On(a,o){if(1&a&&(e.TgZ(0,"mat-checkbox",10)(1,"label"),e._uU(2),e.YNc(3,bn,2,1,"mat-icon",11),e.qZA()()),2&a){const t=e.oxw(2);e.Q6J("formControl",t.control)("checked",t.control.value),e.xp6(2),e.hij(" ",t.config.label," "),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function xn(a,o){if(1&a&&(e.ynx(0),e.YNc(1,fn,5,3,"mat-form-field",1),e.YNc(2,Mn,6,4,"mat-form-field",1),e.YNc(3,On,4,4,"mat-checkbox",2),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isNumber(t.config)),e.xp6(1),e.Q6J("ngIf",t.isEnum(t.config)),e.xp6(1),e.Q6J("ngIf",t.isBoolean(t.config))}}let yn=(()=>{class a{constructor(){this.control=null,this.config=null}isNumber(t){return"number"===t.type}isEnum(t){return"enum"===t.type}isBoolean(t){return"boolean"===t.type}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-config-entry"]],inputs:{control:"control",config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline","color","primary","class","no-error-padding",4,"ngIf"],["color","primary","labelPosition","before",3,"formControl","checked",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","number",3,"formControl"],["matSuffix","",3,"matTooltip",4,"ngIf"],["matSuffix","",3,"matTooltip"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","primary","labelPosition","before",3,"formControl","checked"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"]],template:function(t,n){1&t&&e.YNc(0,xn,4,3,"ng-container",0),2&t&&e.Q6J("ngIf",null!==n.config&&null!==n.control)},dependencies:[d.sg,d.O5,T.Hw,_.KE,_.hX,_.R9,w.Nt,I.gD,U.ey,j.oG,Z.gM,l.Fj,l.wV,l.JJ,l.oH],styles:["mat-form-field[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]{width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;white-space:initial;width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:4px}"]}),a})();function Pn(a,o){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){const t=o.$implicit,n=e.oxw(3);e.Q6J("control",n.getControl(t))("config",t)}}function Sn(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,Pn,1,2,"app-config-entry",3),e.BQk()),2&a){const t=o.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function kn(a,o){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,Sn,4,2,"ng-container",1),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.GENERAL_CONFIG_GROUPS)}}function Tn(a,o){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){const t=o.$implicit,n=e.oxw(4);e.Q6J("control",n.getControl(t))("config",t)}}function wn(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,Tn,1,2,"app-config-entry",3),e.BQk()),2&a){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function Zn(a,o){if(1&a&&(e.ynx(0),e.YNc(1,wn,4,2,"ng-container",0),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isGroupValid(t))}}function An(a,o){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,Zn,2,1,"ng-container",1),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.CLASS_CONFIG_GROUPS)}}function qn(a,o){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){const t=o.$implicit,n=e.oxw(4);e.Q6J("control",n.getControl(t))("config",t)}}function In(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,qn,1,2,"app-config-entry",3),e.BQk()),2&a){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function Ln(a,o){if(1&a&&(e.ynx(0),e.YNc(1,In,4,2,"ng-container",0),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isGroupValid(t))}}function Un(a,o){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,Ln,2,1,"ng-container",1),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.EQUIPMENT_CONFIG_GROUPS)}}let Nn=(()=>{class a extends O.B{constructor(t){super(),this.buildStorageService=t,this.EXTRA_VALIDATORS={percent_missing_health:[l.kI.max(100)],percent_missing_mana:[l.kI.max(100)],enemy_percent_missing_health:[l.kI.max(100)],block_stacks:[l.kI.max(100)],nimble_champion_stacks:[l.kI.max(200)],nimble_chaserenitympion_stacks:[l.kI.max(12)]},this.NON_REQUIRED_CONFIGURATION=["maxed_upgrades"],this.GENERAL_CONFIG_GROUPS=[{title:"General",condition:()=>!0,configurations:[{type:"number",key:"all_other_characters_level",label:"Sum of all your other character's level"},{type:"number",key:"highest_same_type_reaper_level",label:"Highest level among reapers of the same type of equipped reaper"},{type:"number",key:"completed_achievements",label:"% of completed achievements"},{type:"number",key:"elder_slorms",label:"Total Elder Slorm"},{type:"number",key:"overall_reputation",label:"Overall reputation"},{type:"number",key:"percent_missing_health",label:"Missing life (%)",info:"Total locked life will be used instead if higher"},{type:"number",key:"percent_missing_mana",label:"Missing mana (%)",info:"Total locked mana will be used instead if higher"},{type:"number",key:"controlled_minions",label:"Minions under your control",info:"Totems are not minions"},{type:"number",key:"totems_under_control",label:"Totems under your control",info:"Minions are not totems"},{type:"number",key:"highest_slorm_temple_floor",label:"Highest Slorm Temple floor"},{type:"boolean",key:"idle",label:"Are you idle ?"},{type:"boolean",key:"is_rune_active",label:"Is your effect rune active ?"},{type:"number",key:"effect_rune_affinity",label:"Affinity of your effect rune",info:"Used if rune and reaper smith are differents"},{type:"number",key:"other_characters_mastery_total",label:"Total mastery of other characters",info:"Computed value is currently wrong in game, so the result based on this config may be different"}]},{title:"When in Combat",condition:()=>!0,configurations:[{type:"number",key:"mana_lost_last_second",label:"Mana lost last second"},{type:"number",key:"mana_gained_last_second",label:"Mana gained last second"},{type:"number",key:"active_inner_fire",label:"Active inner fires"},{type:"number",key:"hits_taken_recently",label:"Hits taken recently"},{type:"number",key:"skill_cast_recently",label:"Skills cast recently"},{type:"number",key:"ennemies_in_radius",label:"Number of ennemies close to you"},{type:"number",key:"elites_in_radius",label:"Number of elites close to you"},{type:"number",key:"chilled_enemy_nearby",label:"Number of frozen or chilled enemies close to you"},{type:"number",key:"victims_combo",label:"Current combo counter"},{type:"boolean",key:"cast_support_before_next_cast",label:"Did you cast a support skill recently"},{type:"boolean",key:"took_elemental_damage_recently",label:"Did you take elemental damage recently"},{type:"boolean",key:"took_physical_damage_recently",label:"Did you take physical damage recently"},{type:"boolean",key:"crit_recently",label:"Did you deal a critical strike recently"},{type:"boolean",key:"dodge_recently",label:"Did you dodge recently"},{type:"boolean",key:"in_combat",label:"Are you in combat"}]},{title:"Enemy",condition:()=>!0,configurations:[{type:"boolean",key:"use_enemy_state",label:"Use enemy state",info:"If unchecked, will ignore any stat given by a specific enemy state"},{type:"number",key:"enemy_percent_missing_health",label:"Missing health (%)"},{type:"number",key:"distance_with_target",label:"Distance with your hero (in yards)"},{type:"boolean",key:"target_is_close",label:"Is close to you"},{type:"boolean",key:"target_is_isolated",label:"Is isolated"},{type:"boolean",key:"target_has_broken_armor",label:"Has broken armor"},{type:"boolean",key:"target_has_negative_effect",label:"Has any negative effect"},{type:"boolean",key:"target_is_burning",label:"Is burning"},{type:"boolean",key:"enemy_is_chill_or_frozen",label:"Is your target chilled or frozen"}]}],this.EQUIPMENT_CONFIG_GROUPS=[{title:"Reaper (Adam Nostrus)",condition:n=>1===n.reaper.id||2===n.reaper.id,configurations:[{type:"boolean",key:"has_adam_blessing_buff",label:"Do you have adam's blessing"}]},{title:"Reaper (Relentless Transferance)",condition:n=>5===n.reaper.id,configurations:[{type:"number",key:"indirect_defense_stacks",label:"Number of indirect defense stacks"}]},{title:"Reaper (Master)",condition:n=>12===n.reaper.id||13===n.reaper.id||14===n.reaper.id,configurations:[{type:"number",key:"support_streak_stacks",label:"Number of support streak stacks"}]},{title:"Reaper (Spectral Shapeshifter)",condition:n=>19===n.reaper.id||20===n.reaper.id||21===n.reaper.id,configurations:[{type:"number",key:"bloodthirst_stacks",label:"Number of bloodthirst stacks"}]},{title:"Reaper (Bloodthirsty)",condition:n=>36===n.reaper.id,configurations:[{type:"number",key:"bloodthirst_stacks",label:"Number of bloodthirst stacks"},{type:"boolean",key:"has_blood_frenzy_buff",label:"Is blood frenzy active"}]},{title:"Reaper (Elemental Overload)",condition:n=>32===n.reaper.id||33===n.reaper.id||34===n.reaper.id,configurations:[{type:"number",key:"elemental_fury_stacks",label:"Number of elemental fury stacks"}]},{title:"Reaper (Recurring Nightmare)",condition:n=>45===n.reaper.id,configurations:[{type:"number",key:"mage_bane_stacks",label:"Number of mage bane stacks"},{type:"number",key:"fighter_bane_stacks",label:"Number of figher bane stacks"},{type:"number",key:"absorbed_damage_wrath",label:"Sum of Armor and Elemental Resistance at this Wrath Level",info:"I'm still looking for the formula"}]},{title:"Reaper (Unity)",condition:n=>c.Vkw.includes(n.reaper.id),configurations:[{type:"number",key:"unity_level_0_47",label:"Level of Legion, the first sword of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_0_48",label:"Level of Legion, the second sword of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_0_49",label:"Level of Legion, the third sword of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_0_50",label:"Level of Legion, the fourth sword of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_0_51",label:"Level of Legion, the fifth sword of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_0_52",label:"Level of Legion, the sixth sword of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_1_47",label:"Level of Legion, the first bow of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_1_48",label:"Level of Legion, the second bow of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_1_49",label:"Level of Legion, the third bow of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_1_50",label:"Level of Legion, the fourth bow of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_1_51",label:"Level of Legion, the fifth bow of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_1_52",label:"Level of Legion, the sixth bow of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_2_47",label:"Level of Legion, the first staff of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_2_48",label:"Level of Legion, the second staff of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_2_49",label:"Level of Legion, the third staff of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_2_50",label:"Level of Legion, the fourth staff of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_2_51",label:"Level of Legion, the fifth staff of Unity",info:"Used for unity reapers values if not the currently equipped reaper"},{type:"number",key:"unity_level_2_52",label:"Level of Legion, the sixth staff of Unity",info:"Used for unity reapers values if not the currently equipped reaper"}]},{title:"Reaper (TimeShifter)",condition:n=>76===n.reaper.id,configurations:[{type:"boolean",key:"is_curving_time_or_time_shifting",label:"Are you curving time or time shifting"}]},{title:"Reaper (Ancestral Wrath)",condition:n=>77===n.reaper.id,configurations:[{type:"number",key:"ancestral_wrath_stacks",label:"Number of ancestral wrath stacks"}]},{title:"Reaper (Ancestral Harmony)",condition:n=>86===n.reaper.id,configurations:[{type:"number",key:"ancestral_preparation_stacks",label:"Number of ancestral preparation stacks"}]},{title:"Reaper (Havoc)",condition:n=>90===n.reaper.id,configurations:[{type:"number",key:"wreak_havoc_stacks",label:"Number of wreak havoc stacks"}]},{title:"Reaper (Sun and Moon)",condition:n=>96===n.reaper.id,configurations:[{type:"number",key:"moonlight_stacks",label:"Number of moonlight stacks"},{type:"number",key:"sunlight_stacks",label:"Number of sunlight stacks"},{type:"boolean",key:"moonlight_side",label:"Is the reaper on the moonlight side"}]},{title:"Reaper (of the Many)",condition:n=>103===n.reaper.id,configurations:[{type:"number",key:"life_orbs_count",label:"Number of life orbs"}]},{title:"Reaper (Manificient Leviathan)",condition:n=>105===n.reaper.id,configurations:[{type:"number",key:"victims_reaper_104",label:"Kills with Goldfish reaper"}]},{title:"Reaper (Lifebender)",condition:n=>73===n.reaper.id,configurations:[{type:"number",key:"damage_stored",label:"Highest damage taken"}]},{title:"Reaper (Manabender)",condition:n=>74===n.reaper.id,configurations:[{type:"boolean",key:"has_manabender_buff",label:"Is manabender (buff) active"}]},{title:"Reaper (Nimble warrior)",condition:n=>75===n.reaper.id,configurations:[{type:"boolean",key:"has_nimble_buff",label:"Is nimble effect active"},{type:"number",key:"nimble_champion_stacks",label:"Nimble champion stacks"}]},{title:"Reaper (Chrysalis)",condition:n=>79===n.reaper.id||80===n.reaper.id,configurations:[{type:"number",key:"negative_effects_on_ennemies_in_radius",label:"Total number of negative effect on enemies"}]},{title:"Reaper (Ancestral Legacy)",condition:n=>82===n.reaper.id||83===n.reaper.id,configurations:[{type:"number",key:"ancestral_legacy_stacks",label:"Number of ancient legacy stacks"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"}]},{title:"Reaper (Slormbane)",condition:n=>111===n.reaper.id,configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"}]},{title:"Reaper (Goldbane)",condition:n=>112===n.reaper.id,configurations:[{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Aurifurious)",condition:n=>113===n.reaper.id,configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"},{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Concentrated Inner Strength)",condition:n=>23===n.reaper.id,configurations:[{type:"boolean",key:"concentration_buff",label:"Is Concentration active"}]},{title:"Reaper (Fate-Crusher)",condition:n=>53===n.reaper.id,configurations:[{type:"number",key:"fulgurorn_dedication_stacks",label:"Fulgurorn's Dedication stacks"}]},{title:"Reaper (Inner Fireworks)",condition:n=>57===n.reaper.id||58===n.reaper.id,configurations:[{type:"number",key:"enemy_inner_weakness_stacks",label:"Inner weakness stacks on enemy",info:'Effect is applied if "use enemy state" is checked'}]},{title:"Reaper (Temple Keeper)",condition:n=>84===n.reaper.id,configurations:[{type:"boolean",key:"show_temple_keeper_as_totem",label:"Display temple keeper stats on it's totem's form"}]},{title:"Reaper (Slorm Temple)",condition:n=>85===n.reaper.id,configurations:[{type:"boolean",key:"ultima_momentum_buff",label:"Is Ultima-Momentum active"},{type:"boolean",key:"show_elder_inner_fire_damage",label:"Show inner fire damages as elder"}]},{title:"Reaper (Giant Slayer)",condition:n=>91===n.reaper.id||92===n.reaper.id,configurations:[{type:"number",key:"enemy_enfeeble_stacks",label:"Enemy enfeeble stacks",info:'Effect is applied if "use enemy state" is checked'},{type:"number",key:"apex_predator_stacks",label:"Apex predator stacks"},{type:"number",key:"enfeeble_stacks_in_radius",label:"Enfeeble stacks on enemies around you"}]},{title:"Reaper (Warlock)",condition:n=>106===n.reaper.id||107===n.reaper.id,configurations:[{type:"boolean",key:"has_life_bargain_buff",label:"Is life bargain active"}]},{title:"Rune (Enhancement of Hagan)",condition:n=>null!==n.runes.enhancement&&23===n.runes.enhancement.id,configurations:[{type:"number",key:"effective_rune_stacks",label:"Effective rune stacks"}]},{title:"Rune (Retaliating foresight)",condition:n=>null!==n.runes.effect&&11===n.runes.effect.id,configurations:[{type:"number",key:"unrelenting_stacks",label:"Number of unrelenting stacks"}]},{title:"Gold Armor",condition:n=>this.hasActivable(n,0),configurations:[{type:"boolean",key:"has_gold_armor_buff",label:"Is Gold Armor active"}]},{title:"Splash Splash",condition:n=>this.hasActivable(n,3),configurations:[{type:"boolean",key:"has_splash_splash_buff",label:"Is splash splash active",info:"It really does nothing, i checked"}]},{title:"Booster Max",condition:n=>this.hasActivable(n,6),configurations:[{type:"boolean",key:"has_booster_max_buff",label:"Is booster max active"}]},{title:"Summon Skeleton Squire",condition:n=>this.hasActivable(n,17),configurations:[{type:"number",key:"summoned_skeleton_squires",label:"Number of summoned skeleton squires"},{type:"boolean",key:"always_summon_maximum_skeleton_squires",label:"Always summon the maximum number of skeleton squires",info:"Based on your available mana after other skills reservation. Override fixed number of summoned skeleton squires"},{type:"boolean",key:"add_skeletons_to_controlled_minions",label:"Add summoned skeletons to controlled minions",info:"Added to minions under your control config"},{type:"number",key:"minimum_unreserved_mana",label:"Minimum unreserved mana",info:"When summoning skeleton squires, will make sure that your mana do not go under this value. When exporting a build, this value is set to your highest skill cost."}]},{title:"Summon Prime Totem",condition:n=>this.hasActivable(n,19),configurations:[{type:"boolean",key:"add_totem_tag_to_prime_totem_skills",label:"Apply totem tags to Wood Sticks / Arrow Shots / Arcane Missiles"}]},{title:"Exposed Armor",condition:n=>this.hasActivable(n,23),configurations:[{type:"boolean",key:"exposed_armor_buff",label:"Is exposed armor active"}]},{title:"Willpower",condition:n=>this.isAttributeAllocated(n,c.ahi.Willpower),configurations:[{type:"boolean",key:"has_elemental_prowess_buff",label:"Is elemental prowess active"}]},{title:"Dexterity",condition:n=>this.isAttributeAllocated(n,c.ahi.Dexterity),configurations:[{type:"number",key:"totem_dexterity_stacks",label:"Number of totem dexterity stacks"}]},{title:"Bravery",condition:n=>this.isAttributeAllocated(n,c.ahi.Bravery),configurations:[{type:"number",key:"greed_stacks",label:"Number of greed stacks"},{type:"number",key:"strider_stacks",label:"Number of strider stacks"},{type:"number",key:"merchant_stacks",label:"Number of merchant stacks"}]},{title:"Burning Shadow",condition:n=>this.isAncestralLegacyEquipped(n,80),configurations:[{type:"boolean",key:"has_burning_shadow_buff",label:"Is burning shadow active"}]},{title:"Elemental Temper",condition:n=>this.isAncestralLegacyEquipped(n,85),configurations:[{type:"boolean",key:"has_elemental_temper_buff",label:"Is elemental temper active"}]},{title:"Electrify",condition:n=>this.isAncestralLegacyEquipped(n,33),configurations:[{type:"boolean",key:"has_electrify_buff",label:"Are you on Electrify"}]},{title:"Elemental Spirit",condition:n=>this.isAncestralLegacyEquipped(n,106),configurations:[{type:"number",key:"elemental_spirit_stacks",label:"Number of elemental spirit stacks"}]},{title:"Focus",condition:n=>this.isAncestralLegacyEquipped(n,82),configurations:[{type:"boolean",key:"is_channeling_focus",label:"Are you channeling Focus"}]},{title:"Living inferno",condition:n=>this.isAncestralLegacyEquipped(n,14),configurations:[{type:"boolean",key:"has_living_inferno_buff",label:"Is Living inferno active"}]},{title:"Shadow Shield",condition:n=>this.isAncestralLegacyEquipped(n,65),configurations:[{type:"boolean",key:"has_shadow_shield_buff",label:"Is Shadow Shield active"}]},{title:"Flawless Defense",condition:n=>this.isAncestralLegacyEquipped(n,83),configurations:[{type:"boolean",key:"has_flawless_defense_buff",label:"Is Flawless Defense active"}]},{title:"Shadow Bargain",condition:n=>this.isAncestralLegacyEquipped(n,74),configurations:[{type:"boolean",key:"has_shadow_bargain_buff",label:"Is Shadow Bargain active"}]},{title:"Frostfire Armor",condition:n=>this.isAncestralLegacyEquipped(n,76),configurations:[{type:"boolean",key:"has_frostfire_buff",label:"Is Frostfire Armor active"}]},{title:"Faith of the Ancients",condition:n=>this.hasLegendaryEffect(n,31),configurations:[{type:"boolean",key:"has_ancient_recognition_buff",label:"Is ancient recognition active"}]},{title:"Steaming Ancestral Fervor",condition:n=>this.hasLegendaryEffect(n,29),configurations:[{type:"boolean",key:"has_ancestral_fervor_buff",label:"Is ancestral fervor active"}]},{title:"The Voltaroid",condition:n=>this.hasLegendaryEffect(n,75),configurations:[{type:"number",key:"high_voltage_stacks",label:"Number of high voltage stacks"}]},{title:"Repercussive Cloak",condition:n=>this.hasLegendaryEffect(n,77),configurations:[{type:"boolean",key:"has_shadow_repercussion_buff",label:"Is shadow repercussion active"}]},{title:"Gazloka's Conquest",condition:n=>this.hasLegendaryEffect(n,26),configurations:[{type:"number",key:"conquest_stacks",label:"Number of conquest stacks"}]},{title:"Wizard's Catalyst",condition:n=>this.hasLegendaryEffect(n,63),configurations:[{type:"number",key:"elemental_weakness_stacks",label:"Number of elemental weakness stacks on your target"}]},{title:"Greaves of Stability",condition:n=>this.hasLegendaryEffect(n,16),configurations:[{type:"number",key:"stability_stacks",label:"Number of stability stacks"}]},{title:"Art of Retribution",condition:n=>this.hasLegendaryEffect(n,16),configurations:[{type:"number",key:"revengeance_stacks",label:"Number of reveangence stacks"}]},{title:"Enlightening Journey",condition:n=>this.hasLegendaryEffect(n,76),configurations:[{type:"number",key:"enlightenment_stacks",label:"Shield globes picked up recently"}]},{title:"Aurelon's Bargain",condition:n=>this.isAncestralLegacyEquipped(n,78),configurations:[{type:"number",key:"aurelon_bargain_stacks",label:"Number of Aurelon's stacks"}]},{title:"Cleansing Surge",condition:n=>this.isAncestralLegacyEquipped(n,37),configurations:[{type:"number",key:"cleansing_surge_stacks",label:"Number of Cleansing surge stacks"}]},{title:"Charging up!",condition:n=>this.isAncestralLegacyEquipped(n,39),configurations:[{type:"number",key:"overcharged_stacks",label:"Number of Overcharged stacks"}]},{title:"A Path to the First",condition:n=>this.hasLegendaryEffect(n,32),configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"},{type:"number",key:"overdrive_bounces_left",label:"Number of bounces left"}]},{title:"A Link to the Last",condition:n=>this.hasLegendaryEffect(n,33),configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"}]},{title:"Neriya's Frenzy",condition:n=>this.hasLegendaryEffect(n,74),configurations:[{type:"boolean",key:"frostbolt_shot_recently",label:"Frostbolt shot recently"}]},{title:"Ancestral Instability",condition:n=>this.isAncestralLegacyEquipped(n,91),configurations:[{type:"boolean",key:"has_ancestral_instability_buff",label:"Is ancestral instability active"},{type:"number",key:"ancestral_instability_buff_duration",label:"Ancestral instability duration (in seconds)"}]},{title:"Efficiency",condition:n=>this.isAncestralLegacyEquipped(n,84),configurations:[{type:"boolean",key:"efficiency_buff",label:"Is efficiency active"}]},{title:"Avatar of Shadow",condition:n=>this.isAncestralLegacyEquipped(n,70),configurations:[{type:"boolean",key:"has_avatar_of_shadow_buff",label:"Is avatar of shadow active"}]}],this.CLASS_CONFIG_GROUPS=[{title:"Knight",condition:n=>n.heroClass===c.iHO.Warrior,configurations:[{type:"number",key:"knight_other_level",label:"Highest level between Mage and Huntress"},{type:"number",key:"block_stacks",label:"Number of block stacks"},{type:"boolean",key:"next_cast_is_fortunate",label:"Is your next cast fortunate"},{type:"boolean",key:"next_cast_is_perfect",label:"Is your next cast perfect"},{type:"boolean",key:"is_hit_blocked",label:"Are you blocking a hit",info:"Used to computed additional effects on block (like thorn or retaliate)"},{type:"boolean",key:"target_is_skewered",label:"Is your target skewered"}]},{title:"Banner of War",condition:n=>this.isSkillEquipped(n,c.iHO.Warrior,0),configurations:[{type:"number",key:"banners_nearby",label:"Number of banners are under your control"},{type:"boolean",key:"has_banner_regeneration_buff",label:"Is banner of regeneration active"},{type:"boolean",key:"has_banner_haste_buff",label:"Is banner of haste active"}]},{title:"Enduring Protector",condition:n=>this.isSkillEquipped(n,c.iHO.Warrior,2),configurations:[{type:"boolean",key:"has_enduring_protector_buff",label:"Is enduring protector active"}]},{title:"Mighty Swing",condition:n=>this.isSkillEquipped(n,c.iHO.Warrior,3),configurations:[{type:"number",key:"frenzy_stacks",label:"Number of frenzy stacks"}]},{title:"Wood Stick",condition:n=>this.isSkillEquipped(n,c.iHO.Warrior,4),configurations:[{type:"number",key:"oak_bark_armor_stacks",label:"Number of oak-bark armor stacks"},{type:"number",key:"enemy_splintered_stacks",label:"Number of splintered stacks on your target"}]},{title:"Throwing sword",condition:n=>this.isSkillEquipped(n,c.iHO.Warrior,5),configurations:[{type:"number",key:"enemy_bleed_stacks",label:"Number of bleed stacks on enemies around you"},{type:"number",key:"enemy_splintered_stacks",label:"Number of splintered stacks on your target"}]},{title:"Cadence",condition:n=>this.isSkillEquipped(n,c.iHO.Warrior,6),configurations:[{type:"boolean",key:"enemy_has_military_oppression",label:"Is your target affected by military oppression"}]},{title:"Grappling Hook",condition:n=>this.isSkillEquipped(n,c.iHO.Warrior,7),configurations:[{type:"number",key:"enemy_under_command",label:"Number of enemies under your control"},{type:"number",key:"elite_under_command",label:"Number of elites under your control"},{type:"number",key:"melee_defense_stacks",label:"Number of melee defense stacks"},{type:"number",key:"projectile_defense_stacks",label:"Number of projectile defense stacks"},{type:"number",key:"aoe_defense_stacks",label:"Number of aoe defense stacks"},{type:"number",key:"vitality_stacks",label:"Number of vitality stacks"}]},{title:"Whirlwind",condition:n=>this.isSkillEquipped(n,c.iHO.Warrior,9),configurations:[{type:"number",key:"time_spend_channeling",label:"For how long have you been channeling (seconds)"},{type:"boolean",key:"is_channeling_whirlwind",label:"Are you channeling whirlwind"}]},{title:"Elder Lance",condition:n=>this.isSkillEquipped(n,c.iHO.Warrior,10),configurations:[{type:"number",key:"cosmic_stacks",label:"Number of cosmic stacks"}]},{title:"Huntress",condition:n=>n.heroClass===c.iHO.Huntress,configurations:[{type:"number",key:"serenity",label:"What is your serenity level"},{type:"number",key:"traps_nearby",label:"Number of traps nearby"},{type:"number",key:"poison_enemies",label:"Number of poisoned enemies nearby"},{type:"boolean",key:"trap_triggered_recently",label:"Did you trigger a trap recently"},{type:"boolean",key:"last_cast_tormented",label:"Was your last cast tormented"},{type:"boolean",key:"last_cast_delighted",label:"Was your last cast delighted"},{type:"boolean",key:"enemy_is_poisoned",label:"Is your target poisoned"}]},{title:"Turret Syndrome",condition:n=>this.isSkillEquipped(n,c.iHO.Huntress,0),configurations:[{type:"boolean",key:"turret_syndrome_on_cooldown",label:"Is turret syndrome on cooldown"},{type:"boolean",key:"hero_close_to_turret_syndrome",label:"Are you close to your turret"}]},{title:"Tumble",condition:n=>this.isSkillEquipped(n,c.iHO.Huntress,1),configurations:[{type:"boolean",key:"has_assassin_haste_buff",label:"Is assassin's haste active"}]},{title:"Smoke screen",condition:n=>this.isSkillEquipped(n,c.iHO.Huntress,2),configurations:[{type:"boolean",key:"has_smoke_screen_buff",label:"Is smoke screen active"}]},{title:"Arrow Shot",condition:n=>this.isSkillEquipped(n,c.iHO.Huntress,3),configurations:[{type:"number",key:"rebounds_before_hit",label:"Number of rebounds before hit"},{type:"number",key:"pierces_before_hit",label:"Number of enemies pierced before hit"},{type:"boolean",key:"is_first_arrow_shot_hit",label:"Is arrow shot hiting for the first time",info:"Used to compute effects on first hit and before the first hit"},{type:"boolean",key:"target_is_tracked",label:"Is your target tracked"},{type:"boolean",key:"recent_delighted_arrow_shot",label:"Did you cast arrow shot while delighted recently"}]},{title:"Rain of Arrows",condition:n=>this.isSkillEquipped(n,c.iHO.Huntress,4),configurations:[{type:"number",key:"delightful_rain_stacks",label:"Number of delightful rain stacks"},{type:"number",key:"enemies_in_rain_of_arrow",label:"Number of enemies inside your rain of arrow"},{type:"boolean",key:"is_last_volley",label:"Is it the last volley"}]},{title:"Stab",condition:n=>this.isSkillEquipped(n,c.iHO.Huntress,5),configurations:[{type:"boolean",key:"has_ancestral_stab_slash_buff",label:"Is ancestral stab slash active"}]},{title:"Fist of the wild",condition:n=>this.isSkillEquipped(n,c.iHO.Huntress,7),configurations:[{type:"number",key:"target_latent_storm_stacks",label:"Number of latent storms on your target"},{type:"number",key:"enemies_affected_by_latent_storm",label:"Number of enemies affected by latent storm"}]},{title:"Void Arrow",condition:n=>this.isSkillEquipped(n,c.iHO.Huntress,8),configurations:[{type:"boolean",key:"void_arrow_fully_charged",label:"Is void arrow fully charged"}]},{title:"Immortal Arrow",condition:n=>this.isSkillEquipped(n,c.iHO.Huntress,10),configurations:[{type:"number",key:"exhilerating_senses_stacks",label:"Number of exhilerating sense stacks"},{type:"number",key:"impatient_arrow_stacks",label:"Number of impatient arrow stacks"}]},{title:"Mage",condition:n=>n.heroClass===c.iHO.Mage,configurations:[{type:"number",key:"arcanic_emblems",label:"Number of arcanic emblems"},{type:"number",key:"temporal_emblems",label:"Number of temporal emblems"},{type:"number",key:"obliteration_emblems",label:"Number of obliteration emblems"},{type:"boolean",key:"is_remnant",label:"Is your skill a remnant version"},{type:"boolean",key:"target_is_time_locked",label:"Is your target time locked"},{type:"boolean",key:"next_cast_is_new_emblem",label:"Next cast on an emblem you do not have"}]},{title:"Wall of Omen",condition:n=>this.isSkillEquipped(n,c.iHO.Mage,0),configurations:[{type:"number",key:"invigorate_stacks",label:"Number of invigorate stacks"},{type:"boolean",key:"projectile_passed_through_wall_of_omen",label:"Did your projectile passed through Wall of Omen"},{type:"boolean",key:"has_speed_gate_buff",label:"Did your hero passed through Wall of Omen"}]},{title:"Arcane Barrier",condition:n=>this.isSkillEquipped(n,c.iHO.Mage,2),configurations:[{type:"boolean",key:"is_channeling_arcane_barrier",label:"Are you channeling Arcane Barrier"}]},{title:"Ray of Obliteration",condition:n=>this.isSkillEquipped(n,c.iHO.Mage,4),configurations:[{type:"number",key:"ray_of_obliteration_power",label:"Number of Ray of Obliteration power"},{type:"boolean",key:"is_channeling_ray_of_obliteration",label:"Are you channeling Ray of Obliteration"},{type:"boolean",key:"ray_of_obliteration_is_short",label:"Are you casting a short ray"}]},{title:"Book Smash",condition:n=>this.isSkillEquipped(n,c.iHO.Mage,5),configurations:[{type:"boolean",key:"is_triggered_by_book_smash",label:"Is inner fire and overdrive triggered by book smash"}]},{title:"Rift Nova",condition:n=>this.isSkillEquipped(n,c.iHO.Mage,6),configurations:[{type:"number",key:"high_spirit_stacks",label:"Number of high spirit stacks"},{type:"boolean",key:"rift_nova_fully_charged",label:"Is Rift Nova fully charged"},{type:"boolean",key:"target_has_remnant_vulnerability",label:"Is your target affected by remnant vulnerability"}]},{title:"Chrono-Puncture",condition:n=>this.isSkillEquipped(n,c.iHO.Mage,7),configurations:[{type:"number",key:"chrono_manamorphosis_stacks",label:"Number of chrono manamorphosis stacks"},{type:"number",key:"chrono_armor_stacks",label:"Number of chrono armor stacks"},{type:"number",key:"chrono_empower_stacks",label:"Number of chrono empower stacks"},{type:"number",key:"chrono_speed_stacks",label:"Number of chrono speed stacks"},{type:"number",key:"enemy_traumatized_stacks",label:"Number of traumatized stacks on your target"}]},{title:"Attunment Pulse",condition:n=>this.isSkillEquipped(n,c.iHO.Mage,8),configurations:[{type:"enum",key:"attunment_pulse_current_school",label:"Current school",values:[{value:c.HSy.Arcanic,label:"Arcanic"},{value:c.HSy.Temporal,label:"Temporal"},{value:c.HSy.Obliteration,label:"Obliteration"}]},{type:"boolean",key:"target_has_arcane_discordance",label:"Does your target have arcane discordance"},{type:"boolean",key:"target_has_temporal_discordance",label:"Does your target have temporal discordance"},{type:"boolean",key:"target_has_obliteration_discordance",label:"Does your target have obliteration discordance"}]},{title:"Arcane Breach",condition:n=>this.isSkillEquipped(n,c.iHO.Mage,9),configurations:[{type:"number",key:"enemies_in_breach_range",label:"Number of enemies in your breachs"},{type:"number",key:"arcane_flux_stacks",label:"Number of arcane flux stacks"},{type:"number",key:"arcane_breach_collision_stacks",label:"Number of arcane skills that collided with your breach"},{type:"number",key:"temporal_breach_collision_stacks",label:"Number of temporal skills that collided with your breach"},{type:"number",key:"obliteration_breach_collision_stacks",label:"Number of obliteration skills that collided with your breach"},{type:"boolean",key:"clone_is_in_breach_range",label:"Is your clone inside a breach"},{type:"boolean",key:"target_is_in_breach_range",label:"Is your target inside a breach"}]}],this.config=null}ngOnInit(){this.config=this.generateConfigurationForm(),this.config.valueChanges.subscribe(()=>this.updateConfiguration())}generateConfigurationForm(){let t={};const n=this.buildStorageService.getBuild(),i=Object.entries(null!==n?n.configuration:c.g5j);for(const r of i){const[s,g]=r;let p=[...(0,c.BeF)(this.EXTRA_VALIDATORS[s],[])];this.NON_REQUIRED_CONFIGURATION.includes(s)||p.push(l.kI.required),"number"==typeof g&&p.push(l.kI.min(0)),t[s]=new l.NI(g,p)}return new l.cw(t)}updateConfiguration(){null!==this.config&&Object.keys(this.config.controls).forEach(n=>{const i=this.config.get(n).errors;null!=i&&Object.keys(i).forEach(r=>{console.log("Key control: "+n+", keyError: "+r+", err value: ",i[r])})});const t=this.buildStorageService.getBuild();null!==this.config&&null!==t&&this.config.valid&&(t.configuration=this.config.value,this.buildStorageService.saveBuild())}getControl(t){return null===this.config?null:this.config.get(t.key)}isGroupValid(t){const n=this.buildStorageService.getLayer();return null!==n&&t.condition(n.character)}hasActivable(t,n){return[...t.reaper.activables,...c.PLi.map(r=>{var s,g;return null===(g=null===(s=t.gear[r])||void 0===s?void 0:s.legendaryEffect)||void 0===g?void 0:g.activable}).filter(c.BXh)].some(r=>r.id===n)}isSkillEquipped(t,n,i){return t.heroClass===n&&[t.primarySkill,t.secondarySkill,t.supportSkill].filter(c.BXh).some(r=>r.id===i)}isAttributeAllocated(t,n){return t.attributes.allocated[n].rank>0}isAncestralLegacyEquipped(t,n){return t.ancestralLegacies.activeAncestralLegacies.includes(n)}hasLegendaryEffect(t,n){return c.PLi.map(i=>{var r;return null===(r=t.gear[i])||void 0===r?void 0:r.legendaryEffect}).filter(c.BXh).some(i=>i.id===n)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-config"]],features:[e.qOj],decls:4,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"section"],[3,"control","config",4,"ngFor","ngForOf"],[3,"control","config"]],template:function(t,n){1&t&&(e.TgZ(0,"main"),e.YNc(1,kn,3,1,"mat-card",0),e.YNc(2,An,3,1,"mat-card",0),e.YNc(3,Un,3,1,"mat-card",0),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",null!==n.config),e.xp6(1),e.Q6J("ngIf",null!==n.config),e.xp6(1),e.Q6J("ngIf",null!==n.config))},dependencies:[d.sg,d.O5,x.a8,x.dn,yn],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}"]}),a})();var b=h(2525),ce=h(4344);let Jn=(()=>{class a{constructor(t,n,i,r,s){this.slormancerItemService=n,this.slormancerCharacterBuilderService=i,this.slormancerCharacterUpdaterService=r,this.slormancerCharacterComparatorService=s;const g=this.slormancerCharacterBuilderService.getCharacterClone(t.character),p=this.slormancerCharacterBuilderService.getCharacterClone(t.character);g.gear[t.slot]=this.slormancerItemService.getEquipableItemClone(t.left),p.gear[t.slot]=this.slormancerItemService.getEquipableItemClone(t.right),this.slormancerCharacterUpdaterService.updateCharacter(g,t.config),this.slormancerCharacterUpdaterService.updateCharacter(p,t.config),this.left=t.left,this.right=t.right,this.differences=this.slormancerCharacterComparatorService.compareCharacters(g,p)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.WI),e.Y36(c.SgH),e.Y36(c.oYj),e.Y36(c.Pdp),e.Y36(c.PeY))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compare-item-modal"]],decls:8,vars:6,consts:[["mat-dialog-title",""],[1,"item"],[3,"item","equipped"],[3,"differences"],[3,"item"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"div",1),e._UZ(4,"app-item-view",2),e.qZA(),e._UZ(5,"app-compare-view",3),e.TgZ(6,"div",1),e._UZ(7,"app-item-view",4),e.qZA()()),2&t&&(e.xp6(1),e.AsE("",n.left.name," - ",n.right.name,""),e.xp6(3),e.Q6J("item",n.left)("equipped",!0),e.xp6(1),e.Q6J("differences",n.differences),e.xp6(2),e.Q6J("item",n.right))},dependencies:[u.uh,u.xY,ce.F,re],styles:["h2[_ngcontent-%COMP%]{display:none;text-align:center}@media (max-width: 992px){h2[_ngcontent-%COMP%]{display:block}}mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:none}mat-dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:block}}@media (max-width: 374px){mat-dialog-content[_ngcontent-%COMP%]   app-compare-view[_ngcontent-%COMP%]{width:100%}}mat-dialog-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:370px;min-width:380px;overflow-y:auto}"]}),a})();function En(a,o){if(1&a&&(e.TgZ(0,"button",3),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.Q6J("mat-dialog-close",t),e.xp6(1),e.Oqu(t)}}let Rn=(()=>{class a{constructor(t){this.dialogRef=t,this.EQUIPABLE_ITEM_BASE_VALUES=c.liR}selectBase(t){this.dialogRef.close(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-base-choice-modal"]],decls:7,vars:2,consts:[["mat-dialog-title",""],["mat-flat-button","","color","primary",3,"mat-dialog-close",4,"ngFor","ngForOf"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","color","primary",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Choose a base for your item"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.YNc(3,En,2,2,"button",1),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",2),e._uU(6,"Cancel"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.EQUIPABLE_ITEM_BASE_VALUES),e.xp6(2),e.Q6J("mat-dialog-close",null))},dependencies:[d.sg,S.lW,u.ZT,u.uh,u.xY,u.H8],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}"]}),a})();var Bn=h(3761);let Qn=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-remove-confirm-modal"]],decls:7,vars:2,consts:[["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content"),e._uU(1," Are you sure you want to remove this item ?\n"),e.qZA(),e.TgZ(2,"mat-dialog-actions")(3,"button",0),e._uU(4,"Cancel"),e.qZA(),e.TgZ(5,"button",1),e._uU(6,"Remove"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[S.lW,u.ZT,u.xY,u.H8]}),a})();function Fn(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"img",4)(2,"img",4),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("src",t.item.itemIconBackground,e.LSH),e.xp6(1),e.Q6J("src",t.item.icon,e.LSH)}}function Hn(a,o){if(1&a&&e._UZ(0,"img",4),2&a){const t=e.oxw();e.MGl("src","assets/img/icon/item/",t.base,"/empty.png",e.LSH)}}function Yn(a,o){if(1&a&&e._UZ(0,"app-item-view",10),2&a){const t=e.oxw(2);e.Q6J("item",t.item)("details",!1)}}function Dn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.equip())}),e.TgZ(1,"mat-icon"),e._uU(2,"arrow_back"),e.qZA(),e._uU(3,"Equip item"),e.qZA()}}function Vn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.unequip())}),e.TgZ(1,"mat-icon"),e._uU(2,"arrow_forward"),e.qZA(),e._uU(3,"Unequip item"),e.qZA()}}function jn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.edit())}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA(),e._uU(3,"Create item"),e.qZA()}}function Gn(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1,"(Left slot)"),e.qZA())}function Kn(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1,"(Right slot)"),e.qZA())}function Xn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.compareWithSlot(r))}),e.TgZ(1,"mat-icon"),e._uU(2,"compare_arrows"),e.qZA(),e._uU(3,"Compare "),e.YNc(4,Gn,2,0,"span",2),e.YNc(5,Kn,2,0,"span",2),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(4),e.Q6J("ngIf",t===n.GearSlot.LeftRing),e.xp6(1),e.Q6J("ngIf",t===n.GearSlot.RightRing)}}function $n(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.edit())}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3,"Edit item"),e.qZA()}}function zn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.take())}),e.TgZ(1,"mat-icon"),e._uU(2,"content_cut"),e.qZA(),e._uU(3,"Move item"),e.qZA()}}function Wn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.copy())}),e.TgZ(1,"mat-icon"),e._uU(2,"content_copy"),e.qZA(),e._uU(3,"Copy item"),e.qZA()}}function ea(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.remove())}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e._uU(3,"Remove item"),e.qZA()}}function ta(a,o){if(1&a&&(e.YNc(0,Dn,4,0,"button",11),e.YNc(1,Vn,4,0,"button",11),e.YNc(2,jn,4,0,"button",11),e.YNc(3,Xn,6,2,"button",12),e.YNc(4,$n,4,0,"button",11),e.YNc(5,zn,4,0,"button",11),e.YNc(6,Wn,4,0,"button",11),e.YNc(7,ea,4,0,"button",11)),2&a){const t=e.oxw(2);e.Q6J("ngIf",null!==t.item&&null===t.base),e.xp6(1),e.Q6J("ngIf",null!==t.item&&null!==t.base),e.xp6(1),e.Q6J("ngIf",null===t.item),e.xp6(1),e.Q6J("ngForOf",t.comparableGearSlots),e.xp6(1),e.Q6J("ngIf",null!==t.item),e.xp6(1),e.Q6J("ngIf",null!==t.item),e.xp6(1),e.Q6J("ngIf",null!==t.item),e.xp6(1),e.Q6J("ngIf",null!==t.item)}}function na(a,o){if(1&a&&(e.ynx(0),e.YNc(1,Yn,1,2,"ng-template",5),e._UZ(2,"div",6),e.TgZ(3,"mat-menu",7,8),e.YNc(5,ta,8,8,"ng-template",9),e.qZA(),e.BQk()),2&a){const t=e.MAs(4),n=e.oxw(),i=e.MAs(1);e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",!n.isDragging&&n.isMouseOver)("cdkConnectedOverlayOrigin",i),e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.Q6J("overlapTrigger",!0)}}let le=(()=>{class a extends O.B{constructor(t,n,i,r,s,g){super(),this.dialog=t,this.itemMoveService=n,this.searchService=i,this.slormancerCharacterBuilderService=r,this.slormancerItemService=s,this.buildStorageService=g,this.GearSlot=c.SHB,this.character=null,this.item=null,this.base=null,this.readonly=!1,this.changed=new e.vpe,this.menu=null,this.isDragging=!1,this.isMouseOver=!1,this.isItemCompatible=!1,this.isDraggedItem=!1,this.hiddenBySearch=!1,this.comparableGearSlots=[],this.itemMoveService.draggingItem.pipe((0,M.R)(this.unsubscribe)).subscribe(p=>{this.isDragging=p,this.isDraggedItem=this.itemMoveService.isHoldItem(this.item),this.isItemCompatible=this.itemMoveService.isDragItemCompatible(this.item,this.base)}),this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(()=>this.updateSearch())}onMouseOver(){this.isMouseOver=!0}onMouseLeave(){this.isMouseOver=!1}onMouseDown(t){return 0===t.button&&!this.readonly&&this.take(),!1}onMouseUp(t){return 0===t.button&&!this.readonly&&(this.isDragging?this.itemMoveService.swap(this.item,this.base,(n,i)=>this.moveCallback(n,i)):this.edit()),!1}onMouseContextMenu(){return this.itemMoveService.releaseHoldItem(),this.menu&&!this.readonly&&(this.updateComparableSlots(),this.menu.openMenu()),!1}ngOnInit(){}ngOnChanges(){this.updateSearch()}isMenuOpen(){return null!=this.menu&&this.menu.menuOpen}updateComparableSlots(){this.comparableGearSlots=[];const t=this.character,n=this.item;null!==t&&null!==n&&null===this.base&&(this.comparableGearSlots=c.PLi.filter(i=>{const r=t.gear[i];return null!==r&&r.base===n.base}))}updateSearch(){this.hiddenBySearch=null!==this.item&&this.searchService.hasSearch()&&!this.searchService.itemMatchSearch(this.item)}moveCallback(t,n){t&&this.changed.emit(n),this.isDraggedItem=!1,this.isItemCompatible=!1}getItemEditModalData(t,n){const i=this.slormancerCharacterBuilderService.getCharacterClone(t),r=c.PLi.find(p=>t.gear[p]===n),s=r?i.gear[r]:null;return{character:i,item:null!==s?s:this.slormancerItemService.getEquipableItemClone(n),maxLevel:i.level}}edit(t=this.item){const n=this.character;if(null!==n)if(null===t)null!==this.base?this.edit(this.slormancerItemService.getEmptyEquipableItem(this.base,n.heroClass,n.level)):this.dialog.open(Rn).afterClosed().subscribe(i=>{null!=i&&this.edit(this.slormancerItemService.getEmptyEquipableItem(i,n.heroClass,n.level))});else{const i=this.getItemEditModalData(n,t);this.dialog.open(Bn.F,{data:i,width:"80vw",maxWidth:"1000px"}).afterClosed().subscribe(r=>{void 0!==r&&this.changed.emit(r)})}}take(){null!==this.item&&this.itemMoveService.hold(this.item,this.base,(t,n)=>this.moveCallback(t,n))}copy(){if(null!==this.item){const t=this.slormancerItemService.getEquipableItemClone(this.item);this.itemMoveService.hold(t,t.base)}}remove(){this.dialog.open(Qn).afterClosed().subscribe(t=>{!0===t&&this.changed.emit(null)})}equip(){null!==this.item&&this.itemMoveService.equip(this.item,(t,n)=>this.moveCallback(t,n))}unequip(){null!==this.item&&this.itemMoveService.moveToStash(this.item,(t,n)=>this.moveCallback(t,n))}compareWithSlot(t){if(null!==this.item&&null!==this.character){const n=this.character.gear[t],i=this.buildStorageService.getBuild();null!==n&&null!==i&&null!==i.configuration&&this.dialog.open(Jn,{data:{character:this.character,slot:t,config:i.configuration,left:n,right:this.item}})}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.uw),e.Y36(A),e.Y36(q.o),e.Y36(c.oYj),e.Y36(c.SgH),e.Y36(C.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-slot"]],viewQuery:function(t,n){if(1&t&&e.Gf(b.p6,5),2&t){let i;e.iGM(i=e.CRH())&&(n.menu=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onMouseOver()})("mouseleave",function(){return n.onMouseLeave()})("mousedown",function(r){return n.onMouseDown(r)})("mouseup",function(r){return n.onMouseUp(r)})("contextmenu",function(){return n.onMouseContextMenu()})},inputs:{character:"character",item:"item",base:"base",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj,e.TTD],decls:5,vars:15,consts:[["cdkOverlayOrigin","",1,"item"],["trigger","cdkOverlayOrigin"],[4,"ngIf"],[3,"src",4,"ngIf"],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"matMenuTriggerFor"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],[3,"item","details"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,Fn,3,2,"ng-container",2),e.YNc(3,Hn,1,1,"img",3),e.YNc(4,na,6,4,"ng-container",2),e.qZA()),2&t&&(e.ekj("readonly",n.readonly)("forced-base-compatible",n.isItemCompatible&&null!==n.base)("drop-compatible",!n.isDraggedItem&&n.isMouseOver&&n.isDragging&&n.isItemCompatible)("drop-incompatible",!n.isDraggedItem&&n.isMouseOver&&n.isDragging&&!n.isItemCompatible)("is-being-dragged",n.isDraggedItem&&n.isDragging)("hidden-search",n.hiddenBySearch),e.xp6(2),e.Q6J("ngIf",null!==n.item),e.xp6(1),e.Q6J("ngIf",null===n.item&&null!==n.base),e.xp6(1),e.Q6J("ngIf",n.isMouseOver||n.isMenuOpen()))},dependencies:[d.sg,d.O5,T.Hw,b.VK,b.OP,b.p6,b.KA,y.pI,y.xu,ce.F],styles:["[_nghost-%COMP%]{width:56px;min-width:56px;height:56px;min-height:56px}.item[_ngcontent-%COMP%]{width:56px;min-width:56px;min-height:56px;border:4px solid black;position:relative;background-color:#131313}.item[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.item.forced-base-compatible[_ngcontent-%COMP%]{border-color:#b7ffd2b3}.item.drop-compatible[_ngcontent-%COMP%]{border-color:#b7ffd2}.item.drop-incompatible[_ngcontent-%COMP%]{border-color:#f44336}.item.is-being-dragged[_ngcontent-%COMP%]{opacity:.3}.item.hidden-search[_ngcontent-%COMP%]{opacity:.2}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:0;right:0}app-item-view[_ngcontent-%COMP%]{width:350px}"]}),a})();var G=h(1671),se=h(9762),K=h(461);function aa(a,o){if(1&a&&(e.TgZ(0,"mat-form-field",8)(1,"mat-label"),e._uU(2,"Reaper effects base affinity"),e.qZA(),e._UZ(3,"input",19),e.TgZ(4,"mat-icon",20),e._uU(5,"info"),e.qZA(),e.TgZ(6,"mat-error"),e._uU(7),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(7),e.hij("Base effect affinity must be between 0 and ",t.MAX_EFFECT_AFFINITY_BASE,"")}}function ia(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e._UZ(1,"input",2),e.TgZ(2,"mat-dialog-content")(3,"div",3),e._UZ(4,"app-reaper-view",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6),e._UZ(7,"app-search-select",7),e.qZA(),e.TgZ(8,"div",6)(9,"mat-form-field",8)(10,"mat-label"),e._uU(11,"Reaper level"),e.qZA(),e._UZ(12,"input",9),e.TgZ(13,"mat-error"),e._uU(14),e.qZA()(),e.TgZ(15,"mat-form-field",8)(16,"mat-label"),e._uU(17,"Reaper mastery level"),e.qZA(),e._UZ(18,"input",10),e.TgZ(19,"mat-error"),e._uU(20),e.qZA()()(),e.TgZ(21,"div",6)(22,"mat-form-field",8)(23,"mat-label"),e._uU(24,"Reaper kills (base)"),e.qZA(),e._UZ(25,"input",11),e.TgZ(26,"mat-error"),e._uU(27,"Kills must be >= 0"),e.qZA()(),e.TgZ(28,"mat-form-field",8)(29,"mat-label"),e._uU(30,"Reaper kills (primordial)"),e.qZA(),e._UZ(31,"input",12),e.TgZ(32,"mat-error"),e._uU(33,"Kills must be >= 0"),e.qZA()()(),e.TgZ(34,"div",6)(35,"mat-form-field",8)(36,"mat-label"),e._uU(37,"Reaper base affinity"),e.qZA(),e._UZ(38,"input",13),e.TgZ(39,"mat-error"),e._uU(40),e.qZA()(),e.YNc(41,aa,8,1,"mat-form-field",14),e.qZA(),e.TgZ(42,"div",6)(43,"mat-checkbox",15),e._uU(44,"Primordial"),e.qZA()()()(),e.TgZ(45,"mat-dialog-actions")(46,"button",16),e._uU(47,"Cancel"),e.qZA(),e.TgZ(48,"button",17),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.reset())}),e._uU(49,"Reset"),e.qZA(),e.TgZ(50,"button",18),e._uU(51,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("reaper",t.reaper),e.xp6(3),e.Q6J("control",t.getReaperControl())("options",t.options)("noErrorPadding",!0),e.xp6(7),e.hij("Level must be between 1 and ",t.reaper.maxLevel,""),e.xp6(6),e.hij("Level must be between 0 and ",t.MAX_REAPER_LEVEL,""),e.xp6(20),e.hij("Base affinity must be between 0 and ",t.MAX_REAPER_AFFINITY_BASE,""),e.xp6(1),e.Q6J("ngIf",t.useDifferentAffinityForEffects(t.reaper))}}let oa=(()=>{class a{constructor(t,n,i,r,s,g,p){this.dialogRef=t,this.slormancerReaperService=n,this.slormancerRuneService=i,this.slormancerCharacterUpdaterService=r,this.formOptionsService=s,this.buildStorageService=g,this.MAX_REAPER_LEVEL=c.KWn,this.MAX_REAPER_AFFINITY_BASE=c.DxO,this.MAX_EFFECT_AFFINITY_BASE=c.Ud_,this.options=[],this.reaper=null,this.form=new l.cw({baseLevel:new l.NI(null,[l.kI.required,l.kI.min(1),this.getReaperMaxLevelValidator()]),masteryLevel:new l.NI(null,[l.kI.required,l.kI.min(0),l.kI.max(c.KWn)]),baseKills:new l.NI(null,[l.kI.required,l.kI.min(0)]),primordialKills:new l.NI(null,[l.kI.required,l.kI.min(0)]),reaperAffinity:new l.NI(null,[l.kI.required,l.kI.min(0),l.kI.max(c.DxO)]),effectAffinity:new l.NI(null,[l.kI.required,l.kI.min(0),l.kI.max(c.Ud_)]),primordial:new l.NI(null,l.kI.required),reaper:new l.NI(null,l.kI.required)}),this.originalReaper=this.slormancerReaperService.getReaperClone(p.reaper),this.character=p.character,this.reaper=p.reaper,this.form.valueChanges.subscribe(()=>{this.updatePreview()}),this.form.controls.primordial.valueChanges.subscribe(m=>{this.options=this.formOptionsService.getReaperOptions(this.originalReaper.weaponClass,!0===m)}),this.reset(),this.updatePreview()}reset(){null!==this.reaper&&(this.reaper=Object.assign(this.reaper,this.originalReaper),this.form.reset({baseKills:this.reaper.baseKills,baseLevel:this.reaper.baseLevel,masteryLevel:this.reaper.masteryLevel,effectAffinity:this.reaper.baseEffectAffinity,reaperAffinity:this.reaper.baseReaperAffinity,primordial:this.reaper.primordial,primordialKills:this.reaper.primordialKills,reaper:this.reaper.id}))}submit(){this.form.valid&&this.dialogRef.close(this.reaper)}getReaperControl(){return this.form.get("reaper")}useDifferentAffinityForEffects(t){return this.slormancerReaperService.useDifferentAffinityForEffects(t)}updatePreview(){if(this.form.valid&&null!==this.reaper){const t=this.form.getRawValue();if(t.reaper===this.reaper.id)this.reaper.id=t.reaper,this.reaper.primordial=t.primordial,this.reaper.baseLevel=t.baseLevel,this.reaper.masteryLevel=t.masteryLevel,this.reaper.kills=t.baseKills,this.reaper.primordialKills=t.primordialKills,this.reaper.baseReaperAffinity=t.reaperAffinity,this.reaper.baseEffectAffinity=t.effectAffinity;else{const i=this.slormancerReaperService.getReaperById(t.reaper,this.reaper.weaponClass,t.primordial,t.baseLevel,this.reaper.bonusLevel,t.baseKills,t.primordialKills,t.reaperAffinity,t.effectAffinity,this.reaper.bonusAffinity);null!==i&&Object.assign(this.reaper,i)}this.useDifferentAffinityForEffects(this.reaper)||(this.form.controls.effectAffinity.setValue(this.form.controls.reaperAffinity.value,{emitEvent:!1}),this.reaper.baseEffectAffinity=this.reaper.baseReaperAffinity);const n=this.buildStorageService.getBuild();this.slormancerReaperService.updateReaperModel(this.reaper),null!==this.character.runes.effect&&this.slormancerRuneService.updateRuneModel(this.character.runes.effect,this.reaper.id),this.slormancerCharacterUpdaterService.updateCharacter(this.character,null!==n?n.configuration:c.g5j,!1),this.slormancerReaperService.updateReaperView(this.reaper),t.baseLevel!==this.reaper.baseLevel&&this.form.patchValue({baseLevel:this.reaper.baseLevel},{emitEvent:!1})}}getReaperMaxLevelValidator(){return t=>null===this.reaper?{}:l.kI.max(this.reaper.maxLevel)(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.so),e.Y36(c.IxD),e.Y36(c._VP),e.Y36(c.Pdp),e.Y36(G.K),e.Y36(C.x),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-reaper-edit-modal"]],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","submit",4,"ngIf"],["autocomplete","off",3,"formGroup","submit"],["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"preview"],[3,"reaper"],[1,"form"],[1,"stat-line"],["label","Reaper base",3,"control","options","noErrorPadding"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","baseLevel"],["matInput","","type","number","step","0","formControlName","masteryLevel"],["matInput","","type","number","step","1","formControlName","baseKills"],["matInput","","type","number","step","1","formControlName","primordialKills"],["matInput","","type","number","step","1","formControlName","reaperAffinity"],["appearance","outline",4,"ngIf"],["color","primary","formControlName","primordial"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"],["matInput","","type","number","step","1","formControlName","effectAffinity"],["matSuffix","","matTooltip","This reaper use a different affinity value for it's effects"]],template:function(t,n){1&t&&e.YNc(0,ia,52,9,"form",0),2&t&&e.Q6J("ngIf",null!==n.form&&null!==n.reaper)},dependencies:[d.O5,S.lW,T.Hw,u.ZT,u.xY,u.H8,_.TO,_.KE,_.hX,_.R9,w.Nt,j.oG,Z.gM,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,se.b,K.a],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:16px;flex-grow:1}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   app-search-select[_ngcontent-%COMP%]{padding-bottom:16px}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-basis:auto}}}"]}),a})();const ra=["reaperView"];function ca(a,o){if(1&a&&e._UZ(0,"app-reaper-view",7,8),2&a){const t=e.oxw(2);e.Q6J("reaper",t.character.reaper)("tooltip",!0)}}function la(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.edit())}),e._UZ(1,"div",2,3)(3,"div",4),e.ynx(4),e.TgZ(5,"img",5),e.NdJ("wheel",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.handlescroll(i))}),e.qZA(),e.YNc(6,ca,2,2,"ng-template",6),e.BQk(),e.qZA()}if(2&a){const t=e.MAs(2),n=e.oxw();e.ekj("readonly",n.readonly)("hidden-search",n.hiddenBySearch),e.xp6(5),e.ekj("primordial-effect",n.character.reaper.primordial),e.Q6J("src",n.character.reaper.icon,e.LSH),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",n.showOverlay)("cdkConnectedOverlayOrigin",t)}}let ge=(()=>{class a extends O.B{constructor(t,n,i,r){super(),this.dialog=t,this.slormancerCharacterBuilderService=n,this.searchService=i,this.itemMoveService=r,this.character=null,this.readonly=!1,this.reaperView=null,this.changed=new e.vpe,this.showOverlay=!1,this.hiddenBySearch=!1,this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(()=>this.updateSearch())}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}onMouseContextMenu(){return this.readonly||this.itemMoveService.releaseHoldItem(),!1}ngOnChanges(){this.updateSearch()}updateSearch(){this.hiddenBySearch=null!==this.character&&this.searchService.hasSearch()&&!this.searchService.reaperMatchSearch(this.character.reaper)}edit(){if(null!==this.character&&!this.readonly){const t=this.slormancerCharacterBuilderService.getCharacterClone(this.character);this.dialog.open(oa,{data:{reaper:t.reaper,character:t}}).afterClosed().subscribe(i=>{i&&this.changed.emit(i)})}}handlescroll(t){return this.reaperView&&this.reaperView.scroll(t),!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.uw),e.Y36(c.oYj),e.Y36(q.o),e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-reaper-slot"]],viewQuery:function(t,n){if(1&t&&e.Gf(ra,5),2&t){let i;e.iGM(i=e.CRH())&&(n.reaperView=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})("contextmenu",function(){return n.onMouseContextMenu()})},inputs:{character:"character",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:[["class","reaper",3,"readonly","hidden-search","click",4,"ngIf"],[1,"reaper",3,"click"],["cdkOverlayOrigin","",1,"overlay-position"],["trigger","cdkOverlayOrigin"],[1,"inner-slot"],[3,"src","wheel"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],["maxHeight","700px",3,"reaper","tooltip"],["reaperView",""]],template:function(t,n){1&t&&e.YNc(0,la,7,9,"div",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.O5,y.pI,y.xu,se.b],styles:[".reaper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-width:124px;min-height:124px;position:relative}.reaper[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.reaper.hidden-search[_ngcontent-%COMP%]{opacity:.2}.reaper[_ngcontent-%COMP%]   .overlay-position[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}.reaper[_ngcontent-%COMP%]   .inner-slot[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#1e1e1e;border:3px solid rgb(60,60,60)}.reaper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin-top:-12.5%;margin-left:-12.5%;image-rendering:pixelated;transform:scale(4)}.reaper-level[_ngcontent-%COMP%]{color:#fff;text-align:center;text-transform:uppercase}app-reaper-view[_ngcontent-%COMP%]{width:350px}"]}),a})();function sa(a,o){if(1&a&&e._UZ(0,"div",16),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.skill.genresLabel,e.oJD)}}function ga(a,o){if(1&a&&(e.TgZ(0,"mat-icon",20),e._uU(1,"info_outline"),e.qZA()),2&a){const t=e.oxw(3);e.Q6J("matTooltip",t.skill.cooldownDetailsLabel)}}function da(a,o){if(1&a&&(e.TgZ(0,"div",17),e._UZ(1,"span",18),e.YNc(2,ga,2,1,"mat-icon",19),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",t.skill.cooldownLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==t.skill.cooldownDetailsLabel)}}function ua(a,o){if(1&a&&e._UZ(0,"div",21),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.skill.fastLabel,e.oJD)}}function pa(a,o){if(1&a&&e._UZ(0,"div",22),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.skill.costLabel,e.oJD)}}function ma(a,o){if(1&a&&(e.TgZ(0,"span",23),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" + ",t.skill.bonusLevel,"")}}function _a(a,o){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.qZA()(),e.TgZ(7,"div",7),e.YNc(8,sa,1,1,"div",8),e.YNc(9,da,3,2,"div",9),e.YNc(10,ua,1,1,"div",10),e.YNc(11,pa,1,1,"div",11),e.qZA()(),e._UZ(12,"div",12)(13,"div",13),e.TgZ(14,"div",14),e._UZ(15,"img",6),e.YNc(16,ma,2,1,"span",15),e.qZA()()()),2&a){const t=e.oxw();e.Gre("skill slormancer-tooltip ",t.skill.damageTypes.length>0?t.skill.damageTypes[0]:"",""),e.xp6(1),e.Q6J("innerHTML",t.skill.nameLabel,e.oJD),e.xp6(5),e.Q6J("src","assets/img/icon/"+t.skill.icon+".png",e.LSH),e.xp6(2),e.Q6J("ngIf",null!==t.skill.genresLabel),e.xp6(1),e.Q6J("ngIf",null!==t.skill.cooldownLabel),e.xp6(1),e.Q6J("ngIf",null!==t.skill.fastLabel),e.xp6(1),e.Q6J("ngIf",null!==t.skill.costLabel),e.xp6(2),e.Q6J("innerHTML",t.skill.description,e.oJD),e.xp6(2),e.MGl("src","assets/img/icon/",t.skill.levelIcon,".png",e.LSH),e.xp6(1),e.Q6J("ngIf",t.skill.bonusLevel>0)}}let de=(()=>{class a{constructor(){this.skill=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-view"]],inputs:{skill:"skill"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head","inner-box",3,"innerHTML"],[1,"content","inner-box"],[1,"info"],[1,"visual"],[1,"icon"],[3,"src"],[1,"data"],["class","genre",3,"innerHTML",4,"ngIf"],["class","cooldown",4,"ngIf"],["class","fast",3,"innerHTML",4,"ngIf"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"separator"],[1,"description",3,"innerHTML"],[1,"bottom-level"],["class","bonus",4,"ngIf"],[1,"genre",3,"innerHTML"],[1,"cooldown"],[3,"innerHTML"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"fast",3,"innerHTML"],[1,"cost",3,"innerHTML"],[1,"bonus"]],template:function(t,n){1&t&&e.YNc(0,_a,17,12,"div",0),2&t&&e.Q6J("ngIf",null!==n.skill)},dependencies:[d.O5,T.Hw,Z.gM],styles:[".skill[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff;max-width:400px}.skill[_ngcontent-%COMP%]   .inner-box[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]:before{border-color:primary-color(400)}.skill[_ngcontent-%COMP%]  .value, .skill[_ngcontent-%COMP%]  .rank .current{color:#ce4607}.skill[_ngcontent-%COMP%]  .range, .skill[_ngcontent-%COMP%]  .range .value, .skill[_ngcontent-%COMP%]  .details, .skill[_ngcontent-%COMP%]  .details .value, .skill[_ngcontent-%COMP%]  .formula, .skill[_ngcontent-%COMP%]  .formula .value{color:#686868}.skill[_ngcontent-%COMP%]  .affixes .range, .skill[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.skill[_ngcontent-%COMP%]  .life{color:#257539}.skill[_ngcontent-%COMP%]  .mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value, .skill.mag[_ngcontent-%COMP%]  .rank .current{color:#bb1fe2}.skill.mag[_ngcontent-%COMP%]  .value.mana, .skill.mag[_ngcontent-%COMP%]  .rank .current.mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value.life, .skill.mag[_ngcontent-%COMP%]  .rank .current.life{color:#257539}.skill[_ngcontent-%COMP%]   .head.head[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.head[_ngcontent-%COMP%]{text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:20px;padding:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{display:flex;align-items:center}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border:3px solid rgb(190,135,31);min-width:60px;min-height:60px;width:60px;height:60px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black;image-rendering:pixelated;width:54px;height:54px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;text-transform:uppercase;height:100%;padding:5px 0;gap:5px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .cooldown[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .cooldown[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px;font-size:14px;line-height:14px;display:inline}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}"]}),a})();function ha(a,o){if(1&a&&e._UZ(0,"app-skill-view",9),2&a){const t=e.oxw(2);e.Q6J("skill",t.skill)}}function fa(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"img",7),e.YNc(2,ha,1,1,"ng-template",8),e.BQk()),2&a){const t=e.oxw(),n=e.MAs(1);e.xp6(1),e.Q6J("src","assets/img/icon/"+(t.support?t.skill.iconLarge:t.skill.icon)+".png",e.LSH),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",t.showOverlay)("cdkConnectedOverlayOrigin",n)}}function Ca(a,o){if(1&a&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.specializationName)}}function va(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.updateSkill(r))}),e.TgZ(1,"div",12),e._UZ(2,"img",13),e.TgZ(3,"div",14)(4,"div",15),e._uU(5),e.qZA(),e.YNc(6,Ca,2,1,"div",16),e.TgZ(7,"div",17),e._uU(8),e.qZA()()()()}if(2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.ekj("selected",n.isSelectedSkill(t)),e.xp6(1),e.ekj("support",n.support),e.Q6J("src","assets/img/icon/"+(n.support?t.iconLarge:t.icon)+".png",e.LSH),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",null!==t.specializationName),e.xp6(2),e.lnq("",n.MASTERY_LABEL,": ",t.level," / ",n.SKILL_MAX_MASTERY,"")}}function Ma(a,o){if(1&a&&e.YNc(0,va,9,10,"button",10),2&a){const t=e.oxw();e.Q6J("ngForOf",t.getAvailableSkills())}}let ue=(()=>{class a extends O.B{constructor(t,n){super(),this.buildStorageService=t,this.slormancerTranslateService=n,this.SKILL_MAX_MASTERY=c.DA7,this.MASTERY_LABEL=this.slormancerTranslateService.translate("tt_mastery"),this.skill=null,this.support=!1,this.readonly=!1,this.changed=new e.vpe,this.menu=null,this.showOverlay=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}ngOnInit(){}getAvailableSkills(){const t=this.buildStorageService.getLayer();let n=[];if(null!==t&&null!==t.character){const i=this.support?c.Wak.Support:c.Wak.Active;n=t.character.skills.map(r=>r.skill).filter(r=>i===r.type)}return n}isSelectedSkill(t){const n=this.buildStorageService.getLayer();return null!==n&&null!==n.character&&(n.character.primarySkill===t||n.character.secondarySkill===t||n.character.supportSkill===t)}updateSkill(t){this.skill!==t&&this.changed.emit(t)}openMenu(){return null!==this.menu&&!this.readonly&&this.menu.openMenu(),!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x),e.Y36(c.n6D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-slot"]],viewQuery:function(t,n){if(1&t&&e.Gf(b.p6,7),2&t){let i;e.iGM(i=e.CRH())&&(n.menu=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})},inputs:{skill:"skill",support:"support",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj],decls:7,vars:6,consts:[["cdkOverlayOrigin","",1,"skill",3,"contextmenu","click"],["trigger","cdkOverlayOrigin"],[4,"ngIf"],[3,"matMenuTriggerFor"],["yPosition","above",1,"skill-menu"],["menu","matMenu"],["matMenuContent",""],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"skill"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],[1,"skill-menu-entry"],[1,"skill",3,"src"],[1,"description"],[1,"name"],["class","specialization",4,"ngIf"],[1,"mastery"],[1,"specialization"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0,1),e.NdJ("contextmenu",function(){return n.openMenu()})("click",function(){return n.openMenu()}),e.YNc(2,fa,3,3,"ng-container",2),e._UZ(3,"div",3),e.TgZ(4,"mat-menu",4,5),e.YNc(6,Ma,1,1,"ng-template",6),e.qZA()()),2&t){const i=e.MAs(5);e.ekj("support",n.support)("readonly",n.readonly),e.xp6(2),e.Q6J("ngIf",null!==n.skill),e.xp6(1),e.Q6J("matMenuTriggerFor",i)}},dependencies:[d.sg,d.O5,b.VK,b.OP,b.p6,b.KA,y.pI,y.xu,de],styles:["[_nghost-%COMP%]{min-width:42px;height:42px;min-height:42px;overflow:hidden}.skill[_ngcontent-%COMP%]{width:42px;min-width:42px;height:42px;min-height:42px;border:4px solid black;position:relative;background-color:#131313}.skill.support[_ngcontent-%COMP%]{width:84px;min-width:84px}.skill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.locked){position:absolute;width:100%;height:100%}.skill[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:uppercase}.skill[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:-8px;left:0}.skill-menu-entry[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}.skill-menu-entry[_ngcontent-%COMP%]   .skill-icon[_ngcontent-%COMP%]{border:4px solid #353535}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .specialization[_ngcontent-%COMP%]{line-height:normal;font-weight:700;text-transform:uppercase}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .mastery[_ngcontent-%COMP%]{line-height:normal}.skill-menu-entry.selected[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{border-color:#edd371}.skill-menu-entry.selected[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .skill-menu-entry.selected[_ngcontent-%COMP%]   .specialization[_ngcontent-%COMP%]{color:#edd371}app-item-view[_ngcontent-%COMP%]{width:350px}"]}),a})();var ba=h(8003);function Oa(a,o){if(1&a&&e._UZ(0,"app-ancestral-legacy-view",11),2&a){const t=e.oxw(3);e.Q6J("ancestralLegacy",t.activable)("hideNextRank",!0)}}function xa(a,o){if(1&a&&e._UZ(0,"app-activable-view",12),2&a){const t=e.oxw(3);e.Q6J("activable",t.activable)}}function ya(a,o){if(1&a&&(e.YNc(0,Oa,1,2,"app-ancestral-legacy-view",9),e.YNc(1,xa,1,1,"app-activable-view",10)),2&a){const t=e.oxw(2);e.Q6J("ngIf",t.isAncestralLegacy(t.activable)),e.xp6(1),e.Q6J("ngIf",t.isActivable(t.activable))}}function Pa(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"img",7),e.YNc(2,ya,2,2,"ng-template",8),e.BQk()),2&a){const t=e.oxw(),n=e.MAs(1);e.xp6(1),e.Q6J("src",t.activable.icon,e.LSH),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",t.showOverlay)("cdkConnectedOverlayOrigin",n)}}function Sa(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.updateActivable(r))}),e.TgZ(1,"div",14),e._UZ(2,"img",19),e.TgZ(3,"div",16)(4,"div",20),e._uU(5),e.qZA()()()()}if(2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.ekj("selected",n.isSelectedActivable(t)),e.xp6(1),e.Q6J("src",t.icon,e.LSH),e.xp6(3),e.Oqu(t.name)}}function ka(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateActivable(null))}),e.TgZ(1,"div",14),e._UZ(2,"div",15),e.TgZ(3,"div",16)(4,"div",17),e._uU(5,"Remove activable"),e.qZA()()()(),e.YNc(6,Sa,6,4,"button",18)}if(2&a){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.getAvailableActivables())}}let pe=(()=>{class a extends O.B{constructor(t,n){super(),this.buildStorageService=t,this.itemMoveService=n,this.activable=null,this.readonly=!1,this.changed=new e.vpe,this.menu=null,this.showOverlay=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}onMouseContextMenu(){return this.itemMoveService.releaseHoldItem(),null!==this.menu&&!this.readonly&&this.menu.openMenu(),!1}onMouseClick(){return this.itemMoveService.releaseHoldItem(),null!==this.menu&&!this.readonly&&this.menu.openMenu(),!1}ngOnInit(){}isAncestralLegacy(t){return void 0!==t.element}isActivable(t){return void 0===t.element}getAvailableActivables(){let t=[];const n=this.buildStorageService.getLayer();if(null!==n){const i=[n.character.gear.amulet,n.character.gear.belt,n.character.gear.body,n.character.gear.boot,n.character.gear.bracer,n.character.gear.cape,n.character.gear.glove,n.character.gear.helm,n.character.gear.ring_l,n.character.gear.ring_r,n.character.gear.shoulder].map(p=>null!==p&&null!==p.legendaryEffect?p.legendaryEffect.activable:null).filter(c.BXh).sort((p,m)=>-(0,c.quX)(p.level,m.level)).filter((p,m,f)=>(0,c.mrA)(p,m,f,(P,v)=>P.id===v.id)),r=null===n.character.reaper?[]:n.character.reaper.activables;t=[...i,...[n.character.runes.activation,n.character.runes.effect,n.character.runes.enhancement].map(p=>null===p?null:p.activable).filter(c.BXh),...r,...n.character.ancestralLegacies.activeAncestralLegacies.map(p=>n.character.ancestralLegacies.ancestralLegacies[p]).filter(c.BXh).filter(p=>p.isActivable)]}return t}isSelectedActivable(t){const n=this.buildStorageService.getLayer();return null!==n&&(n.character.activable1===t||n.character.activable2===t||n.character.activable3===t||n.character.activable4===t)}updateActivable(t){this.activable!==t&&this.changed.emit(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x),e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-activable-slot"]],viewQuery:function(t,n){if(1&t&&e.Gf(b.p6,7),2&t){let i;e.iGM(i=e.CRH())&&(n.menu=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})("contextmenu",function(){return n.onMouseContextMenu()})("click",function(){return n.onMouseClick()})},inputs:{activable:"activable",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj],decls:7,vars:2,consts:[["cdkOverlayOrigin","",1,"skill"],["trigger","cdkOverlayOrigin"],[4,"ngIf"],[3,"matMenuTriggerFor"],["yPosition","above"],["menu","matMenu"],["matMenuContent",""],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"ancestralLegacy","hideNextRank",4,"ngIf"],[3,"activable",4,"ngIf"],[3,"ancestralLegacy","hideNextRank"],[3,"activable"],["mat-menu-item","",3,"click"],[1,"skill-menu-entry"],[1,"skill"],[1,"description"],[1,"subtitle"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"skill",3,"src"],[1,"name"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,Pa,3,3,"ng-container",2),e._UZ(3,"div",3),e.TgZ(4,"mat-menu",4,5),e.YNc(6,ka,7,1,"ng-template",6),e.qZA()()),2&t){const i=e.MAs(5);e.xp6(2),e.Q6J("ngIf",null!==n.activable),e.xp6(1),e.Q6J("matMenuTriggerFor",i)}},dependencies:[d.sg,d.O5,b.VK,b.OP,b.p6,b.KA,y.pI,y.xu,ba.K,D],styles:["[_nghost-%COMP%]{min-width:42px;height:42px;min-height:42px;display:block;overflow:hidden}.skill[_ngcontent-%COMP%]{width:42px;min-width:42px;height:42px;min-height:42px;border:4px solid black;position:relative;background-color:#131313}.skill.support[_ngcontent-%COMP%]{width:84px;min-width:84px}.skill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.skill-menu-entry[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}.skill-menu-entry[_ngcontent-%COMP%]   .skill-icon[_ngcontent-%COMP%]{border:4px solid #353535}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{line-height:normal;font-weight:700;text-transform:uppercase}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{line-height:normal}.skill-menu-entry.selected[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{border-color:#edd371;line-height:0}.skill-menu-entry.selected[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#edd371}app-item-view[_ngcontent-%COMP%]{width:350px}"]}),a})();function Ta(a,o){1&a&&e._UZ(0,"img",9)}function wa(a,o){1&a&&e._UZ(0,"img",9)}function Za(a,o){1&a&&e._UZ(0,"img",9)}function Aa(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"app-skill-slot",5),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updatePrimarySkill(i))}),e.qZA()(),e.YNc(5,Ta,1,0,"img",6),e.qZA(),e.TgZ(6,"div",3)(7,"div",4)(8,"app-skill-slot",5),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSecondarySkill(i))}),e.qZA()(),e.YNc(9,wa,1,0,"img",6),e.qZA(),e.TgZ(10,"div",3)(11,"div",4)(12,"app-skill-slot",7),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSupportSkill(i))}),e.qZA()(),e.YNc(13,Za,1,0,"img",6),e.qZA()(),e.TgZ(14,"div",2)(15,"div",3)(16,"div",4)(17,"app-activable-slot",8),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateActivable1(i))}),e.qZA()()(),e.TgZ(18,"div",3)(19,"div",4)(20,"app-activable-slot",8),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateActivable2(i))}),e.qZA()()(),e.TgZ(21,"div",3)(22,"div",4)(23,"app-activable-slot",8),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateActivable3(i))}),e.qZA()()(),e.TgZ(24,"div",3)(25,"div",4)(26,"app-activable-slot",8),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateActivable4(i))}),e.qZA()()()()()}if(2&a){const t=e.oxw();e.xp6(4),e.Q6J("skill",t.character.primarySkill),e.xp6(1),e.Q6J("ngIf",null!==t.character.primarySkill&&t.character.primarySkill.locked),e.xp6(3),e.Q6J("skill",t.character.secondarySkill),e.xp6(1),e.Q6J("ngIf",null!==t.character.secondarySkill&&t.character.secondarySkill.locked),e.xp6(3),e.Q6J("skill",t.character.supportSkill)("support",!0),e.xp6(1),e.Q6J("ngIf",null!==t.character.supportSkill&&t.character.supportSkill.locked),e.xp6(4),e.Q6J("activable",t.character.activable1),e.xp6(3),e.Q6J("activable",t.character.activable2),e.xp6(3),e.Q6J("activable",t.character.activable3),e.xp6(3),e.Q6J("activable",t.character.activable4)}}let qa=(()=>{class a extends O.B{constructor(t,n){super(),this.buildStorageService=t,this.slormancerCharacterModifierService=n,this.character=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.character=null!==t&&null!==t.character?t.character:null)}updatePrimarySkill(t){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,t),this.buildStorageService.saveLayer())}updateSecondarySkill(t){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,t),this.buildStorageService.saveLayer())}updateSupportSkill(t){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,t),this.buildStorageService.saveLayer())}updateActivable1(t){null!==this.character&&this.character.activable1!==t&&(null!==t&&(this.character.activable2===t?this.character.activable2=this.character.activable1:this.character.activable3===t?this.character.activable3=this.character.activable1:this.character.activable4===t&&(this.character.activable4=this.character.activable1)),this.character.activable1=t,this.buildStorageService.saveLayer())}updateActivable2(t){null!==this.character&&this.character.activable2!==t&&(null!==t&&(this.character.activable1===t?this.character.activable1=this.character.activable2:this.character.activable3===t?this.character.activable3=this.character.activable2:this.character.activable4===t&&(this.character.activable4=this.character.activable2)),this.character.activable2=t,this.buildStorageService.saveLayer())}updateActivable3(t){null!==this.character&&this.character.activable3!==t&&(null!==t&&(this.character.activable1===t?this.character.activable1=this.character.activable3:this.character.activable2===t?this.character.activable2=this.character.activable3:this.character.activable4===t&&(this.character.activable4=this.character.activable3)),this.character.activable3=t,this.buildStorageService.saveLayer())}updateActivable4(t){null!==this.character&&this.character.activable4!==t&&(null!==t&&(this.character.activable1===t?this.character.activable1=this.character.activable4:this.character.activable3===t?this.character.activable3=this.character.activable4:this.character.activable2===t&&(this.character.activable2=this.character.activable4)),this.character.activable4=t,this.buildStorageService.saveLayer())}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x),e.Y36(c.Y5A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-bar"]],features:[e.qOj],decls:1,vars:1,consts:[["class","skill-bar",4,"ngIf"],[1,"skill-bar"],[1,"skill-group"],[1,"skill-slot"],[1,"skill-slot-border"],[3,"skill","changed"],["class","locked","src","assets/img/icon//locked.png",4,"ngIf"],[3,"skill","support","changed"],[3,"activable","changed"],["src","assets/img/icon//locked.png",1,"locked"]],template:function(t,n){1&t&&e.YNc(0,Aa,27,11,"div",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.O5,ue,pe],styles:[".skill-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px;border:3px solid rgb(60,60,60);padding:4px}@media (max-width: 768px){.skill-bar[_ngcontent-%COMP%]{flex-direction:column}}.skill-bar[_ngcontent-%COMP%]   .skill-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px}.skill-bar[_ngcontent-%COMP%]   .skill-group[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]{position:relative}.skill-bar[_ngcontent-%COMP%]   .skill-group[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]   .skill-slot-border[_ngcontent-%COMP%]{border:3px solid rgb(60,60,60)}.skill-bar[_ngcontent-%COMP%]   .skill-group[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]   img.locked[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;pointer-events:none}"]}),a})();const Ia=["animation"];let La=(()=>{class a{constructor(){this.heroClass=null,this.suffix="",this.flipAnimation=!1,this.animation=null}mouseMoved(t){if(null!==this.animation){const r=this.animation.nativeElement.getBoundingClientRect().left+this.animation.nativeElement.clientWidth/2<t.clientX;this.flipAnimation!==r&&(this.flipAnimation=r)}}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character-animation"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ia,5),2&t){let i;e.iGM(i=e.CRH())&&(n.animation=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mousemove",function(r){return n.mouseMoved(r)},!1,e.Jf7)},inputs:{heroClass:"heroClass",suffix:"suffix"},decls:6,vars:10,consts:[[1,"character-animation"],["animation",""],[1,"idle-1",3,"src"],[1,"idle-2",3,"src"],[1,"idle-3",3,"src"],[1,"idle-4",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"img",2)(3,"img",3)(4,"img",4)(5,"img",5),e.qZA()),2&t&&(e.ekj("flip",n.flipAnimation),e.xp6(2),e.hYB("src","assets/img/character/idle/",n.heroClass,"/0",n.suffix?"_"+n.suffix:n.suffix,".png",e.LSH),e.xp6(1),e.hYB("src","assets/img/character/idle/",n.heroClass,"/1",n.suffix?"_"+n.suffix:n.suffix,".png",e.LSH),e.xp6(1),e.hYB("src","assets/img/character/idle/",n.heroClass,"/2",n.suffix?"_"+n.suffix:n.suffix,".png",e.LSH),e.xp6(1),e.hYB("src","assets/img/character/idle/",n.heroClass,"/3",n.suffix?"_"+n.suffix:n.suffix,".png",e.LSH))},styles:[".character-animation[_ngcontent-%COMP%]{position:relative;height:144px;width:88px}.character-animation.flip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scaleX(-1)}.character-animation[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;image-rendering:pixelated;animation-duration:1s;animation-iteration-count:infinite;animation-timing-function:linear}.character-animation[_ngcontent-%COMP%]   img.idle-1[_ngcontent-%COMP%]{animation-name:idle-1}.character-animation[_ngcontent-%COMP%]   img.idle-2[_ngcontent-%COMP%]{animation-name:idle-2}.character-animation[_ngcontent-%COMP%]   img.idle-3[_ngcontent-%COMP%]{animation-name:idle-3}.character-animation[_ngcontent-%COMP%]   img.idle-4[_ngcontent-%COMP%]{animation-name:idle-4}@keyframes idle-1{0%{opacity:1}25%{opacity:1}26%{opacity:0}99%{opacity:0}to{opacity:1}}@keyframes idle-2{0%{opacity:0}24%{opacity:0}25%{opacity:1}50%{opacity:1}51%{opacity:0}to{opacity:0}}@keyframes idle-3{0%{opacity:0}49%{opacity:0}50%{opacity:1}75%{opacity:1}76%{opacity:0}to{opacity:0}}@keyframes idle-4{0%{opacity:1}1%{opacity:0}74%{opacity:0}75%{opacity:1}to{opacity:1}}"]}),a})();function Ua(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e.TgZ(1,"h2",2),e._uU(2,"Choose your hero level"),e.qZA(),e.TgZ(3,"mat-dialog-content")(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Hero level"),e.qZA(),e._UZ(7,"input",4),e.TgZ(8,"mat-error"),e._uU(9),e.qZA()()(),e.TgZ(10,"mat-dialog-actions")(11,"button",5),e._uU(12,"Cancel"),e.qZA(),e.TgZ(13,"button",6),e._uU(14,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(9),e.hij("Level must be between 1 and ",t.MAX_HERO_LEVEL,""),e.xp6(2),e.Q6J("mat-dialog-close",null)}}let Na=(()=>{class a{constructor(t,n){this.dialogRef=t,this.MAX_HERO_LEVEL=c.AR4,this.form=new l.cw({level:new l.NI(n.level,[l.kI.min(1),l.kI.max(c.AR4)])})}submit(){this.form.markAllAsTouched(),this.form.valid&&this.dialogRef.close(this.form.value.level)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.so),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character-level-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["appearance","outline"],["matInput","","type","number","step","1","formControlName","level"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,Ua,15,3,"form",0),2&t&&e.Q6J("ngIf",null!==n.form)},dependencies:[d.O5,S.lW,u.ZT,u.uh,u.xY,u.H8,_.TO,_.KE,_.hX,w.Nt,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}"]}),a})();function Ja(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e.TgZ(1,"h2",2),e._uU(2,"Choose the new item reinforcment"),e.qZA(),e.TgZ(3,"mat-dialog-content")(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Reinforcment"),e.qZA(),e._UZ(7,"input",4),e.TgZ(8,"mat-error"),e._uU(9,"Reinforcment must be positive"),e.qZA()()(),e.TgZ(10,"mat-dialog-actions")(11,"button",5),e._uU(12,"Cancel"),e.qZA(),e.TgZ(13,"button",6),e._uU(14,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(11),e.Q6J("mat-dialog-close",null)}}let Ea=(()=>{class a{constructor(t,n){this.dialogRef=t,this.MAX_HERO_LEVEL=c.AR4,this.form=new l.cw({reinforcment:new l.NI(n.reinforcment,[l.kI.min(0)])})}submit(){this.form.markAllAsTouched(),this.form.valid&&this.dialogRef.close(this.form.value.reinforcment)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.so),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-reinforcment-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["appearance","outline"],["matInput","","type","number","step","1","formControlName","reinforcment"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,Ja,15,2,"form",0),2&t&&e.Q6J("ngIf",null!==n.form)},dependencies:[d.O5,S.lW,u.ZT,u.uh,u.xY,u.H8,_.TO,_.KE,_.hX,w.Nt,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u],styles:["mat-dialog-content[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),a})();function Ra(a,o){if(1&a&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function Ba(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"p",10),e.NdJ("click",function(){const r=e.CHM(t).index,s=e.oxw();return e.KtG(s.removeStat(r))}),e._uU(1),e.qZA()}if(2&a){const t=o.$implicit,n=o.index;e.xp6(1),e.AsE("#",n+1," : ",t.label,"")}}let Qa=(()=>{class a{constructor(t,n,i,r,s,g){this.dialogRef=t,this.slormancerItemService=i,this.slormancerDataService=r,this.slormancerAffixService=s,this.formOptionsService=g,this.AFFIX_OPTIONS=[],this.RARITY_OPTIONS=this.formOptionsService.getAllRaritiesOptions().filter(m=>m.value!==c.uqS.Legendary),this.selectedAffixes=[],this.items=n.items;const p=new l.NI;this.form=new l.cw({rarity:new l.NI(c.uqS.Epic,l.kI.required),affix:p}),p.valueChanges.subscribe(m=>{const f=this.AFFIX_OPTIONS.find(P=>P.value===m);void 0!==f&&(this.selectedAffixes.push(f),this.updateOptions(),p.setValue(null))}),this.updateOptions()}updateOptions(){this.AFFIX_OPTIONS=this.formOptionsService.getAllStatsoptions().filter(t=>!this.selectedAffixes.includes(t))}applyStatsToItem(t){const n=this.form.value.rarity,i=c.nte.filter(m=>c.nte.indexOf(m)<=c.nte.indexOf(n)),r={[c.uqS.Normal]:this.slormancerDataService.getBaseMaxBasicStat(t.base),[c.uqS.Defensive]:1,[c.uqS.Magic]:1,[c.uqS.Rare]:1,[c.uqS.Epic]:3,[c.uqS.Legendary]:0},s={[c.uqS.Normal]:this.formOptionsService.getStatsOptions(t.base,c.uqS.Normal),[c.uqS.Defensive]:this.formOptionsService.getStatsOptions(t.base,c.uqS.Defensive),[c.uqS.Magic]:this.formOptionsService.getStatsOptions(t.base,c.uqS.Magic),[c.uqS.Rare]:this.formOptionsService.getStatsOptions(t.base,c.uqS.Rare),[c.uqS.Epic]:this.formOptionsService.getStatsOptions(t.base,c.uqS.Epic),[c.uqS.Legendary]:[]};t.affixes=[];for(const m of this.selectedAffixes)for(const f of i){const P=t.affixes.filter(J=>J.rarity===f).length<r[f],v=s[f];if(P&&v.includes(m)){const J=this.slormancerAffixService.getAffixFromStat(m.value,t.level,t.reinforcment,f);if(null!==J){t.affixes.push(J);break}}}const g=Math.max(...t.affixes.map(m=>c.nte.indexOf(m.rarity))),p=c.nte.filter(m=>m===c.uqS.Normal||c.nte.indexOf(m)<g);for(const m of p){let f=!1;for(;!f&&t.affixes.filter(P=>P.rarity===m).length<r[m];){const P=s[m].find(v=>void 0===t.affixes.find(J=>J.craftedEffect.effect.stat===v.value));if(f=!0,void 0!==P){const v=this.slormancerAffixService.getAffixFromStat(P.value,t.level,t.reinforcment,m);null!==v&&(t.affixes.push(v),f=!1)}}}this.slormancerItemService.updateEquipableItemModel(t),this.slormancerItemService.updateEquipableItemView(t)}removeStat(t){this.selectedAffixes.splice(t,1),this.updateOptions()}getAffixControl(){return this.form.get("affix")}submit(){if(this.form.markAllAsTouched(),this.selectedAffixes.length>0&&this.form.valid){for(const t of this.items)this.applyStatsToItem(t);this.dialogRef.close(!0)}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.so),e.Y36(u.WI),e.Y36(c.SgH),e.Y36(c.ogB),e.Y36(c.lRX),e.Y36(G.K))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-optimize-items-affixes-modal"]],decls:21,vars:10,consts:[["mat-dialog-title",""],["id","form",3,"formGroup","submit"],["appearance","outline","color","primary",1,"no-error-padding"],["formControlName","rarity"],[3,"value",4,"ngFor","ngForOf"],["class","stat",3,"click",4,"ngFor","ngForOf"],[3,"label","control","options","noErrorPadding"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary","form","form",3,"disabled"],[3,"value"],[1,"stat",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Choose the affixes you want for your items"),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"form",1),e.NdJ("submit",function(){return n.submit()}),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Items will lose their affixes before being updated."),e.qZA(),e.TgZ(8,"mat-form-field",2)(9,"mat-label"),e._uU(10,"Highest rarity to allow"),e.qZA(),e.TgZ(11,"mat-select",3),e.YNc(12,Ra,2,2,"mat-option",4),e.qZA()(),e._UZ(13,"p"),e.YNc(14,Ba,2,2,"p",5),e._UZ(15,"app-search-select",6),e.qZA()(),e.TgZ(16,"mat-dialog-actions")(17,"button",7),e._uU(18,"Cancel"),e.qZA(),e.TgZ(19,"button",8),e._uU(20,"Apply"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(2),e.hij("Each affix below will be applied in order to the ",n.items.length>1?n.items.length+" selected items":"selected item"," (at maximum crafting value) using the first available affix slot."),e.xp6(7),e.Q6J("ngForOf",n.RARITY_OPTIONS),e.xp6(2),e.Q6J("ngForOf",n.selectedAffixes),e.xp6(1),e.Q6J("label",n.selectedAffixes.length>0?"Add another affix":"Choose an affix")("control",n.getAffixControl())("options",n.AFFIX_OPTIONS)("noErrorPadding",!0),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("disabled",0===n.selectedAffixes.length||!n.form.valid))},dependencies:[d.sg,S.lW,u.ZT,u.uh,u.xY,u.H8,_.KE,_.hX,I.gD,U.ey,l._Y,l.JJ,l.JL,l.sg,l.u,K.a],styles:[".stat[_ngcontent-%COMP%]{cursor:pointer;padding-left:4px}@media (max-width: 768px){.stat[_ngcontent-%COMP%]{padding-left:0}}.stat[_ngcontent-%COMP%]:hover{opacity:.6}mat-form-field[_ngcontent-%COMP%], app-search-select[_ngcontent-%COMP%]{width:200px}@media (max-width: 768px){mat-form-field[_ngcontent-%COMP%], app-search-select[_ngcontent-%COMP%]{width:100%}}"]}),a})();function Fa(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.optimizeReaperEnchantments())}),e._uU(1,"Optimize items for Reaper"),e.qZA()}}function Ha(a,o){if(1&a&&(e.TgZ(0,"button",11),e._uU(1,"Optimize items for Attribute"),e.qZA()),2&a){e.oxw(2);const t=e.MAs(6);e.Q6J("matMenuTriggerFor",t)}}function Ya(a,o){if(1&a&&(e.TgZ(0,"button",11),e._uU(1,"Optimize items for Skill"),e.qZA()),2&a){e.oxw(2);const t=e.MAs(9);e.Q6J("matMenuTriggerFor",t)}}function Da(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.optimizeItemsAffixes())}),e._uU(1,"Optimise items affixes"),e.qZA()}}function Va(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.maximizeItemsLevel())}),e._uU(1,"Maximize items level"),e.qZA()}}function ja(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.changeReinforcmentLevel())}),e._uU(1,"Change items reinforcment level"),e.qZA()}}function Ga(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.editCharacterLevel())}),e._uU(1,"Change hero level"),e.qZA(),e.YNc(2,Fa,2,0,"button",9),e.YNc(3,Ha,2,1,"button",10),e.YNc(4,Ya,2,1,"button",10),e.YNc(5,Da,2,0,"button",9),e.YNc(6,Va,2,0,"button",9),e.YNc(7,ja,2,0,"button",9)}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",null!==t.character&&t.canOptimizeReaperEnchantements(t.character)&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems())}}function Ka(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.optimizeAttributeEnchantments(r))}),e._UZ(1,"img",13)(2,"div",14),e.qZA()}if(2&a){const t=o.$implicit;e.xp6(1),e.Q6J("src",t.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",t.attributeName,e.oJD)}}function Xa(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.optimizeSkillEnchantments(r))}),e._UZ(1,"img",15)(2,"div",14),e.qZA()}if(2&a){const t=o.$implicit;e.xp6(1),e.Q6J("src","assets/img/icon/"+t.icon+".png",e.LSH),e.xp6(1),e.Q6J("innerHTML",t.name,e.oJD)}}let $a=(()=>{class a extends O.B{constructor(t,n,i,r){super(),this.buildStorageService=t,this.dialog=n,this.messageService=i,this.slormancerItemService=r,this.character=null,this.menu=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.character=null===t?null:t.character)}openCharacterSettings(){return null!==this.menu&&this.menu.openMenu(),!1}editCharacterLevel(){null!==this.character&&this.dialog.open(Na,{data:{level:this.character.level}}).afterClosed().subscribe(t=>{t&&null!==this.character&&(this.character.level=t,this.buildStorageService.saveLayer())})}getGearItems(){let t=[];const n=this.character;return null!==n&&(t=c.PLi.map(i=>n.gear[i]).filter(c.BXh)),t}hasItems(){return this.getGearItems().length>0}canOptimizeReaperEnchantements(t){return null!==t.reaper&&t.reaper.smith.id!==c.Q1_.ReapersmithBrotherhood}optimizeReaperEnchantments(){if(null!==this.character){const t=this.slormancerItemService.getReaperEnchantment(this.character.reaper.smith.id,5);this.getGearItems().forEach(n=>{n.reaperEnchantment=this.slormancerItemService.getReaperEnchantmentClone(t),this.slormancerItemService.updateEquipableItemModel(n),this.slormancerItemService.updateEquipableItemView(n)}),this.buildStorageService.saveLayer()}}getTraits(){let t=[];const n=this.character;return null!==n&&(t=c.AFD.map(i=>n.attributes.allocated[i])),t}optimizeAttributeEnchantments(t){if(null!==this.character&&null!==this.character.reaper){const n=this.slormancerItemService.getAttributeEnchantment(t.attribute,3);this.getGearItems().forEach(i=>{i.attributeEnchantment=this.slormancerItemService.getAttributeEnchantmentClone(n),this.slormancerItemService.updateEquipableItemModel(i),this.slormancerItemService.updateEquipableItemView(i)}),this.buildStorageService.saveLayer()}}getSkills(){let t=[];const n=this.character;return null!==n&&(t=n.skills.map(i=>i.skill)),t}optimizeSkillEnchantments(t){if(null!==this.character){const n=this.slormancerItemService.getSkillEnchantment(t.id,2);this.getGearItems().forEach(i=>{i.skillEnchantment=this.slormancerItemService.getSkillEnchantmentClone(n),this.slormancerItemService.updateEquipableItemModel(i),this.slormancerItemService.updateEquipableItemView(i)}),this.buildStorageService.saveLayer()}}maximizeItemsLevel(){if(null!==this.character){const t=this.character.level;this.getGearItems().forEach(n=>{n.level=t,this.slormancerItemService.updateEquipableItemModel(n),this.slormancerItemService.updateEquipableItemView(n)}),this.buildStorageService.saveLayer()}}changeReinforcmentLevel(){if(null!==this.character){const t=Math.max(...this.getGearItems().map(n=>n.reinforcment));this.dialog.open(Ea,{data:{reinforcment:t}}).afterClosed().subscribe(n=>{"number"==typeof n&&(this.getGearItems().forEach(i=>{i.reinforcment=n,this.slormancerItemService.updateEquipableItemModel(i),this.slormancerItemService.updateEquipableItemView(i)}),this.buildStorageService.saveLayer())})}}optimizeItemsAffixes(){if(null!==this.character){const t={items:this.getGearItems()};this.dialog.open(Qa,{data:t}).afterClosed().subscribe(n=>{n&&(this.buildStorageService.saveLayer(),this.messageService.message("All equipped items have been updated"))})}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x),e.Y36(u.uw),e.Y36(R.e),e.Y36(c.SgH))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character-settings-menu"]],viewQuery:function(t,n){if(1&t&&e.Gf(b.p6,7),2&t){let i;e.iGM(i=e.CRH())&&(n.menu=i.first)}},features:[e.qOj],decls:11,vars:4,consts:[[3,"matMenuTriggerFor","contextmenu"],["color","primary","xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["color","primary"],["attributes","matMenu"],["mat-menu-item","","color","primary","class","menu-entry",3,"click",4,"ngFor","ngForOf"],["skills","matMenu"],["mat-menu-item","","color","primary",3,"click"],["mat-menu-item","","color","primary",3,"click",4,"ngIf"],["mat-menu-item","","color","primary",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item","","color","primary",3,"matMenuTriggerFor"],["mat-menu-item","","color","primary",1,"menu-entry",3,"click"],[3,"src"],[3,"innerHTML"],[1,"skill-icon",3,"src"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-icon",0),e.NdJ("contextmenu",function(){return n.openCharacterSettings()}),e._uU(1,"settings"),e.qZA(),e.TgZ(2,"mat-menu",1,2),e.YNc(4,Ga,8,6,"ng-template",3),e.TgZ(5,"mat-menu",4,5),e.YNc(7,Ka,3,2,"button",6),e.qZA(),e.TgZ(8,"mat-menu",4,7),e.YNc(10,Xa,3,2,"button",6),e.qZA()()),2&t){const i=e.MAs(3);e.Q6J("matMenuTriggerFor",i),e.xp6(2),e.Q6J("overlapTrigger",!0),e.xp6(5),e.Q6J("ngForOf",n.getTraits()),e.xp6(3),e.Q6J("ngForOf",n.getSkills())}},dependencies:[d.sg,d.O5,T.Hw,b.VK,b.OP,b.p6,b.KA],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#353535}.menu-entry[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}"]}),a})();function za(a,o){if(1&a&&(e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"div",3)(3,"div",4),e.qZA(),e.TgZ(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10),e._UZ(10,"img",11),e.qZA()()()(),e.TgZ(11,"div",12)(12,"div",13)(13,"div",14),e._uU(14),e.qZA(),e._UZ(15,"div",15),e.qZA(),e.TgZ(16,"div",16)(17,"div",14),e._uU(18),e.qZA(),e._UZ(19,"div",15),e.qZA()()(),e.TgZ(20,"div",17),e._UZ(21,"img",11),e.qZA()()()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("innerHTML",t.ultimatum.title,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.ultimatum.levelLabel,e.oJD),e.xp6(7),e.MGl("src","assets/img/icon/",t.ultimatum.icon,".png",e.LSH),e.xp6(4),e.Oqu(t.ultimatum.bonusTitle),e.xp6(1),e.Q6J("innerHTML",t.ultimatum.bonusLabel,e.oJD),e.xp6(3),e.Oqu(t.ultimatum.malusTitle),e.xp6(1),e.Q6J("innerHTML",t.ultimatum.malusLabel,e.oJD),e.xp6(2),e.MGl("src","assets/img/icon/",t.ultimatum.levelIcon,".png",e.LSH)}}let me=(()=>{class a{constructor(){this.ultimatum=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ultimatum-view"]],inputs:{ultimatum:"ultimatum"},decls:1,vars:1,consts:[["class","ultimatum slormancer-tooltip",4,"ngIf"],[1,"ultimatum","slormancer-tooltip"],[1,"head","inner-box"],[1,"title",3,"innerHTML"],[1,"level",3,"innerHTML"],[1,"content","inner-box"],[1,"data"],[1,"visual"],[1,"background"],[1,"inner-background"],[1,"ultimatum"],[3,"src"],[1,"info"],[1,"bonus"],[1,"title"],[3,"innerHTML"],[1,"malus"],[1,"bottom-level"]],template:function(t,n){1&t&&e.YNc(0,za,22,8,"div",0),2&t&&e.Q6J("ngIf",null!==n.ultimatum)},dependencies:[d.O5],styles:[".ultimatum[_ngcontent-%COMP%]{width:350px}.ultimatum[_ngcontent-%COMP%]  .value, .ultimatum[_ngcontent-%COMP%]  .rank .current{color:#ce4607}.ultimatum[_ngcontent-%COMP%]  .range, .ultimatum[_ngcontent-%COMP%]  .range .value, .ultimatum[_ngcontent-%COMP%]  .details, .ultimatum[_ngcontent-%COMP%]  .details .value, .ultimatum[_ngcontent-%COMP%]  .formula, .ultimatum[_ngcontent-%COMP%]  .formula .value{color:#686868}.ultimatum[_ngcontent-%COMP%]  .affixes .range, .ultimatum[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.ultimatum[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase}.ultimatum[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{font-size:80%}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{border:3px solid black;background-color:#3c3c3c;border-radius:10%;padding:3px;width:60px;height:70px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid black;background-color:#471712;border-radius:10%;width:100%;height:100%}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]{width:0;height:0}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate(-50%,-50%);width:72px;height:72px;image-rendering:pixelated}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:105%}"]}),a})();function Wa(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e._UZ(1,"input",2),e.TgZ(2,"mat-dialog-content")(3,"div",3),e._UZ(4,"app-ultimatum-view",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),e._uU(9,"Ultimatum level"),e.qZA(),e._UZ(10,"input",8),e.TgZ(11,"mat-error"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",6),e._UZ(14,"app-search-select",9),e.qZA()()(),e.TgZ(15,"mat-dialog-actions")(16,"button",10),e._uU(17,"Cancel"),e.qZA(),e.TgZ(18,"button",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.reset())}),e._uU(19,"Reset"),e.qZA(),e.TgZ(20,"button",12),e._uU(21,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("ultimatum",t.ultimatum),e.xp6(8),e.hij("Level must be between 1 and ",t.ULTIMATUM_MAX_LEVEL,""),e.xp6(2),e.Q6J("control",t.getTypeControl())("options",t.options)("noErrorPadding",!0)}}let ei=(()=>{class a{constructor(t,n,i,r){this.dialogRef=t,this.slormancerUltimatumService=n,this.formOptionsService=i,this.ULTIMATUM_MAX_LEVEL=c.cKY,this.options=[],this.originalUltimatum=null===r.ultimatum?this.slormancerUltimatumService.getUltimatum(c.RI7.AdamantAbundance,1):this.slormancerUltimatumService.getUltimatumClone(r.ultimatum),this.options=this.formOptionsService.getUltimatumOptions(),this.reset()}reset(){this.ultimatum=this.slormancerUltimatumService.getUltimatumClone(this.originalUltimatum),this.form=this.buildForm()}submit(){this.form.valid&&this.dialogRef.close(this.ultimatum)}updatePreview(t){if(t.valid){const n=t.value;this.ultimatum=this.slormancerUltimatumService.getUltimatum(n.type,n.level)}}getTypeControl(){return this.form.get("type")}buildForm(){const t=new l.cw({level:new l.NI(this.ultimatum.level,[l.kI.required,l.kI.min(1),l.kI.max(c.cKY)]),type:new l.NI(this.ultimatum.type,[l.kI.required])});return t.valueChanges.subscribe(()=>{this.updatePreview(t)}),this.updatePreview(t),t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.so),e.Y36(c.hrN),e.Y36(G.K),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ultimatum-edit-modal"]],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","submit",4,"ngIf"],["autocomplete","off",3,"formGroup","submit"],["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"preview"],[3,"ultimatum"],[1,"form"],[1,"stat-line"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","level"],["label","Ultimatum type",3,"control","options","noErrorPadding"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,Wa,22,6,"form",0),2&t&&e.Q6J("ngIf",null!==n.form&&null!==n.ultimatum)},dependencies:[d.O5,S.lW,u.ZT,u.xY,u.H8,_.TO,_.KE,_.hX,w.Nt,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,me,K.a],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:16px;flex-grow:1}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1;width:240px}"]}),a})();function ti(a,o){1&a&&e._UZ(0,"img",8)}function ni(a,o){if(1&a&&e._UZ(0,"app-ultimatum-view",10),2&a){const t=e.oxw(3);e.Q6J("ultimatum",t.ultimatum)}}function ai(a,o){if(1&a&&e.YNc(0,ni,1,1,"ng-template",9),2&a){e.oxw(2);const t=e.MAs(1);e.Q6J("cdkConnectedOverlayOpen",!0)("cdkConnectedOverlayOrigin",t)}}function ii(a,o){if(1&a&&(e.TgZ(0,"div",4),e._UZ(1,"img",5),e.YNc(2,ti,1,0,"img",6),e.YNc(3,ai,1,2,null,7),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.ekj("disabled",t.ultimatum.locked),e.MGl("src","assets/img/icon/",t.ultimatum.icon,".png",e.LSH),e.xp6(1),e.Q6J("ngIf",t.ultimatum.locked),e.xp6(1),e.Q6J("ngIf",t.overlay&&t.showOverlay)}}let oi=(()=>{class a extends O.B{constructor(t,n,i){super(),this.dialog=t,this.itemMoveService=n,this.searchService=i,this.ultimatum=null,this.overlay=!0,this.readonly=!1,this.changed=new e.vpe,this.showOverlay=!1,this.hiddenBySearch=!1,this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(()=>this.updateSearch())}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}onMouseContextMenu(){return this.readonly||this.itemMoveService.releaseHoldItem(),!1}ngOnChanges(){this.updateSearch()}updateSearch(){this.hiddenBySearch=null!==this.ultimatum&&this.searchService.hasSearch()&&!this.searchService.ultimatumMatchSearch(this.ultimatum)}edit(){this.readonly||this.dialog.open(ei,{data:{ultimatum:this.ultimatum}}).afterClosed().subscribe(n=>{n&&this.changed.emit(n)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.uw),e.Y36(A),e.Y36(q.o))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ultimatum-slot"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})("contextmenu",function(){return n.onMouseContextMenu()})},inputs:{ultimatum:"ultimatum",overlay:"overlay",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj,e.TTD],decls:4,vars:5,consts:[["cdkOverlayOrigin","",1,"background",3,"click"],["trigger","cdkOverlayOrigin"],[1,"inner-background"],["class","ultimatum",4,"ngIf"],[1,"ultimatum"],[1,"icon",3,"src"],["class","locked","src","assets/img/icon/locked.png",4,"ngIf"],[4,"ngIf"],["src","assets/img/icon/locked.png",1,"locked"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"ultimatum"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("click",function(){return!n.readonly&&n.edit()}),e.TgZ(2,"div",2),e.YNc(3,ii,4,5,"div",3),e.qZA()()),2&t&&(e.ekj("readonly",n.readonly)("hidden-search",n.hiddenBySearch),e.xp6(3),e.Q6J("ngIf",null!==n.ultimatum))},dependencies:[d.O5,y.pI,y.xu,me],styles:[".background[_ngcontent-%COMP%]{border:3px solid black;background-color:#3c3c3c;border-radius:10%;padding:3px;width:60px;height:70px}.background[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.background.hidden-search[_ngcontent-%COMP%]{opacity:.2}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid black;background-color:#471712;border-radius:10%;width:100%;height:100%}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]{position:relative;width:0;height:0}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate(-50%,-50%);image-rendering:pixelated;position:absolute}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.locked){width:72px;height:72px}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.locked).disabled{opacity:.5}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img.locked[_ngcontent-%COMP%]{position:absolute;width:60px;height:60px}"]}),a})();function ri(a,o){if(1&a&&(e.TgZ(0,"div",26),e._uU(1),e.TgZ(2,"mat-icon",27),e._uU(3,"info_outline"),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.character.importVersion," ")}}function ci(a,o){if(1&a&&(e.TgZ(0,"div",28)(1,"mat-icon",29),e._uU(2,"info_outline"),e.qZA()()),2&a){const t=o.$implicit;e.xp6(1),e.s9C("matTooltip",t)}}function li(a,o){1&a&&e._UZ(0,"app-character-settings-menu")}function si(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"app-item-slot",3),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Helm,i))}),e.qZA(),e.TgZ(3,"app-item-slot",4),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Amulet,i))}),e.qZA()(),e.TgZ(4,"div",5)(5,"div",6)(6,"app-item-slot",7),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Shoulder,i))}),e.qZA(),e.TgZ(7,"app-item-slot",8),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Bracer,i))}),e.qZA(),e.TgZ(8,"app-item-slot",9),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Glove,i))}),e.qZA()(),e.TgZ(9,"div",10)(10,"div",11),e.YNc(11,ri,4,1,"div",12),e.YNc(12,ci,3,1,"div",13),e.YNc(13,li,1,0,"app-character-settings-menu",14),e.qZA(),e._UZ(14,"app-character-animation",15),e.qZA(),e.TgZ(15,"div",16)(16,"app-item-slot",17),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Body,i))}),e.qZA(),e.TgZ(17,"app-item-slot",18),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Cape,i))}),e.qZA(),e.TgZ(18,"app-item-slot",19),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Belt,i))}),e.qZA()()(),e.TgZ(19,"div",20),e._UZ(20,"div",21),e.TgZ(21,"app-item-slot",22),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.LeftRing,i))}),e.qZA(),e.TgZ(22,"app-item-slot",23),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Boot,i))}),e.qZA(),e.TgZ(23,"app-item-slot",24),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.RightRing,i))}),e.qZA(),e.TgZ(24,"app-ultimatum-slot",25),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateUltimatum(i))}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("readonly",t.readonly)("base",t.bases.Helm)("item",t.character.gear[t.gearSlot.Helm])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Amulet)("item",t.character.gear[t.gearSlot.Amulet])("character",t.character),e.xp6(3),e.Q6J("readonly",t.readonly)("base",t.bases.Shoulder)("item",t.character.gear[t.gearSlot.Shoulder])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Bracer)("item",t.character.gear[t.gearSlot.Bracer])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Glove)("item",t.character.gear[t.gearSlot.Glove])("character",t.character),e.xp6(3),e.Q6J("ngIf",null!==t.character.importVersion&&t.character.version!==t.character.importVersion),e.xp6(1),e.Q6J("ngForOf",t.character.issues),e.xp6(1),e.Q6J("ngIf",!t.readonly),e.xp6(1),e.Q6J("heroClass",t.character.heroClass),e.xp6(2),e.Q6J("readonly",t.readonly)("base",t.bases.Body)("item",t.character.gear[t.gearSlot.Body])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Cape)("item",t.character.gear[t.gearSlot.Cape])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Belt)("item",t.character.gear[t.gearSlot.Belt])("character",t.character),e.xp6(3),e.Q6J("readonly",t.readonly)("base",t.bases.Ring)("item",t.character.gear[t.gearSlot.LeftRing])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Boot)("item",t.character.gear[t.gearSlot.Boot])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Ring)("item",t.character.gear[t.gearSlot.RightRing])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("ultimatum",t.character.ultimatum)}}let _e=(()=>{class a{constructor(t){this.itemMoveService=t,this.gearSlot=c.SHB,this.bases=c.JNB,this.character=null,this.readonly=!1,this.changed=new e.vpe}ngOnInit(){this.itemMoveService.setEquipCallback((n,i,r)=>this.updateItemCallback(n,i,r))}ngOnDestroy(){this.itemMoveService.setEquipCallback(null)}updateItemCallback(t,n,i){null!==n&&null!==this.character&&null!==i&&this.updateItem(i,n)}updateItem(t,n){null!==this.character&&(this.character.gear[t]=n,this.changed.emit(this.character))}updateUltimatum(t){null!==this.character&&(this.character.ultimatum=t,this.changed.emit(this.character))}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character-equipment"]],inputs:{character:"character",readonly:"readonly"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["class","equipment",4,"ngIf"],[1,"equipment"],[1,"top-equipment"],[1,"helm",3,"readonly","base","item","character","changed"],[1,"amulet",3,"readonly","base","item","character","changed"],[1,"center-equipment"],[1,"left-equipment"],[1,"shoulder",3,"readonly","base","item","character","changed"],[1,"bracer",3,"readonly","base","item","character","changed"],[1,"glove",3,"readonly","base","item","character","changed"],[1,"character-preview"],[1,"preview-header"],["class","original-version",4,"ngIf"],["class","issue",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"heroClass"],[1,"right-equipment"],[1,"body",3,"readonly","base","item","character","changed"],[1,"cape",3,"readonly","base","item","character","changed"],[1,"belt",3,"readonly","base","item","character","changed"],[1,"bottom-equipment"],[1,"empty"],[1,"ring_l",3,"readonly","base","item","character","changed"],[1,"boot",3,"readonly","base","item","character","changed"],[1,"ring_r",3,"readonly","base","item","character","changed"],[3,"readonly","ultimatum","changed"],[1,"original-version"],["matTooltip","This build has been made for an older version of the game"],[1,"issue"],[3,"matTooltip"]],template:function(t,n){1&t&&e.YNc(0,si,25,50,"div",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.sg,d.O5,T.Hw,Z.gM,le,La,$a,oi],styles:[".equipment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;justify-content:space-between;min-height:380px}.equipment[_ngcontent-%COMP%]   .top-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:20px;flex-grow:1}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .left-equipment[_ngcontent-%COMP%], .equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .right-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;flex-grow:1}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]{width:150px;height:200px;border:3px solid rgb(60,60,60);padding:8px;background-color:#000;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:top;justify-content:space-between;gap:4px;width:100%}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .original-version[_ngcontent-%COMP%], .equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .issue[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:top;gap:4px;color:#ce4607}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .original-version[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .issue[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px;font-size:14px;line-height:14px}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   app-character-settings-menu[_ngcontent-%COMP%]{margin-left:auto}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:16px;flex-grow:1;overflow:hidden}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .ring_l[_ngcontent-%COMP%], .equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .ring_r[_ngcontent-%COMP%]{margin-bottom:20px}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .boot[_ngcontent-%COMP%]{margin-top:20px}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{width:56px}"]}),a})();var he=h(4890);let gi=(()=>{class a{constructor(t,n,i,r,s){this.dialogRef=t,this.slormancerRuneService=n,this.slormancerCharacterUpdaterService=i,this.buildStorageService=r,this.MAX_REAPER_AFFINITY_BASE=c.DxO,this.form=new l.cw({activationId:new l.NI(null),activationLevel:new l.NI(1,[l.kI.required,l.kI.min(1),l.kI.max(15)]),effectId:new l.NI(null),effectLevel:new l.NI(1,[l.kI.required,l.kI.min(1),l.kI.max(15)]),enhancementId:new l.NI(null),enhancementLevel:new l.NI(1,[l.kI.required,l.kI.min(1),l.kI.max(15)])}),this.originalRunes=this.slormancerRuneService.getRunesCombinationClone(s.character.runes),this.character=s.character,this.runes=this.slormancerRuneService.getRunes(this.character.heroClass,1,this.character.reaper.id),this.form.valueChanges.subscribe(()=>{this.updatePreview()}),this.reset()}reset(){this.character.runes=Object.assign({},this.originalRunes),this.form.reset({activationId:null===this.character.runes.activation?null:this.character.runes.activation.id,activationLevel:null===this.character.runes.activation?1:this.character.runes.activation.level,effectId:null===this.character.runes.effect?null:this.character.runes.effect.id,effectLevel:null===this.character.runes.effect?1:this.character.runes.effect.level,enhancementId:null===this.character.runes.enhancement?null:this.character.runes.enhancement.id,enhancementLevel:null===this.character.runes.enhancement?1:this.character.runes.enhancement.level})}submit(){this.form.valid&&this.dialogRef.close(this.character.runes)}getRune(t){return(0,c.lA$)(this.runes[t])}isSelected(t){const n=this.form.value;return n.activationId===t||n.effectId===t||n.enhancementId===t}selectRune(t){null!==t&&(t.type===c.evb.Activation?this.form.patchValue({activationId:this.form.value.activationId===t.id?null:t.id}):t.type===c.evb.Effect?this.form.patchValue({effectId:this.form.value.effectId===t.id?null:t.id}):t.type===c.evb.Enhancement&&this.form.patchValue({enhancementId:this.form.value.enhancementId===t.id?null:t.id}))}updatePreview(){if(this.form.valid){const t=this.form.value;this.character.runes={activation:null,effect:null,enhancement:null},this.character.runes.activation=null!==t.activationId?this.slormancerRuneService.getRuneById(t.activationId,this.character.heroClass,t.activationLevel,this.character.reaper.id):null,this.character.runes.effect=null!==t.effectId?this.slormancerRuneService.getRuneById(t.effectId,this.character.heroClass,t.effectLevel,this.character.reaper.id):null,this.character.runes.enhancement=null!==t.enhancementId?this.slormancerRuneService.getRuneById(t.enhancementId,this.character.heroClass,t.enhancementLevel,this.character.reaper.id):null;for(const i of this.runes)i.type===c.evb.Activation&&(i.level=t.activationLevel),i.type===c.evb.Effect&&(i.level=t.effectLevel),i.type===c.evb.Enhancement&&(i.level=t.enhancementLevel),this.slormancerRuneService.updateRuneModel(i,this.character.reaper.id);const n=this.buildStorageService.getBuild();this.slormancerRuneService.updateRunesModel(this.character.runes,this.character.reaper.id),this.slormancerCharacterUpdaterService.updateCharacter(this.character,null!==n?n.configuration:c.g5j,!1,null,this.runes),this.slormancerRuneService.updateRunesView(this.character.runes);for(const i of this.runes)this.slormancerRuneService.updateRuneView(i)}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.so),e.Y36(c._VP),e.Y36(c.Pdp),e.Y36(C.x),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-runes-edit-modal"]],decls:73,vars:60,consts:[["autocomplete","off",3,"formGroup","submit"],["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"runes"],[1,"rune-line"],[3,"rune","selected","click"],[1,"separator"],[1,"form"],[1,"stat-line"],[3,"rune"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","activationLevel"],["matInput","","type","number","step","1","formControlName","effectLevel"],["matInput","","type","number","step","1","formControlName","enhancementLevel"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return n.submit()}),e._UZ(1,"input",1),e.TgZ(2,"mat-dialog-content")(3,"div",2)(4,"div",3)(5,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(0))}),e.qZA(),e.TgZ(6,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(1))}),e.qZA(),e.TgZ(7,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(2))}),e.qZA()(),e.TgZ(8,"div",3)(9,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(3))}),e.qZA(),e.TgZ(10,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(4))}),e.qZA(),e.TgZ(11,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(5))}),e.qZA(),e.TgZ(12,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(6))}),e.qZA()(),e._UZ(13,"div",5),e.TgZ(14,"div",3)(15,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(7))}),e.qZA(),e.TgZ(16,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(8))}),e.qZA(),e.TgZ(17,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(9))}),e.qZA(),e.TgZ(18,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(10))}),e.qZA(),e.TgZ(19,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(11))}),e.qZA()(),e.TgZ(20,"div",3)(21,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(12))}),e.qZA(),e.TgZ(22,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(13))}),e.qZA(),e.TgZ(23,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(14))}),e.qZA(),e.TgZ(24,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(15))}),e.qZA()(),e.TgZ(25,"div",3)(26,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(16))}),e.qZA(),e.TgZ(27,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(17))}),e.qZA(),e.TgZ(28,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(18))}),e.qZA(),e.TgZ(29,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(19))}),e.qZA(),e.TgZ(30,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(20))}),e.qZA()(),e._UZ(31,"div",5),e.TgZ(32,"div",3)(33,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(21))}),e.qZA(),e.TgZ(34,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(22))}),e.qZA(),e.TgZ(35,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(23))}),e.qZA(),e.TgZ(36,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(24))}),e.qZA()(),e.TgZ(37,"div",3)(38,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(25))}),e.qZA(),e.TgZ(39,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(26))}),e.qZA(),e.TgZ(40,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(27))}),e.qZA()()(),e.TgZ(41,"div",6)(42,"div",7),e._UZ(43,"app-rune-slot",8),e.TgZ(44,"mat-form-field",9)(45,"mat-label"),e._uU(46,"Activation rune level"),e.qZA(),e._UZ(47,"input",10),e.TgZ(48,"mat-error"),e._uU(49,"Rune level must be between 1 and 15"),e.qZA()()(),e.TgZ(50,"div",7),e._UZ(51,"app-rune-slot",8),e.TgZ(52,"mat-form-field",9)(53,"mat-label"),e._uU(54,"Effect rune level"),e.qZA(),e._UZ(55,"input",11),e.TgZ(56,"mat-error"),e._uU(57,"Rune level must be between 1 and 15"),e.qZA()()(),e.TgZ(58,"div",7),e._UZ(59,"app-rune-slot",8),e.TgZ(60,"mat-form-field",9)(61,"mat-label"),e._uU(62,"Enhancement rune level"),e.qZA(),e._UZ(63,"input",12),e.TgZ(64,"mat-error"),e._uU(65,"Rune level must be between 1 and 15"),e.qZA()()()()(),e.TgZ(66,"mat-dialog-actions")(67,"button",13),e._uU(68,"Cancel"),e.qZA(),e.TgZ(69,"button",14),e.NdJ("click",function(){return n.reset()}),e._uU(70,"Reset"),e.qZA(),e.TgZ(71,"button",15),e._uU(72,"Apply"),e.qZA()()()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(5),e.Q6J("rune",n.getRune(0))("selected",n.isSelected(0)),e.xp6(1),e.Q6J("rune",n.getRune(1))("selected",n.isSelected(1)),e.xp6(1),e.Q6J("rune",n.getRune(2))("selected",n.isSelected(2)),e.xp6(2),e.Q6J("rune",n.getRune(3))("selected",n.isSelected(3)),e.xp6(1),e.Q6J("rune",n.getRune(4))("selected",n.isSelected(4)),e.xp6(1),e.Q6J("rune",n.getRune(5))("selected",n.isSelected(5)),e.xp6(1),e.Q6J("rune",n.getRune(6))("selected",n.isSelected(6)),e.xp6(3),e.Q6J("rune",n.getRune(7))("selected",n.isSelected(7)),e.xp6(1),e.Q6J("rune",n.getRune(8))("selected",n.isSelected(8)),e.xp6(1),e.Q6J("rune",n.getRune(9))("selected",n.isSelected(9)),e.xp6(1),e.Q6J("rune",n.getRune(10))("selected",n.isSelected(10)),e.xp6(1),e.Q6J("rune",n.getRune(11))("selected",n.isSelected(11)),e.xp6(2),e.Q6J("rune",n.getRune(12))("selected",n.isSelected(12)),e.xp6(1),e.Q6J("rune",n.getRune(13))("selected",n.isSelected(13)),e.xp6(1),e.Q6J("rune",n.getRune(14))("selected",n.isSelected(14)),e.xp6(1),e.Q6J("rune",n.getRune(15))("selected",n.isSelected(15)),e.xp6(2),e.Q6J("rune",n.getRune(16))("selected",n.isSelected(16)),e.xp6(1),e.Q6J("rune",n.getRune(17))("selected",n.isSelected(17)),e.xp6(1),e.Q6J("rune",n.getRune(18))("selected",n.isSelected(18)),e.xp6(1),e.Q6J("rune",n.getRune(19))("selected",n.isSelected(19)),e.xp6(1),e.Q6J("rune",n.getRune(20))("selected",n.isSelected(20)),e.xp6(3),e.Q6J("rune",n.getRune(21))("selected",n.isSelected(21)),e.xp6(1),e.Q6J("rune",n.getRune(22))("selected",n.isSelected(22)),e.xp6(1),e.Q6J("rune",n.getRune(23))("selected",n.isSelected(23)),e.xp6(1),e.Q6J("rune",n.getRune(24))("selected",n.isSelected(24)),e.xp6(2),e.Q6J("rune",n.getRune(25))("selected",n.isSelected(25)),e.xp6(1),e.Q6J("rune",n.getRune(26))("selected",n.isSelected(26)),e.xp6(1),e.Q6J("rune",n.getRune(27))("selected",n.isSelected(27)),e.xp6(3),e.Q6J("rune",n.character.runes.activation),e.xp6(8),e.Q6J("rune",n.character.runes.effect),e.xp6(8),e.Q6J("rune",n.character.runes.enhancement))},dependencies:[S.lW,u.ZT,u.xY,u.H8,_.TO,_.KE,_.hX,w.Nt,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,he.G],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:32px;flex-grow:1}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .runes[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}mat-dialog-content[_ngcontent-%COMP%]   .runes[_ngcontent-%COMP%]   .rune-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:8px}mat-dialog-content[_ngcontent-%COMP%]   .runes[_ngcontent-%COMP%]   .rune-line[_ngcontent-%COMP%]   app-rune-slot[_ngcontent-%COMP%]{cursor:pointer}mat-dialog-content[_ngcontent-%COMP%]   .runes[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{background-color:#686868;margin:12px 30px;height:4px}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:12px}"]}),a})();function di(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.edit())}),e._UZ(1,"app-rune-slot",2)(2,"app-rune-slot",2)(3,"app-rune-slot",2),e.qZA()}if(2&a){const t=e.oxw();e.ekj("readonly",t.readonly),e.xp6(1),e.Q6J("showLevel",!1)("rune",t.character.runes.activation),e.xp6(1),e.Q6J("showLevel",!1)("rune",t.character.runes.effect),e.xp6(1),e.Q6J("showLevel",!1)("rune",t.character.runes.enhancement)}}let fe=(()=>{class a{constructor(t,n){this.dialog=t,this.slormancerCharacterBuilderService=n,this.character=null,this.readonly=!1,this.changed=new e.vpe}edit(){if(null!==this.character&&!this.readonly){const n={character:this.slormancerCharacterBuilderService.getCharacterClone(this.character)};this.dialog.open(gi,{data:n}).afterClosed().subscribe(i=>{i&&this.changed.emit(i)})}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.uw),e.Y36(c.oYj))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-runes-slot"]],inputs:{character:"character",readonly:"readonly"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["class","runes",3,"readonly","click",4,"ngIf"],[1,"runes",3,"click"],[3,"showLevel","rune"]],template:function(t,n){1&t&&e.YNc(0,di,4,8,"div",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.O5,he.G],styles:[".runes[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:16px}.runes[_ngcontent-%COMP%]::not(.readonly){cursor:pointer}"]}),a})();function ui(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dragInItemsGroup(i.character.inventory))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dragOutItemsGroup())})("mouseup",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dragDrop(i.character.inventory))}),e._uU(1,"Bag"),e.qZA()}if(2&a){const t=e.oxw(2);e.ekj("drag-on",t.isDragging&&t.itemGroupBeingDraggedOn===t.character.inventory)("drag-possible",t.itemGroupDragDropPossible)("drag-impossible",!t.itemGroupDragDropPossible)}}function pi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(i){const s=e.CHM(t).index,g=e.oxw(2);return e.KtG(g.updateIventoryItem(s,i))}),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw(2);e.Q6J("item",t)("character",n.character)}}function mi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.dragInItemsGroup(i))})("mouseleave",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.dragOutItemsGroup())})("mouseup",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.dragDrop(i))}),e._uU(1),e.qZA()}if(2&a){const t=e.oxw(),n=t.$implicit,i=t.index,r=e.oxw(2);e.ekj("drag-on",r.isDragging&&r.itemGroupBeingDraggedOn===n)("drag-possible",r.itemGroupDragDropPossible)("drag-impossible",!r.itemGroupDragDropPossible),e.xp6(1),e.hij("Stash ",i+1,"")}}function _i(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(i){const s=e.CHM(t).index,g=e.oxw().index,p=e.oxw(2);return e.KtG(p.updateSharedInventoryItem(g,s,i))}),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw(3);e.Q6J("item",t)("character",n.character)}}function hi(a,o){if(1&a&&(e.TgZ(0,"mat-tab"),e.YNc(1,mi,2,7,"ng-template",7),e.TgZ(2,"div",13),e.YNc(3,_i,1,2,"app-item-slot",9),e.qZA()()),2&a){const t=o.$implicit;e.xp6(3),e.Q6J("ngForOf",t)}}function fi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"main")(1,"mat-card",1)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-content")(5,"app-character-equipment",2),e.NdJ("changed",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.gearChanged())}),e.qZA(),e.TgZ(6,"div",3)(7,"app-reaper-slot",2),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateReaper(i))}),e.qZA(),e.TgZ(8,"app-runes-slot",2),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateRunes(i))}),e.qZA()(),e.TgZ(9,"div",4),e._UZ(10,"app-skill-bar"),e.qZA()()(),e.TgZ(11,"mat-card",5)(12,"mat-card-content")(13,"mat-tab-group",6)(14,"mat-tab"),e.YNc(15,ui,2,6,"ng-template",7),e.TgZ(16,"div",8),e.YNc(17,pi,1,2,"app-item-slot",9),e.qZA()(),e.YNc(18,hi,4,1,"mat-tab",10),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Oqu(t.character.fullName),e.xp6(2),e.Q6J("character",t.character),e.xp6(2),e.Q6J("character",t.character),e.xp6(1),e.Q6J("character",t.character),e.xp6(9),e.Q6J("ngForOf",t.character.inventory),e.xp6(1),e.Q6J("ngForOf",t.character.sharedInventory)}}let Ci=(()=>{class a extends O.B{constructor(t,n,i){super(),this.buildStorageService=t,this.slormancerRuneService=n,this.itemMoveService=i,this.character=null,this.isDragging=!1,this.itemGroupBeingDraggedOn=null,this.itemGroupDragDropPossible=!1,this.itemMoveService.draggingItem.pipe((0,M.R)(this.unsubscribe)).subscribe(r=>this.isDragging=r)}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.character=null===t?null:t.character)}dragInItemsGroup(t){this.isDragging&&(this.itemGroupDragDropPossible=void 0!==t.find(n=>null===n),this.itemGroupBeingDraggedOn=t)}dragOutItemsGroup(){this.itemGroupBeingDraggedOn=null}dragDrop(t){this.itemMoveService.moveDraggedItemToItemGroup(t)}gearChanged(){this.buildStorageService.saveLayer()}updateReaper(t){null!==this.character&&(this.character.reaper=t,null!==this.character.runes.effect&&(this.slormancerRuneService.updateRuneModel(this.character.runes.effect,t.id),this.slormancerRuneService.updateRuneView(this.character.runes.effect)),this.buildStorageService.saveLayer())}updateRunes(t){null!==this.character&&(this.character.runes=t,this.buildStorageService.saveLayer())}updateIventoryItem(t,n){null!==this.character&&(this.character.inventory[t]=n,this.buildStorageService.saveLayer())}updateSharedInventoryItem(t,n,i){if(null!==this.character){const r=this.character.sharedInventory[t];r&&(r[n]=i,this.buildStorageService.saveBuild())}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x),e.Y36(c._VP),e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-inventory"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"gear"],[3,"character","changed"],[1,"weapon"],[1,"skills"],[1,"inventory"],["animationDuration","0ms","color","primary","direction","vertical"],["mat-tab-label",""],[1,"items","bag"],[3,"item","character","changed",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"items-group-label",3,"mouseenter","mouseleave","mouseup"],[3,"item","character","changed"],[1,"items","stash"]],template:function(t,n){1&t&&e.YNc(0,fi,19,6,"main",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.sg,d.O5,E.SP,E.uD,E.uX,x.a8,x.dn,le,ge,qa,_e,fe],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{min-width:450px;max-width:450px;width:450px;height:760px;flex-grow:1;overflow:hidden}@media (max-width: 768px){main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{width:auto;height:auto;min-width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:4px}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .weapon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;margin:4px 16px 16px;padding:12px;background-color:#161412;border:3px solid rgb(60,60,60)}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .skills[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]{flex-grow:1;max-height:760px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex-grow:1;border:3px solid transparent}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-possible[_ngcontent-%COMP%]{border-color:#b7ffd2}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-impossible[_ngcontent-%COMP%]{border-color:#f44336}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{margin-left:8px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.bag[_ngcontent-%COMP%]{max-width:512px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.stash[_ngcontent-%COMP%]{max-width:320px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   app-item-slot[_ngcontent-%COMP%]{display:block;float:left;margin:2px}"]}),a})();function vi(a,o){if(1&a&&e._UZ(0,"div",18),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.upgrade.genresLabel,e.oJD)}}function Mi(a,o){if(1&a&&e._UZ(0,"div",19),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.upgrade.costLabel,e.oJD)}}function bi(a,o){if(1&a&&(e.TgZ(0,"div")(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"div",6)(8,"img",7),e.qZA()(),e.TgZ(9,"div",8)(10,"div",9),e._uU(11),e.qZA(),e.TgZ(12,"div",10),e._uU(13),e.qZA(),e.YNc(14,vi,1,1,"div",11),e.TgZ(15,"div",12),e._uU(16),e.TgZ(17,"span",13),e._uU(18),e.qZA(),e._uU(19),e.qZA(),e.YNc(20,Mi,1,1,"div",14),e.qZA()(),e._UZ(21,"div",15)(22,"div",16)(23,"app-mechanics-view",17),e.qZA()()),2&a){const t=e.oxw();e.Gre("skill slormancer-tooltip ",t.upgrade.damageTypes.length>0?t.upgrade.damageTypes[0]:"",""),e.xp6(2),e.AsE("",t.getTypeLabel(t.upgrade.type),": ",t.upgrade.name,""),e.xp6(6),e.Q6J("src",t.upgrade.icon,e.LSH),e.xp6(3),e.AsE("",t.MASTERY_LABEL," ",t.upgrade.masteryRequired,""),e.xp6(2),e.Oqu(t.getTypeLabel(t.upgrade.type)),e.xp6(1),e.Q6J("ngIf",null!==t.upgrade.genresLabel),e.xp6(2),e.hij("",t.RANK_LABEL,": "),e.xp6(2),e.Oqu(t.upgrade.rank),e.xp6(1),e.hij("/",t.upgrade.maxRank,""),e.xp6(1),e.Q6J("ngIf",null!==t.upgrade.costLabel),e.xp6(2),e.Q6J("innerHTML",t.upgrade.description,e.oJD),e.xp6(1),e.Q6J("classMechanics",t.upgrade.relatedClassMechanics)("mechanics",t.upgrade.relatedMechanics)("buffs",t.upgrade.relatedBuffs)}}let Ce=(()=>{class a{constructor(t){this.slormancerTranslateService=t,this.RANK_LABEL=this.slormancerTranslateService.translate("tt_rank"),this.MASTERY_LABEL=this.slormancerTranslateService.translate("tt_mastery"),this.upgrade=null,this.mouseOverElement=null}getTypeLabel(t){return this.slormancerTranslateService.translate("tt_"+t)}showMechanicOverlay(t){this.mouseOverElement=t}hideMechanicOverlay(){this.mouseOverElement=null}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(c.n6D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-upgrade-view"]],inputs:{upgrade:"upgrade"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head","inner-box"],[1,"content","inner-box"],[1,"info"],[1,"visual"],[1,"icon"],[1,"icon-border"],[3,"src"],[1,"data"],[1,"mastery"],[1,"type"],["class","genre",3,"innerHTML",4,"ngIf"],[1,"rank"],[1,"current"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"separator"],[1,"description",3,"innerHTML"],[3,"classMechanics","mechanics","buffs"],[1,"genre",3,"innerHTML"],[1,"cost",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,bi,24,18,"div",0),2&t&&e.Q6J("ngIf",null!==n.upgrade)},dependencies:[d.O5,ae],styles:[".skill[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff;max-width:400px}.skill[_ngcontent-%COMP%]   .inner-box[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]:before{border-color:primary-color(400)}.skill[_ngcontent-%COMP%]  .value, .skill[_ngcontent-%COMP%]  .rank .current, .skill[_ngcontent-%COMP%]  .head{color:#ce4607}.skill[_ngcontent-%COMP%]  .mag .value{color:#bb1fe2}.skill[_ngcontent-%COMP%]  .range, .skill[_ngcontent-%COMP%]  .range .value, .skill[_ngcontent-%COMP%]  .details, .skill[_ngcontent-%COMP%]  .details .value, .skill[_ngcontent-%COMP%]  .formula, .skill[_ngcontent-%COMP%]  .formula .value{color:#686868}.skill[_ngcontent-%COMP%]  .affixes .range, .skill[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.skill[_ngcontent-%COMP%]  .life{color:#257539}.skill[_ngcontent-%COMP%]  .value.mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value, .skill.mag[_ngcontent-%COMP%]  .rank .current, .skill.mag[_ngcontent-%COMP%]  .head{color:#bb1fe2}.skill.mag[_ngcontent-%COMP%]  .value.mana, .skill.mag[_ngcontent-%COMP%]  .rank .current.mana, .skill.mag[_ngcontent-%COMP%]  .head.mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value.life, .skill.mag[_ngcontent-%COMP%]  .rank .current.life, .skill.mag[_ngcontent-%COMP%]  .head.life{color:#257539}.skill[_ngcontent-%COMP%]   .head.head[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.head[_ngcontent-%COMP%]{text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:20px;padding:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{display:flex;align-items:center}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border:3px solid rgb(190,135,31);min-width:60px;min-height:60px;width:60px;height:60px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black;image-rendering:pixelated;width:54px;height:54px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-transform:uppercase;height:100%;flex-grow:1;padding:5px 0;gap:5px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#3155bc}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]{display:flex;flex-direction:row}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{min-width:8px;padding-right:8px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;background-color:#ce4607;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}"]}),a})();function Oi(a,o){if(1&a&&e._UZ(0,"app-skill-upgrade-view",8),2&a){const t=e.oxw(3);e.Q6J("upgrade",t.upgrade)}}function xi(a,o){if(1&a&&e.YNc(0,Oi,1,1,"ng-template",7),2&a){e.oxw();const t=e.MAs(1),n=e.oxw();e.Q6J("cdkConnectedOverlayOpen",n.showOverlay)("cdkConnectedOverlayOrigin",t)}}function yi(a,o){if(1&a&&(e.TgZ(0,"div",1,2)(2,"div",3),e._UZ(3,"img",4),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.YNc(6,xi,1,2,null,6),e.qZA()),2&a){const t=e.oxw();e.ekj("hidden-search",t.hiddenBySearch)("passive",t.isPassive(t.upgrade))("readonly",t.readonly),e.xp6(2),e.ekj("equipped",t.equipped),e.xp6(1),e.Q6J("src",t.upgrade.icon,e.LSH),e.xp6(1),e.ekj("max",t.upgrade.rank===t.upgrade.maxRank),e.xp6(1),e.Oqu(t.upgrade.rank===t.upgrade.maxRank?"Max":t.upgrade.rank),e.xp6(1),e.Q6J("ngIf",t.showOverlay&&t.overlay)}}let ve=(()=>{class a extends O.B{constructor(t){super(),this.searchService=t,this.upgrade=null,this.selected=!1,this.equipped=!1,this.overlay=!1,this.readonly=!1,this.hiddenBySearch=!1,this.showOverlay=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}ngOnInit(){this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.hiddenBySearch=null!==t&&null!==this.upgrade&&!this.searchService.upgradeMatchSearch(this.upgrade))}isPassive(t){return t.type===c.Wak.Passive}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(q.o))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-upgrade-slot"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})},inputs:{upgrade:"upgrade",selected:"selected",equipped:"equipped",overlay:"overlay",readonly:"readonly"},features:[e.qOj],decls:1,vars:1,consts:[["class","upgrade","cdkOverlayOrigin","",3,"hidden-search","passive","readonly",4,"ngIf"],["cdkOverlayOrigin","",1,"upgrade"],["trigger","cdkOverlayOrigin"],[1,"equipped-border"],[1,"skill-icon",3,"src"],[1,"rank"],[4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"upgrade"]],template:function(t,n){1&t&&e.YNc(0,yi,7,13,"div",0),2&t&&e.Q6J("ngIf",null!==n.upgrade)},dependencies:[d.O5,y.pI,y.xu,Ce],styles:[".upgrade[_ngcontent-%COMP%]{background-color:#101010;position:relative;z-index:1}.upgrade.hidden-search[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.2}.upgrade.passive[_ngcontent-%COMP%], .upgrade.passive[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%], .upgrade.passive[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.upgrade[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{position:absolute;background-color:#202020;padding:0 2px;bottom:0;right:0;font-size:10px;border-radius:4px}.upgrade[_ngcontent-%COMP%]   .rank.max[_ngcontent-%COMP%]{color:#edd371}.upgrade[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]{width:46px;height:46px;position:relative;border:3px solid black;padding:2px;background-color:#202020}.upgrade[_ngcontent-%COMP%]   .equipped-border.equipped[_ngcontent-%COMP%]{background-color:#edd371}.upgrade[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black}.upgrade[_ngcontent-%COMP%]:not(.readonly)   .equipped-border[_ngcontent-%COMP%]{cursor:pointer}.upgrade.readonly[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]{padding:0;border-width:4px;width:44px;height:44px}.upgrade.readonly[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-width:0}"]}),a})();function Pi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.maximize(i.selectedSkill))}),e._uU(1," Maximize skill and support ranks "),e.qZA()}}function Si(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.equipSupport(i.selectedSkill))}),e._uU(1," Equip as Support skill "),e.qZA()}}function ki(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.equipPrimary(i.selectedSkill))}),e._uU(1," Equip as Primary skill "),e.qZA()}}function Ti(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.equipSecondary(i.selectedSkill))}),e._uU(1," Equip as Secondary skill "),e.qZA()}}function wi(a,o){if(1&a&&(e.YNc(0,Pi,2,0,"button",4),e.YNc(1,Si,2,0,"button",4),e.YNc(2,ki,2,0,"button",4),e.YNc(3,Ti,2,0,"button",4)),2&a){const t=e.oxw();e.Q6J("ngIf",null!==t.selectedSkill),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedSupportSkill(t.selectedSkill)&&t.isSupport(t.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedPrimarySkill(t.selectedSkill)&&!t.isSupport(t.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedSecondarySkill(t.selectedSkill)&&!t.isSupport(t.selectedSkill))}}let Zi=(()=>{class a extends O.B{constructor(t,n,i){super(),this.buildStorageService=t,this.slormancerSkillService=n,this.slormancerCharacterModifierService=i,this.selectedSkill=null,this.menu=null}ngOnInit(){}openSettings(){return null!==this.menu&&this.menu.openMenu(),!1}isSupport(t){return t.skill.type===c.Wak.Support}maximize(t){if(null!==this.buildStorageService.getLayer()){t.skill.baseLevel=t.skill.maxLevel,this.slormancerSkillService.updateSkillModel(t.skill);for(const i of t.upgrades)i.baseRank=i.maxRank,this.slormancerSkillService.updateUpgradeModel(i);this.buildStorageService.saveLayer()}}equipSupport(t){const n=this.buildStorageService.getLayer();null!==n&&this.slormancerCharacterModifierService.setSupportSkill(n.character,t.skill)&&this.buildStorageService.saveLayer()}equipPrimary(t){const n=this.buildStorageService.getLayer();null!==n&&this.slormancerCharacterModifierService.setPrimarySkill(n.character,t.skill)&&this.buildStorageService.saveLayer()}equipSecondary(t){const n=this.buildStorageService.getLayer();null!==n&&this.slormancerCharacterModifierService.setSecondarySkill(n.character,t.skill)&&this.buildStorageService.saveLayer()}isEquippedSupportSkill(t){const n=this.buildStorageService.getLayer();return null!==n&&n.character.supportSkill===t.skill}isEquippedPrimarySkill(t){const n=this.buildStorageService.getLayer();return null!==n&&n.character.primarySkill===t.skill}isEquippedSecondarySkill(t){const n=this.buildStorageService.getLayer();return null!==n&&n.character.secondarySkill===t.skill}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x),e.Y36(c.AR$),e.Y36(c.Y5A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-settings-skills"]],viewQuery:function(t,n){if(1&t&&e.Gf(b.p6,7),2&t){let i;e.iGM(i=e.CRH())&&(n.menu=i.first)}},inputs:{selectedSkill:"selectedSkill"},features:[e.qOj],decls:5,vars:2,consts:[[3,"matMenuTriggerFor","contextmenu"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-icon",0),e.NdJ("contextmenu",function(){return n.openSettings()}),e._uU(1,"settings"),e.qZA(),e.TgZ(2,"mat-menu",1,2),e.YNc(4,wi,4,4,"ng-template",3),e.qZA()),2&t){const i=e.MAs(3);e.Q6J("matMenuTriggerFor",i),e.xp6(2),e.Q6J("overlapTrigger",!0)}},dependencies:[d.O5,T.Hw,b.VK,b.OP,b.p6,b.KA],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#505050}"]}),a})();function Ai(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",7)(1,"img",8),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.incrementSkill(r))})("contextmenu",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.decrementSkill(r))}),e.qZA()()}if(2&a){const t=o.$implicit,n=e.oxw(2);e.ekj("selected",n.isSkillSelected(t)),e.xp6(1),e.ekj("equipped",n.isSkillEquipped(t)),e.Q6J("src","assets/img/icon/"+t.skill.iconLarge+".png",e.LSH)}}function qi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",7)(1,"img",9),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.incrementSkill(r))})("contextmenu",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.decrementSkill(r))}),e.qZA()()}if(2&a){const t=o.$implicit,n=e.oxw(2);e.ekj("selected",n.isSkillSelected(t)),e.xp6(1),e.ekj("equipped",n.isSkillEquipped(t)),e.Q6J("src","assets/img/icon/"+t.skill.icon+".png",e.LSH)}}function Ii(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-upgrade-slot",23),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.incrementUpgrade(r))})("contextmenu",function(){const r=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.decrementUpgrade(r))}),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw(4);e.Q6J("upgrade",t)("equipped",n.isUpgradeEquipped(t))}}function Li(a,o){if(1&a&&(e.TgZ(0,"div",19)(1,"div",20),e._uU(2),e.qZA(),e.TgZ(3,"div",21),e.YNc(4,Ii,1,2,"app-upgrade-slot",22),e.qZA()()),2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(2),e.hij(" ",t," "),e.xp6(2),e.Q6J("ngForOf",n.getLineUpgrades(t))}}function Ui(a,o){if(1&a&&(e.TgZ(0,"div",10)(1,"div",11),e._UZ(2,"app-settings-skills",12)(3,"app-skill-view",13),e.qZA(),e.TgZ(4,"div",14)(5,"div",15),e.YNc(6,Li,5,2,"div",16),e.qZA()(),e.TgZ(7,"div",17),e._UZ(8,"app-skill-upgrade-view",18),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("selectedSkill",t.selectedSkill),e.xp6(1),e.Q6J("skill",t.selectedSkill.skill),e.xp6(3),e.Q6J("ngForOf",t.selectedSkillLines),e.xp6(2),e.Q6J("upgrade",t.selectedUpgrade)}}function Ni(a,o){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",1),e.YNc(3,Ai,2,5,"div",2),e.YNc(4,qi,2,5,"div",2),e.TgZ(5,"div",3),e._uU(6),e.TgZ(7,"span",4),e._uU(8),e.qZA(),e._UZ(9,"img",5),e.qZA()(),e.YNc(10,Ui,9,4,"div",6),e.qZA()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.getSupportSkills(t.character)),e.xp6(1),e.Q6J("ngForOf",t.getActiveSkills(t.character)),e.xp6(2),e.hij(" ",t.MIGHT_MESSAGE," : "),e.xp6(2),e.Oqu(t.character.might.skill),e.xp6(2),e.Q6J("ngIf",null!==t.selectedSkill)}}let Ji=(()=>{class a extends O.B{constructor(t,n,i,r){super(),this.buildStorageService=t,this.slormancerSkillService=n,this.slormancerCharacterModifierService=i,this.slormancerTranslateService=r,this.character=null,this.selectedSkill=null,this.selectedUpgrade=null,this.selectedSkillLines=[],this.MIGHT_MESSAGE=this.slormancerTranslateService.translate("bonus_raw_damage")}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>{this.character=null===t?null:t.character,this.updateSelectedSkill()})}updateSelectedSkill(){const t=this.character,n=this.selectedSkill;let i=null;null===t?i=null:null===n?i=(0,c.lA$)(null!==t.supportSkill?t.skills.find(r=>r.skill===t.supportSkill):t.skills[0]):(i=(0,c.lA$)(t.skills.find(r=>r.skill.id===n.skill.id)),null===i&&(i=(0,c.lA$)(t.skills[0]))),this.selectSkill(i)}getSupportSkills(t){return t.skills.filter(n=>n.skill.type===c.Wak.Support)}getActiveSkills(t){return t.skills.filter(n=>n.skill.type===c.Wak.Active)}isSkillEquipped(t){return null!==this.character&&(this.character.primarySkill===t.skill||this.character.secondarySkill===t.skill||this.character.supportSkill===t.skill)}isEquippedSupportSkill(t){return null!==this.character&&this.character.supportSkill===t.skill}isEquippedPrimarySkill(t){return null!==this.character&&this.character.primarySkill===t.skill}isEquippedSecondarySkill(t){return null!==this.character&&this.character.secondarySkill===t.skill}isSkillSelected(t){return this.selectedSkill===t}selectSkill(t){this.selectedSkill!==t&&(this.selectedSkill=t,this.selectedSkillLines=null===t?[]:t.upgrades.map(n=>n.line).filter(c.mrA).sort(),this.selectedUpgrade=null===t?null:(0,c.lA$)(t.upgrades[0]))}incrementSkill(t){return console.log(t.skill),this.selectedSkill===t?t.skill.baseLevel<t.skill.maxLevel&&(t.skill.baseLevel++,this.slormancerSkillService.updateSkillModel(t.skill),this.buildStorageService.saveLayer()):this.selectSkill(t),!1}decrementSkill(t){return this.selectedSkill===t?t.skill.baseLevel>1&&(t.skill.baseLevel--,this.slormancerSkillService.updateSkillModel(t.skill),this.buildStorageService.saveLayer()):this.selectSkill(t),!1}getLineUpgrades(t){let n=[];return null!==this.selectedSkill&&(n=this.selectedSkill.upgrades.filter(i=>i.line===t).sort((i,r)=>(0,c.quX)(i.order,r.order))),n}isUpgradeEquipped(t){let n=!1;return null!==this.selectedSkill&&(n=void 0!==this.selectedSkill.selectedUpgrades.find(i=>t.id===i)),n}incrementUpgrade(t){if(console.log(t),null!==this.selectedSkill&&null!==this.character){let n=!1;this.selectedUpgrade!==t&&(this.selectedUpgrade=t,n=!0),this.isUpgradeEquipped(t)?!n&&t.baseRank<t.maxRank&&(t.baseRank++,this.slormancerSkillService.updateUpgradeModel(t),this.buildStorageService.saveLayer()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,t),0===t.baseRank&&(t.baseRank=1,this.slormancerSkillService.updateUpgradeModel(t)),this.buildStorageService.saveLayer())}return!1}decrementUpgrade(t){if(console.log(t),null!==this.selectedSkill&&null!==this.character){let n=!1;this.selectedUpgrade!==t&&(this.selectedUpgrade=t,n=!0),this.isUpgradeEquipped(t)?!n&&t.baseRank>1&&(t.baseRank--,this.slormancerSkillService.updateUpgradeModel(t),this.buildStorageService.saveLayer()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,t),this.buildStorageService.saveLayer())}return!1}isSupport(t){return t.skill.type===c.Wak.Support}equipSupport(t){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,t.skill),this.buildStorageService.saveLayer())}equipPrimary(t){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,t.skill),this.buildStorageService.saveLayer())}equipSecondary(t){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,t.skill),this.buildStorageService.saveLayer())}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x),e.Y36(c.AR$),e.Y36(c.Y5A),e.Y36(c.n6D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skills"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"skills"],["class","skill-option",3,"selected",4,"ngFor","ngForOf"],[1,"might"],[1,"value"],["src","assets/img/icon/stat/physical.png"],["class","skill",4,"ngIf"],[1,"skill-option"],[1,"skill-icon","support",3,"src","click","contextmenu"],[1,"skill-icon",3,"src","click","contextmenu"],[1,"skill"],[1,"selected-skill"],[3,"selectedSkill"],[3,"skill"],[1,"slormancer-tooltip","upgrades"],[1,"inner-box"],["class","line",4,"ngFor","ngForOf"],[1,"selected-upgrade"],[3,"upgrade"],[1,"line"],[1,"number"],[1,"line-upgrades"],[3,"upgrade","equipped","click","contextmenu",4,"ngFor","ngForOf"],[3,"upgrade","equipped","click","contextmenu"]],template:function(t,n){1&t&&e.YNc(0,Ni,11,5,"mat-card",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.sg,d.O5,x.a8,x.dn,de,Ce,ve,Zi],styles:['[_nghost-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]{height:100%}.skills[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;height:48px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]{transition:padding-top .1s linear;padding-top:0}.skills[_ngcontent-%COMP%]   .skill-option.selected[_ngcontent-%COMP%]{padding-top:8px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-color:#353535;cursor:pointer}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img.equipped[_ngcontent-%COMP%]{border-color:#edd371}.skills[_ngcontent-%COMP%]   .might[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:4px;padding-bottom:12px}.skills[_ngcontent-%COMP%]   .might[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#ce4607}.skills[_ngcontent-%COMP%]   .might[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px;image-rendering:pixelated}.skill[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:16px;flex-grow:16px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]{position:relative;min-width:350px;width:350px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%]{flex-grow:1}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;z-index:1}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:relative;width:28px;height:28px;border:2px solid black;border-radius:17px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]:before{content:" ";position:absolute;inset:0;border:2px solid #202020;border-radius:15px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:12px;position:relative;padding-left:20px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:-2px;right:1px;height:2px;width:100%;background-color:#202020;border:2px solid black;border-left:0;border-right:0}']}),a})();function Ei(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Ri(a,o){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function Bi(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,n.mergedStat.suffix,!0)," ")}}function Qi(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Bi,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,n.mergedStat.suffix,!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function Fi(a,o){if(1&a&&(e.ynx(0),e.YNc(1,Qi,10,4,"div",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.extra&&!t.synergy)}}function Hi(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(5),e.hij(" +",n.valueToString(t.value,n.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function Yi(a,o){if(1&a&&(e.ynx(0),e.YNc(1,Hi,10,3,"div",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.extra)}}function Di(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlat(t.mergedStat),t.mergedStat.suffix)," ")}}function Vi(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Ei,2,0,"span",2),e.qZA(),e.YNc(9,Ri,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,Fi,2,1,"ng-container",12),e.YNc(15,Yi,2,1,"ng-container",12),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,Di,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlat(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function ji(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Gi(a,o){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function Ki(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,"%",!0)," ")}}function Xi(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Percent"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Ki,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,"%",!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function $i(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Percent"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(5),e.hij(" +",n.valueToString(t.value,"%")," "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function zi(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalPercent(t.mergedStat),"%",!0)," ")}}function Wi(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,ji,2,0,"span",2),e.qZA(),e.YNc(9,Gi,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,Xi,10,4,"div",15),e.YNc(15,$i,10,3,"div",15),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Percent (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,zi,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Percent values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.percent),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxPercent),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalPercent(t.mergedStat),"%",!0)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function eo(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function to(a,o){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function no(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,"%",!0)," ")}}function ao(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,no,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,"%",!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function io(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(5),e.hij(" ",n.maxValueToString(t.value,"%",!0)," "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function oo(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,eo,2,0,"span",2),e.qZA(),e.YNc(9,to,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,ao,10,4,"div",15),e.YNc(15,io,10,3,"div",15),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Multiplier values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.multiplier),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxMultiplier)}}function ro(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function co(a,o){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function lo(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,n.mergedStat.suffix,!0)," ")}}function so(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,lo,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,n.mergedStat.suffix,!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function go(a,o){if(1&a&&(e.ynx(0),e.YNc(1,so,10,4,"div",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function uo(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(5),e.hij(" +",n.valueToString(t.value,n.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function po(a,o){if(1&a&&(e.ynx(0),e.YNc(1,uo,10,3,"div",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function mo(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlatExtra(t.mergedStat),t.mergedStat.suffix)," ")}}function _o(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,ro,2,0,"span",2),e.qZA(),e.YNc(9,co,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,go,2,1,"ng-container",12),e.YNc(15,po,2,1,"ng-container",12),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,mo,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat extra values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlatExtra(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function ho(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function fo(a,o){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function Co(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,"%",!0)," ")}}function vo(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Co,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,"%",!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function Mo(a,o){if(1&a&&(e.ynx(0),e.YNc(1,vo,10,4,"div",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function bo(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(5),e.hij(" ",n.maxValueToString(t.value,"%",!0)," "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function Oo(a,o){if(1&a&&(e.ynx(0),e.YNc(1,bo,10,3,"div",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function xo(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,ho,2,0,"span",2),e.qZA(),e.YNc(9,fo,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,Mo,2,1,"ng-container",12),e.YNc(15,Oo,2,1,"ng-container",12),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat extra multipliers"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.multiplier),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxMultiplier)}}function yo(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Po(a,o){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function So(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,n.mergedStat.suffix,!0)," ")}}function ko(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,So,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,n.mergedStat.suffix,!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function To(a,o){if(1&a&&(e.ynx(0),e.YNc(1,ko,10,4,"div",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.synergy)}}function wo(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(5),e.hij(" +",n.valueToString(t.value,n.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function Zo(a,o){if(1&a&&(e.ynx(0),e.YNc(1,wo,10,3,"div",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.synergy)}}function Ao(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlatSynergy(t.mergedStat),t.mergedStat.suffix)," ")}}function qo(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,yo,2,0,"span",2),e.qZA(),e.YNc(9,Po,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,To,2,1,"ng-container",12),e.YNc(15,Zo,2,1,"ng-container",12),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,Ao,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Gained from conversion"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlatSynergy(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Io(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1," (Min)"),e.qZA())}function Lo(a,o){if(1&a&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Formula"),e.YNc(3,Io,2,0,"span",2),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.totalHasMinMax(t.mergedStat)),e.xp6(2),e.hij(" ",t.getMinFormula(t.mergedStat)," ")}}function Uo(a,o){if(1&a&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Formula (Max)"),e.qZA(),e.TgZ(3,"div",16),e._uU(4),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(4),e.hij(" ",t.getMaxFormula(t.mergedStat)," ")}}function No(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.maxValueToString(t.mergedStat.total,t.mergedStat.suffix)," ")}}function Jo(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.mergedStat.totalDisplayed,t.mergedStat.suffix)," ")}}function Eo(a,o){if(1&a&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Total (shown in stats)"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Jo,2,1,"div",8),e._UZ(6,"div",9)(7,"div",10),e.qZA()),2&a){const t=e.oxw(2);e.xp6(4),e.hij(" ",t.minValueToString(t.mergedStat.totalDisplayed,t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Ro(a,o){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,Vi,24,7,"ng-container",2),e.YNc(2,Wi,24,7,"ng-container",2),e.YNc(3,oo,16,5,"ng-container",2),e.YNc(4,_o,24,7,"ng-container",2),e.YNc(5,xo,16,5,"ng-container",2),e.YNc(6,qo,24,7,"ng-container",2),e.TgZ(7,"h3",3),e._uU(8),e.qZA(),e.YNc(9,Lo,6,2,"div",4),e.YNc(10,Uo,5,1,"div",4),e.TgZ(11,"div",5)(12,"div",6),e._uU(13,"Total"),e.qZA(),e.TgZ(14,"div",7),e._uU(15),e.qZA(),e.YNc(16,No,2,1,"div",8),e._UZ(17,"div",9)(18,"div",10),e.qZA(),e.YNc(19,Eo,8,2,"div",4),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.hasFlatValues(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.mergedStat.values.percent.length>0||t.mergedStat.values.maxPercent.length>0),e.xp6(1),e.Q6J("ngIf",t.mergedStat.values.multiplier.length>0||t.mergedStat.values.maxMultiplier.length>0),e.xp6(1),e.Q6J("ngIf",t.hasFlatExtraValues(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.hasMultipliersExtraValues(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.hasFlatSynergyValues(t.mergedStat)),e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Total"),e.xp6(1),e.Q6J("ngIf",t.showFormula(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.showFormula(t.mergedStat)&&t.totalHasMinMax(t.mergedStat)),e.xp6(5),e.hij(" ",t.minValueToString(t.mergedStat.total,t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(3),e.Q6J("ngIf",t.hasDisplayPrecision(t.mergedStat))}}let Bo=(()=>{class a{constructor(t,n){this.slormancerTranslateService=t,this.slormancerStatUpdaterService=n,this.mergedStat=null,this.percent=!1}translate(t){return this.slormancerTranslateService.translate(t)}getSource(t){let n="";return"synergy"in t?n="Synergy":"character"in t?n="Character":"skill"in t?n="Skill":"upgrade"in t?n="Upgrade":"item"in t?n="Item":"ancestralLegacy"in t?n="Ancestral Legacy":"attribute"in t?n="Attribute":"reaper"in t?n="Reaper":"activable"in t?n="Activable":"mechanic"in t?n="Mechanic":"classMechanic"in t?n="Class Mechanic":"ultimatum"in t?n="Ultimatum":"rune"in t?n="Rune":"might"in t&&(n="Might"),n}getSourceName(t){let n="";return"synergy"in t?n=t.synergy:"skill"in t?n=t.skill.nameLabel:"upgrade"in t?n=t.upgrade.name:"item"in t?n=t.item.name:"ancestralLegacy"in t?n=t.ancestralLegacy.name:"attribute"in t?n=t.attribute.attributeName:"reaper"in t?n=t.reaper.name:"activable"in t?n=t.activable.name:"mechanic"in t?n=t.mechanic.name:"classMechanic"in t?n=t.classMechanic.name:"ultimatum"in t?n=t.ultimatum.title:"rune"in t?n=t.rune.name:"might"in t&&(n=t.might),n}valueToString(t,n){return"number"==typeof t?(0,c.D$L)((0,c.NMM)(t,5))+n:(0,c.D$L)((0,c.NMM)(t.min,5))+n+"-"+(0,c.D$L)((0,c.NMM)(t.max,5))+n}minValueToString(t,n,i=!1){const r=(0,c.NMM)("number"==typeof t?t:t.min,5);return(r>=0&&i?"+":"")+(0,c.D$L)(r)+n}maxValueToString(t,n,i=!1){const r=(0,c.NMM)("number"==typeof t?t:t.max,5);return(r>=0&&i?"+":"")+(0,c.D$L)(r)+n}getTotalFlat(t){return this.slormancerStatUpdaterService.getTotalFlat(t)}getTotalFlatExtra(t){return this.slormancerStatUpdaterService.getTotalFlatExtra(t)}getTotalFlatSynergy(t){return this.slormancerStatUpdaterService.getTotalFlatSynergy(t)}getTotalPercent(t){const n=this.slormancerStatUpdaterService.addNumberValues(t.values.percent.map(r=>r.value)),i=n+this.slormancerStatUpdaterService.addNumberValues(t.values.maxPercent.map(r=>r.value));return n!==i?{min:n,max:i}:n}getTotalFlatPercent(t){const n=this.slormancerStatUpdaterService.getTotalFlatAndPercent(t);return this.valueToString(n,t.suffix)}getTotal(t){const n=this.slormancerStatUpdaterService.getTotal(t,!0);return this.valueToString(n,t.suffix)}hasFlatValues(t){return t.values.flat.filter(n=>!n.extra&&!n.synergy).length>0||t.values.max.filter(n=>!n.extra).length>0}hasFlatExtraValues(t){return t.values.flat.filter(n=>n.extra).length>0||t.values.max.filter(n=>n.extra).length>0}hasFlatSynergyValues(t){return t.values.flat.filter(n=>n.synergy).length>0}hasMultiplierValues(t){return t.values.multiplier.filter(n=>!n.extra).length>0||t.values.maxMultiplier.filter(n=>!n.extra).length>0}hasMultipliersExtraValues(t){return t.values.multiplier.filter(n=>n.extra).length>0||t.values.maxMultiplier.filter(n=>n.extra).length>0}hasPercentValues(t){return t.values.percent.length>0||t.values.maxPercent.length>0}showFormula(t){return(this.hasFlatValues(t)?1:0)+(this.hasFlatExtraValues(t)?1:0)+(this.hasFlatSynergyValues(t)?1:0)+(this.hasPercentValues(t)?1:0)+(this.hasMultiplierValues(t)?1:0)+(this.hasMultipliersExtraValues(t)?1:0)+(this.slormancerStatUpdaterService.hasDiminishingResult(t.stat)?1:0)>=2}totalHasMinMax(t){return"number"!=typeof t.total}toMultipliersFormula(t){return t.filter(n=>0!==n).map(n=>" * "+(n+100)/100).join("")}getMinFormula(t){let f,n=this.slormancerStatUpdaterService.getTotal(t,!1),i=this.slormancerStatUpdaterService.getTotalFlat(t),r=this.slormancerStatUpdaterService.getTotalPercent(t),s=t.values.multiplier.filter(v=>!v.extra).map(v=>v.value),g=t.values.multiplier.filter(v=>v.extra).map(v=>v.value),p=this.slormancerStatUpdaterService.getTotalFlatExtra(t),m=this.slormancerStatUpdaterService.getTotalFlatSynergy(t);return i="number"==typeof i?i:i.min,r="number"==typeof r?r:r.min,p="number"==typeof p?p:p.min,m="number"==typeof m?m:m.min,this.slormancerStatUpdaterService.hasDiminishingResult(t.stat)?f="( 1 - "+[i,r,...s,...g].filter(v=>0!==v).map(v=>Math.max(0,100-v)/100).join(" * ")+") * 100":(f=this.valueToString(i,t.suffix)+this.toMultipliersFormula([r,...s]),0!==p&&(f="("+f+") "+(p>0?"+ "+p:"- "+Math.abs(p))),g.length>0&&(f="("+f+")"+this.toMultipliersFormula(g)),0!==m&&(f="("+f+") "+(m>0?"+ "+m:"- "+Math.abs(m))),f="round("+f+")"),(0,c.NMM)("number"==typeof n?n:n.min,5)+" = "+this.suroundWitMmax(t,f)}getMaxFormula(t){let n=this.slormancerStatUpdaterService.getTotal(t,!0),i=this.slormancerStatUpdaterService.getTotalFlat(t),r=this.slormancerStatUpdaterService.getTotalPercent(t),s=this.slormancerStatUpdaterService.getTotalFlatExtra(t),g=this.slormancerStatUpdaterService.getTotalFlatSynergy(t);const p=t.values.multiplier.filter(v=>!v.extra).map(v=>v.value);let m=t.values.multiplier.filter(v=>v.extra).map(v=>v.value);i="number"==typeof i?i:i.max,r="number"==typeof r?r:r.max,s="number"==typeof s?s:s.max,g="number"==typeof g?g:g.max;let f=(0,c.NMM)("number"==typeof n?n:n.max,5)+" = ",P=this.valueToString(i,t.suffix)+this.toMultipliersFormula([r,...p]);return 0!==s&&(P="("+P+") "+(s>0?"+ "+s:"- "+Math.abs(s))),m.length>0&&(P="("+P+")"+this.toMultipliersFormula(m)),0!==g&&(P="("+P+") "+(g>0?"+ "+g:"- "+Math.abs(g))),f+=this.suroundWitMmax(t,"round("+P+")"),f}hasDisplayPrecision(t){return t.totalDisplayed!==t.total}suroundWitMmax(t,n){return"number"==typeof t.maximum&&(n="min("+t.maximum+", "+n+")"),n}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(c.n6D),e.Y36(c.Cfl))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-merged-stat-view"]],inputs:{mergedStat:"mergedStat",percent:"percent"},decls:1,vars:1,consts:[["class","merged-stat",4,"ngIf"],[1,"merged-stat"],[4,"ngIf"],[1,"section"],["class","line total",4,"ngIf"],[1,"line","total"],[1,"label"],[1,"value"],["class","value",4,"ngIf"],[1,"source"],[1,"source-name"],[1,"line","head"],[4,"ngFor","ngForOf"],["class","line data",4,"ngIf"],[1,"line","data"],["class","line data",4,"ngFor","ngForOf"],[1,"formula"]],template:function(t,n){1&t&&e.YNc(0,Ro,20,12,"div",0),2&t&&e.Q6J("ngIf",null!==n.mergedStat)},dependencies:[d.sg,d.O5],styles:[".merged-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:not(.data){padding:8px 0}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-grow:3;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-grow:6;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line.data[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.merged-stat[_ngcontent-%COMP%]   .line.head[_ngcontent-%COMP%]{text-transform:uppercase}"]}),a})();function Qo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"main")(1,"mat-card",1)(2,"mat-card-content")(3,"app-main-stats",2),e.NdJ("selected",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.selectMergedStat(i))}),e.qZA()()(),e.TgZ(4,"mat-card")(5,"mat-card-content"),e._UZ(6,"app-merged-stat-view",3),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("stats",t.stats),e.xp6(3),e.Q6J("mergedStat",t.selectedMergedStat)}}const Fo=[{path:"",component:ot,children:[{path:"inventory",component:Ci},{path:"skills",component:Ji},{path:"ancestral-legacies",component:kt},{path:"attributes",component:Gt},{path:"stats",component:(()=>{class a extends O.B{constructor(t){super(),this.buildStorageService=t,this.stats=null,this.selectedMergedStat=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>{this.stats=null===t?null:t.character.stats})}selectMergedStat(t){console.log(t),this.selectedMergedStat=t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-stats"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"stats"],[3,"stats","selected"],[3,"mergedStat"]],template:function(t,n){1&t&&e.YNc(0,Qo,7,2,"main",0),2&t&&e.Q6J("ngIf",null!==n.stats)},dependencies:[d.O5,x.a8,x.dn,V,Bo],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:300px}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:unset}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}"]}),a})()},{path:"config",component:Nn},{path:"compare",component:_n},{path:"calcs",component:nn},{path:"**",redirectTo:"inventory"}]}];let Ho=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[k.Bz.forChild(Fo),k.Bz]}),a})(),Me=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.ez,B.m,Ho]}),a})();const Yo=[{path:"",component:(()=>{class a{constructor(t){this.router=t,this.created=new e.vpe}redirectToBuild(){this.router.navigate(["slorm-planner","build"])}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(k.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-first-build"]],decls:4,vars:0,consts:[[3,"created"]],template:function(t,n){1&t&&(e.TgZ(0,"main")(1,"mat-card")(2,"mat-card-content")(3,"app-create-build",0),e.NdJ("created",function(){return n.redirectToBuild()}),e.qZA()()()())},dependencies:[x.a8,x.dn,te],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:16px;padding:16px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;padding:16px;width:380px}@media (max-width: 374px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:0}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{width:auto;padding:0}}"]}),a})()}];let Do=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[k.Bz.forChild(Yo),k.Bz]}),a})(),be=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.ez,B.m,Do,y.U8]}),a})();function Vo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSummary=!i.showSummary)}),e._uU(1,"Show Stats"),e.qZA()}}function jo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSummary=!i.showSummary)}),e._uU(1,"Show Summary"),e.qZA()}}function Go(a,o){if(1&a&&(e.TgZ(0,"div",40),e._UZ(1,"app-upgrade-slot",41),e.qZA()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("upgrade",t)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function Ko(a,o){if(1&a&&(e.TgZ(0,"div",40),e._UZ(1,"app-upgrade-slot",41),e.qZA()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("upgrade",t)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function Xo(a,o){if(1&a&&(e.TgZ(0,"div",23)(1,"h4"),e._uU(2,"Extra passives"),e.qZA(),e.TgZ(3,"div",24)(4,"div",27),e.YNc(5,Ko,2,5,"div",28),e.qZA()()()),2&a){const t=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",t.getExtraPassives())}}function $o(a,o){if(1&a&&(e.TgZ(0,"div",40),e._UZ(1,"app-upgrade-slot",41),e.qZA()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("upgrade",t)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function zo(a,o){if(1&a&&(e.TgZ(0,"div",40),e._UZ(1,"app-upgrade-slot",41),e.qZA()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("upgrade",t)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function Wo(a,o){if(1&a&&(e.TgZ(0,"div",34),e._UZ(1,"app-ancestral-legacy-slot",42),e.qZA()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ancestralLegacy",t)("readonly",!0)("overlay",!0)}}function er(a,o){if(1&a&&e._UZ(0,"app-attribute-line",44),2&a){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("short",!0)("readonly",!0)("iconShift",!0)("attribute",n.character.attributes.allocated[t])("remainingPoints",n.character.attributes.remainingPoints)}}function tr(a,o){if(1&a&&(e.ynx(0),e.YNc(1,er,1,5,"app-attribute-line",43),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.showAttribute(t))}}function nr(a,o){if(1&a&&(e.TgZ(0,"mat-card",9)(1,"mat-card-content")(2,"div",10)(3,"div",11)(4,"div",12)(5,"div",13),e._uU(6),e.qZA(),e._UZ(7,"img",14),e.qZA(),e.TgZ(8,"div",12)(9,"div",13),e._uU(10),e.qZA(),e._UZ(11,"img",15),e.qZA()(),e.TgZ(12,"div",16)(13,"div",12)(14,"div",13),e._uU(15),e.qZA(),e._UZ(16,"img",17),e.qZA(),e.TgZ(17,"div",12)(18,"div",13),e._uU(19),e.qZA(),e._UZ(20,"img",18),e.qZA()(),e.TgZ(21,"div",19)(22,"div",12)(23,"div",13),e._uU(24),e.qZA(),e._UZ(25,"img",20),e.qZA(),e.TgZ(26,"div",12)(27,"div",13),e._uU(28),e.qZA(),e._UZ(29,"img",21),e.qZA(),e.TgZ(30,"div",12)(31,"div",13),e._uU(32),e.qZA(),e._UZ(33,"img",22),e.qZA()()(),e.TgZ(34,"div",23)(35,"h4"),e._uU(36,"Support Skill"),e.qZA(),e.TgZ(37,"div",24)(38,"div",25),e._UZ(39,"app-skill-slot",26),e.qZA(),e.TgZ(40,"div",27),e.YNc(41,Go,2,5,"div",28),e.qZA()()(),e.YNc(42,Xo,6,1,"div",29),e.TgZ(43,"div",23)(44,"h4"),e._uU(45,"Primary Skill"),e.qZA(),e.TgZ(46,"div",24)(47,"div",25),e._UZ(48,"app-skill-slot",30),e.qZA(),e.TgZ(49,"div",27),e.YNc(50,$o,2,5,"div",28),e.qZA()()(),e.TgZ(51,"div",23)(52,"h4"),e._uU(53,"Secondary Skill"),e.qZA(),e.TgZ(54,"div",24)(55,"div",25),e._UZ(56,"app-skill-slot",30),e.qZA(),e.TgZ(57,"div",27),e.YNc(58,zo,2,5,"div",28),e.qZA()()(),e.TgZ(59,"div",31)(60,"div",32)(61,"h4"),e._uU(62,"Activables"),e.qZA(),e.TgZ(63,"div",33)(64,"div",34),e._UZ(65,"app-activable-slot",35),e.qZA(),e.TgZ(66,"div",34),e._UZ(67,"app-activable-slot",35),e.qZA(),e.TgZ(68,"div",34),e._UZ(69,"app-activable-slot",35),e.qZA(),e.TgZ(70,"div",34),e._UZ(71,"app-activable-slot",35),e.qZA()()(),e.TgZ(72,"div",36)(73,"h4"),e._uU(74,"Ancestral Legacies"),e.qZA(),e.TgZ(75,"div",33),e.YNc(76,Wo,2,3,"div",37),e.qZA()()(),e.TgZ(77,"div",38),e.YNc(78,tr,2,1,"ng-container",39),e.qZA()()()),2&a){const t=e.oxw();e.xp6(5),e.Q6J("matTooltip",t.PHYSICAL_DAMAGE_LABEL),e.xp6(1),e.Oqu(t.getPhysicalDamages()),e.xp6(3),e.Q6J("matTooltip",t.ELEMENTAL_DAMAGE_LABEL),e.xp6(1),e.Oqu(t.getElementalDamages()),e.xp6(4),e.Q6J("matTooltip",t.MAX_LIFE_LABEL),e.xp6(1),e.Oqu(t.getMaximumLife()),e.xp6(3),e.Q6J("matTooltip",t.MAX_MANA_LABEL),e.xp6(1),e.Oqu(t.getMaximumMana()),e.xp6(4),e.Q6J("matTooltip",t.MAX_ARMOR_LABEL),e.xp6(1),e.Oqu(t.getArmor()),e.xp6(3),e.Q6J("matTooltip",t.MAX_ELEMENTAL_RESISTANCE_LABEL),e.xp6(1),e.Oqu(t.getElementalResistance()),e.xp6(3),e.Q6J("matTooltip",t.MAX_DODGE_LABEL),e.xp6(1),e.Oqu(t.getDodge()),e.xp6(7),e.Q6J("readonly",!0)("skill",t.character.supportSkill)("support",!0),e.xp6(2),e.Q6J("ngForOf",t.getSkillUpgrades(t.character.supportSkill)),e.xp6(1),e.Q6J("ngIf",t.hasExtraPassives()),e.xp6(6),e.Q6J("readonly",!0)("skill",t.character.primarySkill),e.xp6(2),e.Q6J("ngForOf",t.getSkillUpgrades(t.character.primarySkill)),e.xp6(6),e.Q6J("readonly",!0)("skill",t.character.secondarySkill),e.xp6(2),e.Q6J("ngForOf",t.getSkillUpgrades(t.character.secondarySkill)),e.xp6(7),e.Q6J("activable",t.character.activable1)("readonly",!0),e.xp6(2),e.Q6J("activable",t.character.activable2)("readonly",!0),e.xp6(2),e.Q6J("activable",t.character.activable3)("readonly",!0),e.xp6(2),e.Q6J("activable",t.character.activable4)("readonly",!0),e.xp6(5),e.Q6J("ngForOf",t.getAncestralLegacies()),e.xp6(2),e.Q6J("ngForOf",t.ALL_ATTRIBUTES)}}function ar(a,o){if(1&a&&(e.TgZ(0,"mat-card",45)(1,"mat-card-content"),e._UZ(2,"app-main-stats",46),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("stats",t.character.stats)}}let ir=(()=>{class a{constructor(t,n,i,r,s,g,p){this.router=n,this.buildStorageService=i,this.buildService=r,this.slormancerCharacterUpdaterService=s,this.slormancerDpsService=g,this.slormancerTranslateService=p,this.PHYSICAL_DAMAGE_LABEL=this.slormancerTranslateService.translate("tt_physical_damage"),this.ELEMENTAL_DAMAGE_LABEL=this.slormancerTranslateService.translate("tt_elemental_damage"),this.MAX_LIFE_LABEL=this.slormancerTranslateService.translate("max_health"),this.MAX_MANA_LABEL=this.slormancerTranslateService.translate("max_mana"),this.MAX_ARMOR_LABEL=this.slormancerTranslateService.translate("armor"),this.MAX_DODGE_LABEL=this.slormancerTranslateService.translate("dodge"),this.MAX_ELEMENTAL_RESISTANCE_LABEL=this.slormancerTranslateService.translate("elemental_resist"),this.ALL_ATTRIBUTES=c.AFD,this.showSummary=!0,this.combatBuffControl=new l.NI(!1);const m=t.snapshot.data.sharedData;this.character=m.character,this.defaultConfig=Object.assign({},c.g5j),this.combatConfig=Object.assign({},c.m2A),null!==m.configuration&&(this.defaultConfig=Object.assign(Object.assign({},this.defaultConfig),m.configuration),this.combatConfig=Object.assign(Object.assign({},this.combatConfig),m.configuration)),this.config=this.defaultConfig,this.combatBuffControl.valueChanges.subscribe(()=>this.updateConfiguration()),this.updateConfiguration()}updateConfiguration(){this.config=Object.assign({},this.combatBuffControl.value?this.combatConfig:this.defaultConfig);const t=[this.character.primarySkill,this.character.secondarySkill,this.character.activable1,this.character.activable2,this.character.activable3,this.character.activable4].filter(c.BXh).map(n=>"manaCost"in n?n.manaCost:n.cost).filter(c.BXh);this.config.minimum_unreserved_mana=Math.max(...t,0),this.slormancerCharacterUpdaterService.updateCharacter(this.character,this.config)}getStat(t){let n=0;const i=this.character.stats.find(r=>r.stat===t);return i&&(n=i.total),n}valueToString(t){return"number"==typeof t?t.toString():t.min+"-"+t.max}getPhysicalDamages(){const t=this.getStat("critical_chance"),n=this.getStat("critical_damage"),i=this.getStat("ancestral_chance"),r=this.getStat("ancestral_damage"),s=this.getStat("physical_damage");return this.valueToString(Math.round(this.slormancerDpsService.getAverageHitDamage(s,t,i,n,r)))}getElementalDamages(){const t=this.getStat("critical_chance"),n=this.getStat("critical_damage"),i=this.getStat("ancestral_chance"),r=this.getStat("ancestral_damage"),s=this.getStat("elemental_damage");return this.valueToString(Math.round(this.slormancerDpsService.getAverageHitDamage(s,t,i,n,r)))}getMaximumLife(){return this.valueToString(this.getStat("max_health"))}getMaximumMana(){return this.valueToString(this.getStat("max_mana"))}getArmor(){return this.valueToString(this.getStat("armor"))}getDodge(){return this.valueToString(this.getStat("dodge"))}getElementalResistance(){return this.valueToString(this.getStat("elemental_resist"))}getSkillUpgrades(t){let n=[];const i=this.character.skills.find(r=>r.skill===t);return i&&(n=i.upgrades.filter(r=>i.activeUpgrades.includes(r.id))),n}hasExtraPassives(){return this.getExtraPassives().length>0}getExtraPassives(){return this.character.skills.filter(t=>t.skill.type===c.Wak.Support&&t.skill!==this.character.supportSkill).map(t=>t.upgrades.filter(n=>t.activeUpgrades.includes(n.id))).flat()}getAncestralLegacies(){return this.character.ancestralLegacies.ancestralLegacies.filter(t=>this.character.ancestralLegacies.activeAncestralLegacies.includes(t.id))}showAttribute(t){return this.character.attributes.allocated[t].rank>0}import(){const t=Object.assign(Object.assign({},this.config),{maxed_upgrades:null}),n=this.buildService.createBuildWithCharacter("Imported build","Imported layer",this.character,t);this.buildStorageService.addBuild(n),this.router.navigate(["slorm-planner","build"])}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(k.gz),e.Y36(k.F0),e.Y36(C.x),e.Y36(L),e.Y36(c.Pdp),e.Y36(c.vHF),e.Y36(c.n6D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-view-character"]],decls:18,vars:12,consts:[[1,"equipment"],[3,"character","readonly"],[1,"weapon"],[3,"readonly","character"],["color","primary",3,"formControl"],["color","primary","mat-flat-button","",3,"click"],["color","primary","mat-flat-button","",3,"click",4,"ngIf"],["class","summary",4,"ngIf"],["class","stats",4,"ngIf"],[1,"summary"],[1,"stats-summary"],[1,"damages"],[1,"cell"],[1,"value",3,"matTooltip"],["src","assets/img/icon/stat/physical.png"],["src","assets/img/icon/stat/magical.png"],[1,"ressources"],["src","assets/img/icon/stat/life.png"],["src","assets/img/icon/stat/mana.png"],[1,"defenses"],["src","assets/img/icon/stat/armor.png"],["src","assets/img/icon/stat/elemental_resistance.png"],["src","assets/img/icon/stat/dodge.png"],[1,"skill-info"],[1,"skill-line"],[1,"skill"],[3,"readonly","skill","support"],[1,"upgrades"],["class","upgrade",4,"ngFor","ngForOf"],["class","skill-info",4,"ngIf"],[3,"readonly","skill"],[1,"activables-ancestral-legacies"],[1,"activables"],[1,"slots"],[1,"slot"],[3,"activable","readonly"],[1,"ancestral-legacies"],["class","slot",4,"ngFor","ngForOf"],[1,"attributes"],[4,"ngFor","ngForOf"],[1,"upgrade"],[3,"upgrade","readonly","overlay","equipped","selected"],[3,"ancestralLegacy","readonly","overlay"],[3,"short","readonly","iconShift","attribute","remainingPoints",4,"ngIf"],[3,"short","readonly","iconShift","attribute","remainingPoints"],[1,"stats"],[3,"stats"]],template:function(t,n){1&t&&(e.TgZ(0,"main")(1,"mat-card",0)(2,"mat-card-content")(3,"h3"),e._uU(4),e.qZA(),e._UZ(5,"app-character-equipment",1),e.TgZ(6,"div",2),e._UZ(7,"app-reaper-slot",3)(8,"app-runes-slot",1),e.qZA()(),e.TgZ(9,"mat-card-actions")(10,"mat-checkbox",4),e._uU(11,"Activate combat buffs"),e.qZA(),e.TgZ(12,"button",5),e.NdJ("click",function(){return n.import()}),e._uU(13,"Import"),e.qZA(),e.YNc(14,Vo,2,0,"button",6),e.YNc(15,jo,2,0,"button",6),e.qZA()(),e.YNc(16,nr,79,35,"mat-card",7),e.YNc(17,ar,3,1,"mat-card",8),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.character.fullName),e.xp6(1),e.Q6J("character",n.character)("readonly",!0),e.xp6(2),e.Q6J("readonly",!0)("character",n.character),e.xp6(1),e.Q6J("character",n.character)("readonly",!0),e.xp6(2),e.Q6J("formControl",n.combatBuffControl),e.xp6(4),e.Q6J("ngIf",n.showSummary),e.xp6(1),e.Q6J("ngIf",!n.showSummary),e.xp6(1),e.Q6J("ngIf",n.showSummary),e.xp6(1),e.Q6J("ngIf",!n.showSummary))},dependencies:[d.sg,d.O5,S.lW,x.a8,x.dn,x.hq,j.oG,Z.gM,l.JJ,l.oH,ge,pe,ue,_e,ve,ie,oe,V,fe],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:16px;padding:16px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]{min-width:490px;max-width:490px;width:490px}@media (max-width: 768px){main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]{width:auto;min-width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:4px}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   .weapon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:48px;margin:auto 16px 16px;padding:12px;background-color:#161412;border:3px solid rgb(60,60,60)}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-right:auto}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{width:490px}@media (max-width: 768px){main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:400}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:4px;font-size:large}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:4px;flex-grow:1;flex-basis:0;border-radius:16px;border:4px solid black;background-color:#202020;height:56px;padding:8px}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;text-align:center}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:16px;min-height:48px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{width:80px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%]{flex-grow:1}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%]   .upgrade[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%]   .upgrade[_ngcontent-%COMP%]{padding:4px;float:left}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px}@media (max-width: 768px){main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:8px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{padding:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:8px;flex-grow:1}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{padding:4px;display:block;float:left}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]{min-height:48px;flex-grow:1}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{padding:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%]{padding:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%]   app-attribute-line[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%]   app-attribute-line[_ngcontent-%COMP%]{float:left}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:725px;padding-right:16px;overflow:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:auto}}"]}),a})(),Oe=(()=>{class a{constructor(t,n,i){this.importExportService=t,this.messageService=n,this.router=i}back(){this.router.navigateByUrl("/")}resolve(t){return new Promise(n=>{const i=(0,c.lA$)(t.params.key);if(null!==i){const r=this.importExportService.import(i);null!==r.character?n(r):(this.messageService.error("Failed to load shared character"),this.back())}else this.back()})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(F),e.LFG(R.e),e.LFG(k.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac}),a})();const or=[{path:"build/:key",component:ir,resolve:{sharedData:Oe}}];let rr=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[Oe],imports:[k.Bz.forChild(or),k.Bz]}),a})(),xe=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.ez,B.m,rr,y.U8]}),a})(),ye=(()=>{class a{constructor(t,n){this.buildStorageService=t,this.router=n}canActivate(){return 0!==this.buildStorageService.getBuilds().length||(this.router.navigate(["slorm-planner","create"]),!1)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(C.x),e.LFG(k.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac}),a})(),Pe=(()=>{class a{constructor(t,n){this.buildStorageService=t,this.router=n}canActivate(){return!(this.buildStorageService.getBuilds().length>0&&(this.router.navigate(["slorm-planner","build"]),1))}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(C.x),e.LFG(k.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac}),a})();const cr=[{path:"build",canActivate:[ye],loadChildren:()=>Me},{path:"view",loadChildren:()=>xe},{path:"create",canActivate:[Pe],loadChildren:()=>be},{path:"**",pathMatch:"full",redirectTo:"build"}];let lr=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[ye,Pe],imports:[k.Bz.forChild(cr),k.Bz]}),a})(),sr=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.ez,B.m,lr,Me,xe,be]}),a})()}}]);