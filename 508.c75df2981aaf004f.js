"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[508],{6446:(k,I,_)=>{_.d(I,{B:()=>O});var n=_(7579),i=_(5e3);let O=(()=>{class c{constructor(){this.unsubscribe=new n.x}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=i.Xpm({type:c,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),c})()},8003:(k,I,_)=>{_.d(I,{K:()=>t});var n=_(5e3),i=_(9808);function O(s,g){if(1&s&&n._UZ(0,"div",11),2&s){const p=n.oxw(2);n.Q6J("innerHTML",p.activable.genresLabel,n.oJD)}}function c(s,g){if(1&s&&n._UZ(0,"div",12),2&s){const p=n.oxw(2);n.Q6J("innerHTML",p.activable.cooldownLabel,n.oJD)}}function C(s,g){if(1&s&&n._UZ(0,"div",13),2&s){const p=n.oxw(2);n.Q6J("innerHTML",p.activable.costLabel,n.oJD)}}function e(s,g){if(1&s&&(n.TgZ(0,"div",1)(1,"div",2)(2,"div",3),n._UZ(3,"img",4),n.qZA(),n.TgZ(4,"div",5)(5,"div",6),n._uU(6),n.qZA(),n.YNc(7,O,1,1,"div",7),n.YNc(8,c,1,1,"div",8),n.YNc(9,C,1,1,"div",9),n.qZA()(),n._UZ(10,"div",10),n.qZA()),2&s){const p=n.oxw();n.xp6(3),n.Q6J("src",p.activable.icon,n.LSH),n.xp6(3),n.Oqu(p.activable.name),n.xp6(1),n.Q6J("ngIf",null!==p.activable.genresLabel),n.xp6(1),n.Q6J("ngIf",null!==p.activable.cooldownLabel),n.xp6(1),n.Q6J("ngIf",null!==!p.activable.costLabel),n.xp6(1),n.Q6J("innerHTML",p.activable.description,n.oJD)}}let t=(()=>{class s{constructor(){this.activable=null,this.reinforcment=0}}return s.\u0275fac=function(p){return new(p||s)},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-activable-view"]],inputs:{activable:"activable",reinforcment:"reinforcment"},decls:1,vars:1,consts:[["class","activable",4,"ngIf"],[1,"activable"],[1,"activable-head"],[1,"icon"],["loading","lazy",3,"src"],[1,"info"],[1,"name"],["class","genre",3,"innerHTML",4,"ngIf"],["class","cooldown",3,"innerHTML",4,"ngIf"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"description",3,"innerHTML"],[1,"genre",3,"innerHTML"],[1,"cooldown",3,"innerHTML"],[1,"cost",3,"innerHTML"]],template:function(p,M){1&p&&n.YNc(0,e,11,6,"div",0),2&p&&n.Q6J("ngIf",null!==M.activable)},dependencies:[i.O5],styles:[".activable[_ngcontent-%COMP%]{background-color:#151412;border:3px solid black;color:#fff;padding:5px;display:flex;flex-direction:column;gap:5px}.activable[_ngcontent-%COMP%]  .value{color:#ce4607}.activable[_ngcontent-%COMP%]  .range, .activable[_ngcontent-%COMP%]  .range .value, .activable[_ngcontent-%COMP%]  .details, .activable[_ngcontent-%COMP%]  .details .value, .activable[_ngcontent-%COMP%]  .formula, .activable[_ngcontent-%COMP%]  .formula .value{color:#686868}.activable[_ngcontent-%COMP%]  .affixes .range, .activable[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.activable[_ngcontent-%COMP%]  .life{color:#257539}.activable[_ngcontent-%COMP%]  .mana{color:#3397dd}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;border:4px solid rgb(190,135,31);min-width:44px;min-height:44px;width:44px;height:44px}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:4px solid black;min-width:36px;min-height:36px;width:36px;height:36px}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:19px;color:#ce4607}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.activable[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}"]}),s})()},3761:(k,I,_)=>{_.d(I,{F:()=>F});var n=_(3075),i=_(2349),O=_(2419),c=_(311),C=_(1671),e=_(5e3);function t(P,L){if(1&P){const r=e.EpF();e.TgZ(0,"div",21)(1,"button",22),e.NdJ("click",function(){e.CHM(r);const S=e.oxw(2);return e.KtG(S.addBasicAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function s(P,L){if(1&P){const r=e.EpF();e.TgZ(0,"app-item-edit-stat",24),e.NdJ("remove",function(){e.CHM(r);const S=e.oxw().$implicit,J=e.oxw(3);return e.KtG(J.removeAffix(S))}),e.qZA()}if(2&P){const r=e.oxw().$implicit,v=e.oxw(3);e.Q6J("form",r)("itemBase",v.item.base)("itemLevel",v.item.level)("itemReinforcment",v.item.reinforcment)("alreadyUsedStats",v.alreadyUsedStats)("removable",!1)}}function g(P,L){if(1&P&&(e.ynx(0),e.YNc(1,s,1,6,"app-item-edit-stat",23),e.BQk()),2&P){const r=L.$implicit,v=e.oxw(3);e.xp6(1),e.Q6J("ngIf",v.isBasicStat(r))}}function p(P,L){if(1&P&&(e.ynx(0),e.YNc(1,g,2,1,"ng-container",14),e.BQk()),2&P){const r=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",r.form.controls.affixes.controls)}}function M(P,L){if(1&P){const r=e.EpF();e.TgZ(0,"div",21)(1,"button",22),e.NdJ("click",function(){e.CHM(r);const S=e.oxw(3);return e.KtG(S.addDefensiveAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function o(P,L){if(1&P&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Defensive Stats : "),e.qZA(),e.YNc(3,M,4,0,"div",11),e.qZA()),2&P){const r=e.oxw(2);e.xp6(3),e.Q6J("ngIf",r.hasBasicStats()&&!r.hasMaximumDefensiveStats())}}function l(P,L){if(1&P){const r=e.EpF();e.TgZ(0,"app-item-edit-stat",24),e.NdJ("remove",function(){e.CHM(r);const S=e.oxw().$implicit,J=e.oxw(2);return e.KtG(J.removeAffix(S))}),e.qZA()}if(2&P){const r=e.oxw().$implicit,v=e.oxw(2);e.Q6J("form",r)("itemBase",v.item.base)("itemLevel",v.item.level)("itemReinforcment",v.item.reinforcment)("alreadyUsedStats",v.alreadyUsedStats)("removable",!v.hasRareStats()&&!v.hasEpicStats()&&!v.hasMagicStats())}}function d(P,L){if(1&P&&(e.ynx(0),e.YNc(1,l,1,6,"app-item-edit-stat",23),e.BQk()),2&P){const r=L.$implicit,v=e.oxw(2);e.xp6(1),e.Q6J("ngIf",v.isDefensiveStat(r))}}function f(P,L){if(1&P){const r=e.EpF();e.TgZ(0,"div",21)(1,"button",22),e.NdJ("click",function(){e.CHM(r);const S=e.oxw(3);return e.KtG(S.addMagicAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function b(P,L){if(1&P&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Magic Stats : "),e.qZA(),e.YNc(3,f,4,0,"div",11),e.qZA()),2&P){const r=e.oxw(2);e.xp6(3),e.Q6J("ngIf",r.hasBasicStats()&&!r.hasMaximumMagicStats())}}function Z(P,L){if(1&P){const r=e.EpF();e.TgZ(0,"app-item-edit-stat",24),e.NdJ("remove",function(){e.CHM(r);const S=e.oxw().$implicit,J=e.oxw(2);return e.KtG(J.removeAffix(S))}),e.qZA()}if(2&P){const r=e.oxw().$implicit,v=e.oxw(2);e.Q6J("form",r)("itemBase",v.item.base)("itemLevel",v.item.level)("itemReinforcment",v.item.reinforcment)("alreadyUsedStats",v.alreadyUsedStats)("removable",!v.hasRareStats()&&!v.hasEpicStats())}}function y(P,L){if(1&P&&(e.ynx(0),e.YNc(1,Z,1,6,"app-item-edit-stat",23),e.BQk()),2&P){const r=L.$implicit,v=e.oxw(2);e.xp6(1),e.Q6J("ngIf",v.isMagicStat(r))}}function w(P,L){if(1&P){const r=e.EpF();e.TgZ(0,"div",21)(1,"button",22),e.NdJ("click",function(){e.CHM(r);const S=e.oxw(3);return e.KtG(S.addRareAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function N(P,L){if(1&P&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Rare Stats : "),e.qZA(),e.YNc(3,w,4,0,"div",11),e.qZA()),2&P){const r=e.oxw(2);e.xp6(3),e.Q6J("ngIf",r.hasMagicStats()&&!r.hasMaximumRareStats())}}function B(P,L){if(1&P){const r=e.EpF();e.TgZ(0,"app-item-edit-stat",24),e.NdJ("remove",function(){e.CHM(r);const S=e.oxw().$implicit,J=e.oxw(2);return e.KtG(J.removeAffix(S))}),e.qZA()}if(2&P){const r=e.oxw().$implicit,v=e.oxw(2);e.Q6J("form",r)("itemBase",v.item.base)("itemLevel",v.item.level)("itemReinforcment",v.item.reinforcment)("alreadyUsedStats",v.alreadyUsedStats)("removable",!v.hasEpicStats())}}function U(P,L){if(1&P&&(e.ynx(0),e.YNc(1,B,1,6,"app-item-edit-stat",23),e.BQk()),2&P){const r=L.$implicit,v=e.oxw(2);e.xp6(1),e.Q6J("ngIf",v.isRareStat(r))}}function H(P,L){if(1&P){const r=e.EpF();e.TgZ(0,"div",21)(1,"button",22),e.NdJ("click",function(){e.CHM(r);const S=e.oxw(3);return e.KtG(S.addEpicAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function D(P,L){if(1&P&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Epic Stats : "),e.qZA(),e.YNc(3,H,4,0,"div",11),e.qZA()),2&P){const r=e.oxw(2);e.xp6(3),e.Q6J("ngIf",r.hasRareStats()&&!r.hasMaximumEpicStats())}}function x(P,L){if(1&P){const r=e.EpF();e.TgZ(0,"app-item-edit-stat",24),e.NdJ("remove",function(){e.CHM(r);const S=e.oxw().$implicit,J=e.oxw(2);return e.KtG(J.removeAffix(S))}),e.qZA()}if(2&P){const r=e.oxw().$implicit,v=e.oxw(2);e.Q6J("form",r)("itemBase",v.item.base)("itemLevel",v.item.level)("itemReinforcment",v.item.reinforcment)("alreadyUsedStats",v.alreadyUsedStats)("removable",!0)}}function A(P,L){if(1&P&&(e.ynx(0),e.YNc(1,x,1,6,"app-item-edit-stat",23),e.BQk()),2&P){const r=L.$implicit,v=e.oxw(2);e.xp6(1),e.Q6J("ngIf",v.isEpicStat(r))}}function m(P,L){if(1&P){const r=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(r);const S=e.oxw();return e.KtG(S.submit())}),e.TgZ(1,"mat-dialog-content")(2,"div",2),e._UZ(3,"app-item-view",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),e._uU(8,"Item level"),e.qZA(),e._UZ(9,"input",7),e.TgZ(10,"mat-error"),e._uU(11),e.qZA()(),e.TgZ(12,"mat-form-field",6)(13,"mat-label"),e._uU(14,"Item reinforcment"),e.qZA(),e._UZ(15,"input",8),e.TgZ(16,"mat-error"),e._uU(17,"Reinforcment must be >= 0"),e.qZA()()(),e.TgZ(18,"div",9)(19,"div",10),e._uU(20," Base Stats : "),e.qZA(),e.YNc(21,t,4,0,"div",11),e.qZA(),e.YNc(22,p,2,1,"ng-container",12),e.YNc(23,o,4,1,"div",13),e.YNc(24,d,2,1,"ng-container",14),e.YNc(25,b,4,1,"div",13),e.YNc(26,y,2,1,"ng-container",14),e.YNc(27,N,4,1,"div",13),e.YNc(28,U,2,1,"ng-container",14),e.YNc(29,D,4,1,"div",13),e.YNc(30,A,2,1,"ng-container",14),e._UZ(31,"app-item-edit-legendary-effect",15)(32,"app-item-edit-buff-reaper",16)(33,"app-item-edit-buff-skill",17)(34,"app-item-edit-buff-attribute",16),e.qZA()(),e.TgZ(35,"mat-dialog-actions")(36,"button",18),e._uU(37,"Cancel"),e.qZA(),e.TgZ(38,"button",19),e.NdJ("click",function(){e.CHM(r);const S=e.oxw();return e.KtG(S.reset())}),e._uU(39,"Reset"),e.qZA(),e.TgZ(40,"button",20),e._uU(41,"Apply"),e.qZA()()()}if(2&P){const r=e.oxw();e.Q6J("formGroup",r.form),e.xp6(3),e.Q6J("item",r.item)("details",!0),e.xp6(6),e.Q6J("max",r.MAX_ITEM_LEVEL),e.xp6(2),e.hij("Level must be between 1 and ",r.MAX_ITEM_LEVEL,""),e.xp6(10),e.Q6J("ngIf",!r.hasMaximumBasicStats()),e.xp6(1),e.Q6J("ngIf",r.hasBasicStats()),e.xp6(1),e.Q6J("ngIf",r.hasBasicStats()),e.xp6(1),e.Q6J("ngForOf",r.form.controls.affixes.controls),e.xp6(1),e.Q6J("ngIf",r.hasBasicStats()),e.xp6(1),e.Q6J("ngForOf",r.form.controls.affixes.controls),e.xp6(1),e.Q6J("ngIf",r.hasMagicStats()),e.xp6(1),e.Q6J("ngForOf",r.form.controls.affixes.controls),e.xp6(1),e.Q6J("ngIf",r.hasRareStats()),e.xp6(1),e.Q6J("ngForOf",r.form.controls.affixes.controls),e.xp6(1),e.Q6J("base",r.item.base)("itemReinforcment",r.item.reinforcment)("heroClass",r.item.heroClass)("form",r.form.controls.legendary),e.xp6(1),e.Q6J("form",r.form.controls.reaper),e.xp6(1),e.Q6J("heroClass",r.item.heroClass)("form",r.form.controls.skill),e.xp6(1),e.Q6J("form",r.form.controls.attribute)}}let F=(()=>{class P{constructor(r,v,S,J,V,q,Y,K,Q){this.dialogRef=r,this.slormancerCharacterUpdaterService=v,this.slormancerItemService=S,this.slormancerAffixService=J,this.slormancerLegendaryEffectService=V,this.slormancerTranslationService=q,this.formOptionsService=Y,this.buildStorageService=K,this.MAX_ITEM_LEVEL=O.Sb7,this.maxBasicStats=0,this.alreadyUsedStats=[],this.form=new n.cw({level:new n.NI(0,{nonNullable:!0,validators:[n.kI.required,n.kI.min(1),n.kI.max(this.MAX_ITEM_LEVEL),n.kI.pattern(/^[0-9]+$/)]}),reinforcment:new n.NI(0,{nonNullable:!0,validators:[n.kI.required,n.kI.min(0),n.kI.pattern(/^[0-9]+$/)]}),affixes:new n.Oe([]),legendary:new n.cw({id:new n.NI(null),value:new n.NI(0,{nonNullable:!0,validators:[n.kI.required,n.kI.min(0),n.kI.pattern(/^[0-9]+$/)]})}),reaper:new n.cw({smith:new n.NI(null),value:new n.NI(0,{nonNullable:!0,validators:[n.kI.required,n.kI.min(0),n.kI.pattern(/^[0-9]+$/)]})}),attribute:new n.cw({attribute:new n.NI(null),value:new n.NI(0,{nonNullable:!0,validators:[n.kI.required,n.kI.min(0),n.kI.pattern(/^[0-9]+$/)]})}),skill:new n.cw({skill:new n.NI(null),value:new n.NI(0,{nonNullable:!0,validators:[n.kI.required,n.kI.min(0),n.kI.pattern(/^[0-9]+$/)]})})}),this.originalItem=Q.item,this.maxLevel=Q.maxLevel,this.form.valueChanges.subscribe(()=>{this.updatePreview(),this.alreadyUsedStats=this.form.controls.affixes.getRawValue().map(G=>G.stat)}),this.form.controls.affixes.valueChanges.subscribe(()=>{this.sortAffixes()}),this.character=Q.character,this.reset()}reset(){this.item=this.slormancerItemService.getEquipableItemClone(this.originalItem),this.form.controls.affixes.clear({emitEvent:!1});for(const r of this.item.affixes)this.form.controls.affixes.push(this.getAffixForm(),{emitEvent:!1});this.form.reset({level:this.item.level,reinforcment:this.item.reinforcment,affixes:this.item.affixes.map(r=>({pure:r.isPure,purity:r.pure,rarity:r.rarity,stat:r.craftedEffect.effect.stat,value:r.craftedEffect.craftedValue})),legendary:{id:null===this.item.legendaryEffect?null:this.item.legendaryEffect.id,value:null===this.item.legendaryEffect?0:this.item.legendaryEffect.value},attribute:{attribute:null===this.item.attributeEnchantment?null:this.item.attributeEnchantment.craftedAttribute,value:null===this.item.attributeEnchantment?0:this.item.attributeEnchantment.craftedValue},reaper:{smith:null===this.item.reaperEnchantment?null:this.item.reaperEnchantment.craftedReaperSmith,value:null===this.item.reaperEnchantment?0:this.item.reaperEnchantment.craftedValue},skill:{skill:null===this.item.skillEnchantment?null:this.item.skillEnchantment.craftedSkill,value:null===this.item.skillEnchantment?0:this.item.skillEnchantment.craftedValue}}),this.sortAffixes(),this.updatePreview()}submit(){this.form.valid&&this.dialogRef.close(this.item)}updatePreview(){const r=this.item;if(this.form.valid){const v=this.form.getRawValue();r.level=v.level,r.reinforcment=v.reinforcment,r.affixes=v.affixes.map(J=>this.slormancerAffixService.getAffixFromStat(J.stat,r.level,r.reinforcment,J.rarity,J.value,J.pure?J.purity:0)).filter(O.BXh),r.legendaryEffect=null===v.legendary.id?null:this.slormancerLegendaryEffectService.getLegendaryEffectById(v.legendary.id,v.legendary.value,r.reinforcment,r.heroClass),r.reaperEnchantment=null===v.reaper.smith?null:this.slormancerItemService.getReaperEnchantment(v.reaper.smith,v.reaper.value),r.skillEnchantment=null===v.skill.skill?null:this.slormancerItemService.getSkillEnchantment(v.skill.skill,v.skill.value),r.attributeEnchantment=null===v.attribute.attribute?null:this.slormancerItemService.getAttributeEnchantment(v.attribute.attribute,v.attribute.value),this.slormancerItemService.updateEquipableItemModel(r);const S=this.buildStorageService.getBuild();this.slormancerCharacterUpdaterService.updateCharacter(this.character,null!==S?S.configuration:O.g5j,!1,r),this.slormancerItemService.updateEquipableItemView(r)}}sortAffixes(){this.form.controls.affixes.controls.sort((r,v)=>(0,O.rR7)(this.slormancerTranslationService.translate(r.controls.stat.value),this.slormancerTranslationService.translate(v.controls.stat.value)))}getAffixForm(){return new n.cw({pure:new n.NI(!1,{nonNullable:!0,validators:n.kI.required}),purity:new n.NI(0,{nonNullable:!0,validators:n.kI.required}),rarity:new n.NI(O.uqS.Normal,{nonNullable:!0,validators:n.kI.required}),stat:new n.NI("",{nonNullable:!0,validators:n.kI.required}),value:new n.NI(0,{nonNullable:!0,validators:n.kI.required})})}affixToForm(r){const v=this.getAffixForm();return v.reset({pure:r.isPure,purity:r.pure,rarity:r.rarity,stat:r.craftedEffect.effect.stat,value:r.craftedEffect.craftedValue}),v}hasBasicStats(){return this.form.controls.affixes.controls.filter(r=>this.isBasicStat(r)).length>0}hasMaximumBasicStats(){return this.form.controls.affixes.controls.filter(r=>this.isBasicStat(r)).length>=this.maxBasicStats}hasDefensiveStats(){return this.form.controls.affixes.controls.filter(r=>this.isDefensiveStat(r)).length>0}hasMaximumDefensiveStats(){return this.form.controls.affixes.controls.filter(r=>this.isDefensiveStat(r)).length>=O.nKF}hasMagicStats(){return this.form.controls.affixes.controls.filter(r=>this.isMagicStat(r)).length>0}hasMaximumMagicStats(){return this.form.controls.affixes.controls.filter(r=>this.isMagicStat(r)).length>=O.aHw}isBasicStat(r){return r.controls.rarity.value===O.uqS.Normal}isDefensiveStat(r){return r.controls.rarity.value===O.uqS.Defensive}isMagicStat(r){return r.controls.rarity.value===O.uqS.Magic}isRareStat(r){return r.controls.rarity.value===O.uqS.Rare}isEpicStat(r){return r.controls.rarity.value===O.uqS.Epic}hasRareStats(){return this.form.controls.affixes.controls.filter(r=>this.isRareStat(r)).length>0}hasMaximumRareStats(){return this.form.controls.affixes.controls.filter(r=>this.isRareStat(r)).length>=O.bm}hasEpicStats(){return this.form.controls.affixes.controls.filter(r=>this.isEpicStat(r)).length>0}hasMaximumEpicStats(){return this.form.controls.affixes.controls.filter(r=>this.isEpicStat(r)).length>=O.hcO}getAffix(r){return null===this.item?null:(0,O.lA$)(this.item.affixes[r])}removeAffix(r){this.form.controls.affixes.removeAt(this.form.controls.affixes.controls.indexOf(r)),this.updatePreview()}addAffix(r){const S=this.formOptionsService.getStatsOptions(this.item.base,r).filter(J=>-1===this.alreadyUsedStats.indexOf(J.value))[0];if(S){const J=this.slormancerAffixService.getAffixFromStat(S.value,this.item.level,this.item.reinforcment,r,1e3);null!==J&&(this.form.controls.affixes.push(this.affixToForm(J)),this.updatePreview())}}addBasicAffix(){this.addAffix(O.uqS.Normal)}addDefensiveAffix(){this.addAffix(O.uqS.Defensive)}addMagicAffix(){this.addAffix(O.uqS.Magic)}addRareAffix(){this.addAffix(O.uqS.Rare)}addEpicAffix(){this.addAffix(O.uqS.Epic)}}return P.\u0275fac=function(r){return new(r||P)(e.Y36(i.so),e.Y36(O.Pdp),e.Y36(O.SgH),e.Y36(O.lRX),e.Y36(O.ArO),e.Y36(O.n6D),e.Y36(C.K),e.Y36(c.x),e.Y36(i.WI))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-item-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"preview"],[3,"item","details"],[1,"form"],[1,"form-line"],["appearance","outline"],["matInput","","type","number","step","1","min","1","formControlName","level",3,"max"],["matInput","","type","number","step","1","min","0","formControlName","reinforcment"],[1,"form-info"],[1,"label"],["class","add",4,"ngIf"],[4,"ngIf"],["class","form-info",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"base","itemReinforcment","heroClass","form"],[3,"form"],[3,"heroClass","form"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[3,"form","itemBase","itemLevel","itemReinforcment","alreadyUsedStats","removable","remove",4,"ngIf"],[3,"form","itemBase","itemLevel","itemReinforcment","alreadyUsedStats","removable","remove"]],template:function(r,v){1&r&&e.YNc(0,m,42,23,"form",0),2&r&&e.Q6J("ngIf",null!==v.form&&null!==v.item)},styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:16px;flex-grow:1;overflow:auto}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:370px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{align-items:stretch}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-basis:auto}}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;min-height:40px}"]}),P})()},4344:(k,I,_)=>{_.d(I,{F:()=>D});var n=_(2419),i=_(5e3),O=_(9808),c=_(8003);function C(x,A){1&x&&(i.TgZ(0,"div",20),i._uU(1,"Equipped"),i.qZA())}function e(x,A){if(1&x&&(i.TgZ(0,"li")(1,"div",24),i._UZ(2,"div"),i.qZA(),i._UZ(3,"div",25)(4,"div",26),i.qZA()),2&x){const m=A.$implicit;i.Gre("marks-",m.pureMarks,""),i.ekj("pure",m.isPure),i.xp6(2),i.Tol(m.rarity),i.xp6(1),i.Q6J("innerHTML",m.valueLabel,i.oJD),i.xp6(1),i.Q6J("innerHTML",m.statLabel,i.oJD)}}function t(x,A){if(1&x&&(i.TgZ(0,"div",21)(1,"div",22),i._uU(2,"Base Stats:"),i.qZA(),i.TgZ(3,"ul"),i.YNc(4,e,5,10,"li",23),i.qZA()()),2&x){const m=i.oxw(2);i.xp6(4),i.Q6J("ngForOf",m.getNormalAffixes())}}function s(x,A){if(1&x&&(i.TgZ(0,"li")(1,"div",24),i._UZ(2,"div"),i.qZA(),i._UZ(3,"div",25)(4,"div",26),i.qZA()),2&x){const m=A.$implicit;i.Gre("marks-",m.pureMarks,""),i.ekj("pure",m.isPure),i.xp6(2),i.Tol(m.rarity),i.xp6(1),i.Q6J("innerHTML",m.valueLabel,i.oJD),i.xp6(1),i.Q6J("innerHTML",m.statLabel,i.oJD)}}function g(x,A){if(1&x&&(i.TgZ(0,"div",21)(1,"div",22),i._uU(2,"Defensive Stats:"),i.qZA(),i.TgZ(3,"ul"),i.YNc(4,s,5,10,"li",23),i.qZA()()),2&x){const m=i.oxw(2);i.xp6(4),i.Q6J("ngForOf",m.getDefensiveAffixes())}}function p(x,A){if(1&x&&(i.TgZ(0,"li")(1,"div",24),i._UZ(2,"div"),i.qZA(),i._UZ(3,"div",25)(4,"div",26),i.qZA()),2&x){const m=A.$implicit;i.Gre("marks-",m.pureMarks,""),i.ekj("pure",m.isPure),i.xp6(2),i.Tol(m.rarity),i.xp6(1),i.Q6J("innerHTML",m.valueLabel,i.oJD),i.xp6(1),i.Q6J("innerHTML",m.statLabel,i.oJD)}}function M(x,A){if(1&x&&(i.TgZ(0,"div",21)(1,"div",22),i._uU(2,"Magic Stats:"),i.qZA(),i.TgZ(3,"ul"),i.YNc(4,p,5,10,"li",23),i.qZA()()),2&x){const m=i.oxw(2);i.xp6(4),i.Q6J("ngForOf",m.getMagicAffixes())}}function o(x,A){if(1&x&&(i.TgZ(0,"li")(1,"div",24),i._UZ(2,"div"),i.qZA(),i._UZ(3,"div",25)(4,"div",26),i.qZA()),2&x){const m=A.$implicit;i.Gre("marks-",m.pureMarks,""),i.ekj("pure",m.isPure),i.xp6(2),i.Tol(m.rarity),i.xp6(1),i.Q6J("innerHTML",m.valueLabel,i.oJD),i.xp6(1),i.Q6J("innerHTML",m.statLabel,i.oJD)}}function l(x,A){if(1&x&&(i.TgZ(0,"div",21)(1,"div",22),i._uU(2,"Rare Stats:"),i.qZA(),i.TgZ(3,"ul"),i.YNc(4,o,5,10,"li",23),i.qZA()()),2&x){const m=i.oxw(2);i.xp6(4),i.Q6J("ngForOf",m.getRareAffixes())}}function d(x,A){if(1&x&&(i.TgZ(0,"li")(1,"div",24),i._UZ(2,"div"),i.qZA(),i._UZ(3,"div",25)(4,"div",26),i.qZA()),2&x){const m=A.$implicit;i.Gre("marks-",m.pureMarks,""),i.ekj("pure",m.isPure),i.xp6(2),i.Tol(m.rarity),i.xp6(1),i.Q6J("innerHTML",m.valueLabel,i.oJD),i.xp6(1),i.Q6J("innerHTML",m.statLabel,i.oJD)}}function f(x,A){if(1&x&&(i.TgZ(0,"div",21)(1,"div",22),i._uU(2,"Epic Stats:"),i.qZA(),i.TgZ(3,"ul"),i.YNc(4,d,5,10,"li",23),i.qZA()()),2&x){const m=i.oxw(2);i.xp6(4),i.Q6J("ngForOf",m.getEpicAffixes())}}function b(x,A){if(1&x&&(i.TgZ(0,"span",35),i._uU(1),i.qZA()),2&x){const m=i.oxw(3);i.xp6(1),i.hij(" ",m.item.legendaryEffect.activable.name,"")}}function Z(x,A){if(1&x&&(i.TgZ(0,"div",6),i._UZ(1,"img",8),i.qZA()),2&x){const m=i.oxw(3);i.xp6(1),i.Q6J("src",m.item.legendaryEffect.skillIcon,i.LSH)}}function y(x,A){if(1&x&&(i.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",22)(4,"div",24),i._UZ(5,"div",30),i.qZA(),i._uU(6),i.TgZ(7,"div",24),i._UZ(8,"div",30),i.qZA()(),i.TgZ(9,"div",31),i._UZ(10,"span",32),i.YNc(11,b,2,1,"span",33),i.qZA(),i.YNc(12,Z,2,1,"div",34),i.qZA()()()),2&x){const m=i.oxw(2);i.xp6(6),i.hij(" ",m.item.legendaryEffect.title," "),i.xp6(4),i.Q6J("innerHTML",m.item.legendaryEffect.description,i.oJD),i.xp6(1),i.Q6J("ngIf",null!==m.item.legendaryEffect.activable),i.xp6(1),i.Q6J("ngIf",null!==m.item.legendaryEffect.skillIcon)}}function w(x,A){if(1&x&&i._UZ(0,"app-activable-view",36),2&x){const m=i.oxw(2);i.Q6J("activable",m.item.legendaryEffect.activable)("reinforcment",m.item.reinforcment)}}function N(x,A){if(1&x&&(i.TgZ(0,"div",37),i._UZ(1,"img",8)(2,"div",38),i.qZA()),2&x){const m=i.oxw(2);i.xp6(1),i.Q6J("src",m.item.reaperEnchantment.icon,i.LSH),i.xp6(1),i.Q6J("innerHTML",m.item.reaperEnchantment.label,i.oJD)}}function B(x,A){if(1&x&&(i.TgZ(0,"div",39),i._UZ(1,"img",8)(2,"div",38),i.qZA()),2&x){const m=i.oxw(2);i.xp6(1),i.Q6J("src",m.item.skillEnchantment.icon,i.LSH),i.xp6(1),i.Q6J("innerHTML",m.item.skillEnchantment.label,i.oJD)}}function U(x,A){if(1&x&&(i.TgZ(0,"div"),i._UZ(1,"img",8)(2,"div",38),i.qZA()),2&x){const m=i.oxw(2);i.Gre("buff attribute atr-",m.item.attributeEnchantment.craftedAttribute,""),i.xp6(1),i.Q6J("src",m.item.attributeEnchantment.icon,i.LSH),i.xp6(1),i.Q6J("innerHTML",m.item.attributeEnchantment.label,i.oJD)}}function H(x,A){if(1&x&&(i.TgZ(0,"div"),i._UZ(1,"div",1),i.TgZ(2,"div",2),i.YNc(3,C,2,0,"div",3),i.TgZ(4,"div",4)(5,"div",5)(6,"div",6),i._UZ(7,"img",7)(8,"img",8),i.qZA(),i.TgZ(9,"div",9),i._uU(10),i.qZA(),i.TgZ(11,"div",10),i._uU(12,"-"),i.qZA(),i.TgZ(13,"div",11),i._uU(14),i.qZA(),i.TgZ(15,"div"),i._uU(16),i.qZA()(),i._UZ(17,"div",12),i.TgZ(18,"div",13),i.YNc(19,t,5,1,"div",14),i.YNc(20,g,5,1,"div",14),i.YNc(21,M,5,1,"div",14),i.YNc(22,l,5,1,"div",14),i.YNc(23,f,5,1,"div",14),i.qZA()(),i.YNc(24,y,13,4,"div",15),i.YNc(25,w,1,2,"app-activable-view",16),i.YNc(26,N,3,2,"div",17),i.YNc(27,B,3,2,"div",18),i.YNc(28,U,3,5,"div",19),i.qZA()()),2&x){const m=i.oxw();i.Gre("item ",m.item.rarity,""),i.ekj("nodetails",!m.details),i.xp6(1),i.Q6J("innerHTML",m.item.name,i.oJD),i.xp6(2),i.Q6J("ngIf",m.equipped),i.xp6(4),i.Q6J("src",m.item.itemIconBackground,i.LSH),i.xp6(1),i.Q6J("src",m.item.icon,i.LSH),i.xp6(2),i.Oqu(m.item.rarityLabel),i.xp6(4),i.Oqu(m.item.baseLabel),i.xp6(2),i.Oqu(m.item.levelLabel),i.xp6(3),i.Q6J("ngIf",m.getNormalAffixes().length>0),i.xp6(1),i.Q6J("ngIf",m.getDefensiveAffixes().length>0),i.xp6(1),i.Q6J("ngIf",m.getMagicAffixes().length>0),i.xp6(1),i.Q6J("ngIf",m.getRareAffixes().length>0),i.xp6(1),i.Q6J("ngIf",m.getEpicAffixes().length>0),i.xp6(1),i.Q6J("ngIf",null!==m.item.legendaryEffect),i.xp6(1),i.Q6J("ngIf",null!==m.item.legendaryEffect&&null!==m.item.legendaryEffect.activable),i.xp6(1),i.Q6J("ngIf",null!==m.item.reaperEnchantment),i.xp6(1),i.Q6J("ngIf",null!==m.item.skillEnchantment),i.xp6(1),i.Q6J("ngIf",null!==m.item.attributeEnchantment)}}let D=(()=>{class x{constructor(){this.item=null,this.equipped=!1,this.details=!0}getNormalAffixes(){return null===this.item?[]:this.item.affixes.filter(m=>m.rarity===n.uqS.Normal)}getDefensiveAffixes(){return null===this.item?[]:this.item.affixes.filter(m=>m.rarity===n.uqS.Defensive)}getMagicAffixes(){return null===this.item?[]:this.item.affixes.filter(m=>m.rarity===n.uqS.Magic)}getRareAffixes(){return null===this.item?[]:this.item.affixes.filter(m=>m.rarity===n.uqS.Rare)}getEpicAffixes(){return null===this.item?[]:this.item.affixes.filter(m=>m.rarity===n.uqS.Epic)}}return x.\u0275fac=function(m){return new(m||x)},x.\u0275cmp=i.Xpm({type:x,selectors:[["app-item-view"]],inputs:{item:"item",equipped:"equipped",details:"details"},decls:1,vars:1,consts:[[3,"class","nodetails",4,"ngIf"],[1,"head",3,"innerHTML"],[1,"content"],["class","equipped",4,"ngIf"],[1,"main"],[1,"info"],[1,"icon"],[1,"background",3,"src"],[3,"src"],[1,"rarity"],[1,"split"],[1,"base"],[1,"separator"],[1,"stats"],["class","affixes",4,"ngIf"],["class","legendary-effect outer-border",4,"ngIf"],[3,"activable","reinforcment",4,"ngIf"],["class","buff reaper",4,"ngIf"],["class","buff skill",4,"ngIf"],[3,"class",4,"ngIf"],[1,"equipped"],[1,"affixes"],[1,"title"],[3,"pure","class",4,"ngFor","ngForOf"],[1,"bullet"],[1,"value",3,"innerHTML"],[1,"name",3,"innerHTML"],[1,"legendary-effect","outer-border"],[1,"border"],[1,"inner-border","legendary-description"],[1,"legendary"],[1,"description"],[3,"innerHTML"],["class","value",4,"ngIf"],["class","icon",4,"ngIf"],[1,"value"],[3,"activable","reinforcment"],[1,"buff","reaper"],[1,"info",3,"innerHTML"],[1,"buff","skill"]],template:function(m,F){1&m&&i.YNc(0,H,29,22,"div",0),2&m&&i.Q6J("ngIf",null!==F.item)},dependencies:[O.sg,O.O5,c.K],styles:['.item.normal[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#898989}.item.magic[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#2e8726}.item.rare[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#176ab1}.item.epic[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#c68d20}.item.legendary[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#ce4607}.item.normal[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#59513c}.item.magic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#61462d}.item.rare[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#7791a1}.item.epic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#efc65c}.item.legendary[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#f5b250}.bullet[_ngcontent-%COMP%]{min-width:8px}.bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}.bullet[_ngcontent-%COMP%]   div.normal[_ngcontent-%COMP%], .bullet[_ngcontent-%COMP%]   div.defensive[_ngcontent-%COMP%]{background-color:#898989}.bullet[_ngcontent-%COMP%]   div.magic[_ngcontent-%COMP%]{background-color:#2e8726}.bullet[_ngcontent-%COMP%]   div.rare[_ngcontent-%COMP%]{background-color:#176ab1}.bullet[_ngcontent-%COMP%]   div.epic[_ngcontent-%COMP%]{background-color:#c68d20}.bullet[_ngcontent-%COMP%]   div.legendary[_ngcontent-%COMP%]{background-color:#ce4607}.item[_ngcontent-%COMP%]{background-color:#151412;color:#fff;border:2px solid black;min-width:350px}.item[_ngcontent-%COMP%]  .legendary-effect .value, .item[_ngcontent-%COMP%]  .buff .value{color:#fff}.item[_ngcontent-%COMP%]  .range, .item[_ngcontent-%COMP%]  .range .value, .item[_ngcontent-%COMP%]  .details, .item[_ngcontent-%COMP%]  .details .value, .item[_ngcontent-%COMP%]  .formula, .item[_ngcontent-%COMP%]  .formula .value, .item[_ngcontent-%COMP%]  .pure-info, .item[_ngcontent-%COMP%]  .pure-info .value{color:#686868}.item[_ngcontent-%COMP%]  .affixes .range, .item[_ngcontent-%COMP%]  .affixes .value, .item[_ngcontent-%COMP%]  .pure-info{word-break:keep-all;white-space:nowrap}.item.nodetails[_ngcontent-%COMP%]     .details, .item.nodetails[_ngcontent-%COMP%]     .formula{display:none}.item[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{border:2px solid}.item[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%]{margin-bottom:2px;text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;padding:15px 10px;gap:15px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;text-transform:capitalize}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{min-width:80px;width:80px;display:flex;flex-direction:column;align-items:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{text-transform:capitalize;text-align:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{min-width:56px;min-height:56px;width:56px;height:56px;border:4px solid black;margin-bottom:10px;position:relative}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{background-color:#686868;min-width:2px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:10px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#686868}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;list-style:disc inside;padding-left:0}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:row;padding-left:5px;gap:5px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure[_ngcontent-%COMP%]{color:#46e7b0;background:linear-gradient(90deg,rgba(70,231,176,.3) 0%,rgba(70,231,176,0) 100%)}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure.marks-1[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:after{content:" !"}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure.marks-2[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:after{content:" !!"}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure.marks-3[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:after{content:" !!!"}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex-grow:1}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]{border:3px solid black}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border:2px solid rgb(46,44,37)}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   .inner-border[_ngcontent-%COMP%]{border:3px solid black}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:10px 30px;gap:5px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:5px;color:#686868}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{text-align:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-top:5px;min-width:36px;min-height:36px;width:36px;height:36px;border:3px solid black;padding:2px;background-color:#2e2c25}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff[_ngcontent-%COMP%]{border:3px solid rgb(59,56,49);padding:5px 36px;text-align:center;position:relative}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:-6px;top:50%;margin-top:-22px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.reaper[_ngcontent-%COMP%]{color:#148e89}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.skill[_ngcontent-%COMP%]{color:#ce4607}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-0[_ngcontent-%COMP%]{color:#2f5996}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-1[_ngcontent-%COMP%]{color:#a83007}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-2[_ngcontent-%COMP%]{color:#79b549}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-3[_ngcontent-%COMP%]{color:#d0b545}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-4[_ngcontent-%COMP%]{color:#4bc1b2}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-5[_ngcontent-%COMP%]{color:#753098}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-6[_ngcontent-%COMP%]{color:#cd7028}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-7[_ngcontent-%COMP%]{color:#bf3c59}']}),x})()},9762:(k,I,_)=>{_.d(I,{b:()=>o});var n=_(5e3),i=_(9808),O=_(8003);const c=["content"];function C(l,d){if(1&l&&n._UZ(0,"div",31),2&l){const f=n.oxw(2);n.Q6J("innerHTML",f.reaper.affinityLabel,n.oJD)}}function e(l,d){if(1&l&&n._UZ(0,"div",32),2&l){const f=n.oxw(2);n.Q6J("innerHTML",f.reaper.masteryLabel,n.oJD)}}function t(l,d){if(1&l&&(n.TgZ(0,"div",33)(1,"div",34)(2,"div",35),n._UZ(3,"div"),n.qZA(),n._uU(4),n.TgZ(5,"div",35),n._UZ(6,"div"),n.qZA()(),n._UZ(7,"div",25),n.qZA()),2&l){const f=n.oxw(2);n.xp6(4),n.Oqu(f.reaper.benedictionTitleLabel),n.xp6(3),n.Q6J("innerHTML",f.reaper.benediction,n.oJD)}}function s(l,d){if(1&l&&(n.TgZ(0,"div",36)(1,"div",34)(2,"div",35),n._UZ(3,"div"),n.qZA(),n._uU(4),n.TgZ(5,"div",35),n._UZ(6,"div"),n.qZA()(),n._UZ(7,"div",25),n.qZA()),2&l){const f=n.oxw(2);n.xp6(4),n.Oqu(f.reaper.maledictionTitleLabel),n.xp6(3),n.Q6J("innerHTML",f.reaper.malediction,n.oJD)}}function g(l,d){1&l&&n._UZ(0,"app-activable-view",39),2&l&&n.Q6J("activable",d.$implicit)}function p(l,d){if(1&l&&(n.TgZ(0,"div",37)(1,"div",34)(2,"div",35),n._UZ(3,"div"),n.qZA(),n._uU(4),n.TgZ(5,"div",35),n._UZ(6,"div"),n.qZA()(),n.YNc(7,g,1,1,"app-activable-view",38),n.qZA()),2&l){const f=n.oxw(2);n.xp6(4),n.Oqu(f.reaper.activablesTitleLabel),n.xp6(3),n.Q6J("ngForOf",f.reaper.activables)}}function M(l,d){if(1&l&&(n.TgZ(0,"div",1)(1,"div",2),n._uU(2),n.qZA(),n.TgZ(3,"div",3,4)(5,"div",5)(6,"div",6),n._UZ(7,"img",7),n.TgZ(8,"div",8),n._UZ(9,"div",9),n.qZA()(),n.TgZ(10,"div",10),n.YNc(11,C,1,1,"div",11),n.TgZ(12,"div",12)(13,"div",13),n._uU(14),n.qZA(),n._UZ(15,"div",14),n.qZA(),n.TgZ(16,"div",15)(17,"div",16),n._uU(18),n.qZA(),n._UZ(19,"div",17),n.YNc(20,e,1,1,"div",18),n.TgZ(21,"div",19),n._uU(22),n.qZA()(),n.TgZ(23,"div",20),n._UZ(24,"div",21),n.TgZ(25,"div",22),n._UZ(26,"span",23)(27,"span",24),n.qZA()()()(),n._UZ(28,"div",25),n.YNc(29,t,8,2,"div",26),n.YNc(30,s,8,2,"div",27),n.YNc(31,p,8,2,"div",28),n._UZ(32,"div",29)(33,"div",30),n.qZA()()),2&l){const f=n.oxw();n.Udp("max-height",f.maxHeight),n.ekj("mobile-view",f.tooltip),n.xp6(2),n.Oqu(f.reaper.name),n.xp6(5),n.ekj("primordial-effect",f.reaper.primordial),n.Q6J("src",f.reaper.icon,n.LSH),n.xp6(4),n.Q6J("ngIf",null!==f.reaper.affinityLabel),n.xp6(3),n.Oqu(f.reaper.type),n.xp6(1),n.Q6J("innerHTML",f.reaper.smithLabel,n.oJD),n.xp6(1),n.ekj("mastery",null!==f.reaper.masteryLabel),n.xp6(2),n.Oqu(f.reaper.damagesLabel),n.xp6(1),n.Q6J("innerHTML",f.reaper.damageTypeLabel,n.oJD),n.xp6(1),n.Q6J("ngIf",null!==f.reaper.masteryLabel),n.xp6(2),n.Oqu(f.reaper.maxDamagesLabel),n.xp6(2),n.Q6J("innerHTML",f.reaper.victimsLabel,n.oJD),n.xp6(2),n.Q6J("innerHTML",f.reaper.levelLabel,n.oJD),n.xp6(1),n.Q6J("innerHTML",f.reaper.bonusLevelLabel,n.oJD),n.xp6(1),n.Q6J("innerHTML",f.reaper.description,n.oJD),n.xp6(1),n.Q6J("ngIf",null!==f.reaper.benediction),n.xp6(1),n.Q6J("ngIf",null!==f.reaper.malediction),n.xp6(1),n.Q6J("ngIf",f.reaper.activables.length>0),n.xp6(2),n.Q6J("innerHTML",f.reaper.lore,n.oJD)}}let o=(()=>{class l{constructor(){this.reaper=null,this.maxHeight=null,this.tooltip=!1,this.content=null}scroll(f){this.content&&(this.content.nativeElement.scrollTop+=f.deltaY)}}return l.\u0275fac=function(f){return new(f||l)},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-reaper-view"]],viewQuery:function(f,b){if(1&f&&n.Gf(c,5),2&f){let Z;n.iGM(Z=n.CRH())&&(b.content=Z.first)}},inputs:{reaper:"reaper",maxHeight:"maxHeight",tooltip:"tooltip"},decls:1,vars:1,consts:[["class","reaper",3,"maxHeight","mobile-view",4,"ngIf"],[1,"reaper"],[1,"head"],[1,"content"],["content",""],[1,"info"],[1,"icon"],["loading","lazy",3,"src"],[1,"background-outer"],[1,"background"],[1,"summary"],["class","affinity",3,"innerHTML",4,"ngIf"],[1,"base"],[1,"type"],[1,"builder",3,"innerHTML"],[1,"damages"],[1,"current-damage"],[1,"type",3,"innerHTML"],["class","mastery-level",3,"innerHTML",4,"ngIf"],[1,"max-damage"],[1,"stats"],[1,"victim",3,"innerHTML"],[1,"level"],[1,"base",3,"innerHTML"],[1,"bonus",3,"innerHTML"],[1,"description",3,"innerHTML"],["class","benediction",4,"ngIf"],["class","malediction",4,"ngIf"],["class","activables",4,"ngIf"],[1,"separator"],[1,"lore",3,"innerHTML"],[1,"affinity",3,"innerHTML"],[1,"mastery-level",3,"innerHTML"],[1,"benediction"],[1,"title"],[1,"bullet"],[1,"malediction"],[1,"activables"],[3,"activable",4,"ngFor","ngForOf"],[3,"activable"]],template:function(f,b){1&f&&n.YNc(0,M,34,25,"div",0),2&f&&n.Q6J("ngIf",null!==b.reaper)},dependencies:[i.sg,i.O5,O.K],styles:['.reaper[_ngcontent-%COMP%]{background-color:#090909;color:#fff;border:2px solid black;width:350px;display:flex;flex-direction:column}@media (max-width: 768px){.reaper.mobile-view[_ngcontent-%COMP%]{position:fixed;top:5%;left:5%}}.reaper[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%], .reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{border:2px solid rgb(121,183,164)}.reaper[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%]{margin-bottom:2px;text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{overflow-y:auto}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;padding:15px 10px;gap:15px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:130px;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:stretch}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .background-outer[_ngcontent-%COMP%]{border:3px solid rgb(59,56,49);flex-grow:1;display:flex;flex-direction:column}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .background-outer[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{border:3px solid rgb(18,16,14);background-color:#22201c;flex-grow:1;height:150px;width:85px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin-top:-12.5%;margin-left:-12.5%;image-rendering:pixelated;transform:scale(4)}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;flex-grow:1;text-align:left;gap:10px;font-size:16px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .affinity[_ngcontent-%COMP%]{width:32px;height:32px;position:absolute;top:0;right:4px;text-align:center;display:flex;flex-direction:row;align-items:center;justify-content:center}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .affinity[_ngcontent-%COMP%]:before{content:"";border:3px solid rgb(59,56,49);width:100%;height:100%;position:absolute;left:-3px;top:-3px;transform:rotate(45deg)}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{text-transform:uppercase}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .damages.mastery[_ngcontent-%COMP%]{color:#ce4607}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .current-damage[_ngcontent-%COMP%]{font-size:30px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .max-damage[_ngcontent-%COMP%]{color:#686868}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{font-size:20px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]   .bonus[_ngcontent-%COMP%]{color:#148f8a}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{min-width:8px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{text-align:center}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]     .value{color:#148f8a}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]     .details{color:#686868}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#fff}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .benediction[_ngcontent-%COMP%]{color:#148f8a}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .benediction[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#61f7b7}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .malediction[_ngcontent-%COMP%]{color:#ff4722}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .malediction[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#d13001}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .malediction[_ngcontent-%COMP%]     .value, .reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .benediction[_ngcontent-%COMP%]     .value{color:#fff}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:5px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{background-color:#3b3831;margin:0 30px;height:4px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .lore[_ngcontent-%COMP%]{color:#b8b8b8;text-align:center}']}),l})()},4890:(k,I,_)=>{_.d(I,{G:()=>o});var n=_(2424),i=_(2419),O=_(2722),c=_(6446),C=_(5e3),e=_(9808),t=_(1314),s=_(7295);function g(l,d){if(1&l&&C._UZ(0,"img",8),2&l){const f=C.oxw(2);C.Q6J("src",f.rune.levelBorder,C.LSH)}}function p(l,d){if(1&l&&C._UZ(0,"app-rune-view",9),2&l){const f=C.oxw(2);C.Q6J("rune",f.rune)}}function M(l,d){if(1&l&&(C.ynx(0),C._UZ(1,"img",5),C.YNc(2,g,1,1,"img",6),C.YNc(3,p,1,1,"ng-template",7),C.BQk()),2&l){const f=C.oxw(),b=C.MAs(2);C.xp6(1),C.Gre("smith-",f.rune.reapersmith,""),C.ekj("aura",f.hasAura(f.rune)),C.Q6J("src",f.rune.runeIcon,C.LSH),C.xp6(1),C.Q6J("ngIf",f.showLevel),C.xp6(1),C.Q6J("cdkConnectedOverlayOpen",f.showOverlay)("cdkConnectedOverlayOrigin",b)}}let o=(()=>{class l extends c.B{constructor(f){super(),this.searchService=f,this.rune=null,this.showLevel=!0,this.selected=!1,this.showOverlay=!1,this.hiddenBySearch=!1,this.searchService.searchChanged.pipe((0,O.R)(this.unsubscribe)).subscribe(()=>this.updateSearch())}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}ngOnChanges(){this.updateSearch()}updateSearch(){this.hiddenBySearch=null!==this.rune&&this.searchService.hasSearch()&&!this.searchService.runeMatchSearch(this.rune)}hasAura(f){return f.type===i.evb.Effect}}return l.\u0275fac=function(f){return new(f||l)(C.Y36(n.o))},l.\u0275cmp=C.Xpm({type:l,selectors:[["app-rune-slot"]],hostBindings:function(f,b){1&f&&C.NdJ("mouseenter",function(){return b.onOver()})("mouseleave",function(){return b.onLeave()})},inputs:{rune:"rune",showLevel:"showLevel",selected:"selected"},features:[C.qOj,C.TTD],decls:5,vars:5,consts:[[1,"rune"],["cdkOverlayOrigin","",1,"overlay-position"],["trigger","cdkOverlayOrigin"],[1,"inner-slot"],[4,"ngIf"],[1,"rune-icon",3,"src"],["class","rune-level",3,"src",4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[1,"rune-level",3,"src"],[3,"rune"]],template:function(f,b){1&f&&(C.TgZ(0,"div",0),C._UZ(1,"div",1,2)(3,"div",3),C.YNc(4,M,4,9,"ng-container",4),C.qZA()),2&f&&(C.ekj("selected",b.selected)("hidden-search",b.hiddenBySearch),C.xp6(4),C.Q6J("ngIf",null!==b.rune))},dependencies:[e.O5,t.pI,t.xu,s.g],styles:['.rune[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;width:48px;height:48px}.rune[_ngcontent-%COMP%]   .overlay-position[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}.rune.hidden-search[_ngcontent-%COMP%]{opacity:.2}.rune[_ngcontent-%COMP%]:before{content:"";border:3px solid rgb(59,56,49);width:28px;height:28px;position:absolute;left:8px;top:8px;transform:rotate(45deg)}.rune.selected[_ngcontent-%COMP%]:before{border:3px solid rgb(206,70,7)}.rune[_ngcontent-%COMP%]   img.rune-icon[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level[_ngcontent-%COMP%]{image-rendering:pixelated;position:absolute;pointer-events:none;transform:scale(4)}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-0[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-0[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(227,97,16,.5))}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-1[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-1[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(175,245,60,.5))}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-2[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-2[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(191,159,16,.5))}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-3[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-3[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(207,19,44,.5))}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-4[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-4[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(170,54,191,.5))}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-5[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-5[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(35,174,247,.5))}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-6[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-6[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(84,246,178,.4))}.rune[_ngcontent-%COMP%]   img.rune-icon[_ngcontent-%COMP%]{bottom:60%}.rune[_ngcontent-%COMP%]   img.rune-level[_ngcontent-%COMP%]{bottom:40%}app-rune-view[_ngcontent-%COMP%]{width:350px}']}),l})()},7295:(k,I,_)=>{_.d(I,{g:()=>C});var n=_(5e3);function i(e,t){if(1&e&&n._UZ(0,"div",18),2&e){const s=n.oxw(2);n.Q6J("innerHTML",s.rune.constraintLabel,n.oJD)}}function O(e,t){if(1&e&&n._UZ(0,"app-activable-view",19),2&e){const s=n.oxw(2);n.Q6J("activable",s.rune.activable)("reinforcment",s.rune.level)}}function c(e,t){if(1&e&&(n.TgZ(0,"div",1),n._UZ(1,"div",2),n.TgZ(2,"div",3)(3,"div",4)(4,"div",5),n._UZ(5,"app-rune-slot",6),n.qZA(),n.TgZ(6,"div",7),n._UZ(7,"div",8)(8,"div",9),n.YNc(9,i,1,1,"div",10),n.qZA(),n.TgZ(10,"div",11),n._UZ(11,"app-rune-slot",6),n.qZA()(),n._UZ(12,"div",12)(13,"div",13),n.YNc(14,O,1,2,"app-activable-view",14),n._UZ(15,"div",12)(16,"div",15),n.TgZ(17,"div",16),n._UZ(18,"img",17),n.qZA()()()),2&e){const s=n.oxw();n.xp6(1),n.Q6J("innerHTML",s.rune.name,n.oJD),n.xp6(4),n.Q6J("rune",s.rune),n.xp6(2),n.Q6J("innerHTML",s.rune.typeLabel,n.oJD),n.xp6(1),n.Q6J("innerHTML",s.rune.smithLabel,n.oJD),n.xp6(1),n.Q6J("ngIf",null!==s.rune.constraintLabel),n.xp6(2),n.Q6J("rune",s.rune),n.xp6(2),n.Q6J("innerHTML",s.rune.description,n.oJD),n.xp6(1),n.Q6J("ngIf",null!==s.rune.activable),n.xp6(2),n.Q6J("innerHTML",s.rune.flavor,n.oJD),n.xp6(2),n.Q6J("src",s.rune.levelIcon,n.LSH)}}let C=(()=>{class e{constructor(){this.rune=null}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-rune-view"]],inputs:{rune:"rune"},decls:1,vars:1,consts:[["class","rune slormancer-tooltip",4,"ngIf"],[1,"rune","slormancer-tooltip"],[1,"head","inner-box",3,"innerHTML"],[1,"content","inner-box"],[1,"info"],[1,"icon","left"],[3,"rune"],[1,"main"],[1,"type",3,"innerHTML"],[1,"smith",3,"innerHTML"],["class","constraint",3,"innerHTML",4,"ngIf"],[1,"icon","right"],[1,"separator"],[1,"description",3,"innerHTML"],[3,"activable","reinforcment",4,"ngIf"],[1,"flavor",3,"innerHTML"],[1,"bottom-level"],[3,"src"],[1,"constraint",3,"innerHTML"],[3,"activable","reinforcment"]],template:function(s,g){1&s&&n.YNc(0,c,19,10,"div",0),2&s&&n.Q6J("ngIf",null!==g.rune)},styles:[".rune[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff}.rune[_ngcontent-%COMP%]   .inner-box[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]:before{border-color:primary-color(400)}.rune[_ngcontent-%COMP%]     .description .value{color:#ce4607}.rune[_ngcontent-%COMP%]     .description .range, .rune[_ngcontent-%COMP%]     .description .range .value, .rune[_ngcontent-%COMP%]     .description .details, .rune[_ngcontent-%COMP%]     .description .details .value, .rune[_ngcontent-%COMP%]     .description .formula, .rune[_ngcontent-%COMP%]     .description .formula .value, .rune[_ngcontent-%COMP%]     .description .pure-info, .rune[_ngcontent-%COMP%]     .description .pure-info .value{color:#686868}.rune[_ngcontent-%COMP%]     .description .affixes .range, .rune[_ngcontent-%COMP%]     .description .affixes .value, .rune[_ngcontent-%COMP%]     .description .pure-info{word-break:keep-all;white-space:nowrap}.rune[_ngcontent-%COMP%]     .power.value{color:#ce4607}.rune[_ngcontent-%COMP%]     .flavor .disabled{color:#ce4607}.rune[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{margin-bottom:2px;text-align:center;padding:10px 30px;text-transform:uppercase;font-size:17px}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;justify-content:space-between}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{text-transform:uppercase}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .constraint[_ngcontent-%COMP%]{margin-top:4px}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .flavor[_ngcontent-%COMP%]{text-align:center}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .flavor[_ngcontent-%COMP%]{color:#686868}"]}),e})()},461:(k,I,_)=>{_.d(I,{a:()=>f});var n=_(3075),i=_(2722),O=_(6446),c=_(5e3),C=_(9808),e=_(7322),t=_(7531),s=_(4102),g=_(508);function p(b,Z){if(1&b&&(c.TgZ(0,"mat-label"),c._uU(1),c.qZA()),2&b){const y=c.oxw(2);c.xp6(1),c.Oqu(y.label)}}function M(b,Z){1&b&&(c.TgZ(0,"mat-option",9),c._uU(1," No results "),c.qZA())}function o(b,Z){if(1&b&&(c.TgZ(0,"mat-option",10),c._UZ(1,"span",11),c.qZA()),2&b){const y=Z.$implicit;c.ekj("filtered",y.filtered),c.Q6J("value",y.option.value)("disabled",y.filtered||y.disabled),c.xp6(1),c.Q6J("innerHTML",y.option.label,c.oJD)}}function l(b,Z){if(1&b&&(c.TgZ(0,"mat-hint"),c._uU(1),c.qZA()),2&b){const y=c.oxw(2);c.xp6(1),c.Oqu(y.notFoundMessage)}}function d(b,Z){if(1&b){const y=c.EpF();c.TgZ(0,"mat-form-field",1),c.YNc(1,p,2,1,"mat-label",2),c.TgZ(2,"mat-select",3),c.NdJ("openedChange",function(N){c.CHM(y);const B=c.MAs(5),U=c.oxw();return c.KtG(U.opened(N,B))}),c.TgZ(3,"mat-option",4)(4,"input",5,6),c.NdJ("keydown.space",function(N){c.CHM(y);const B=c.oxw();return c.KtG(B.handleSearchSpace(N))}),c.qZA()(),c.YNc(6,M,2,0,"mat-option",7),c.YNc(7,o,2,5,"mat-option",8),c.qZA(),c.YNc(8,l,2,1,"mat-hint",2),c.qZA()}if(2&b){const y=c.oxw();c.ekj("no-error-padding",y.noErrorPadding),c.xp6(1),c.Q6J("ngIf",null!==y.label),c.xp6(1),c.Q6J("formControl",y.control),c.xp6(2),c.Q6J("formControl",y.search),c.xp6(2),c.Q6J("ngIf",y.noResult),c.xp6(1),c.Q6J("ngForOf",y.filteredOptions)("ngForTrackBy",y.trackBy),c.xp6(1),c.Q6J("ngIf",null!==y.control.value&&!y.isStatInOptions(y.control.value)&&null!==y.notFoundMessage)}}let f=(()=>{class b extends O.B{constructor(){super(),this.label=null,this.control=null,this.options=[],this.noErrorPadding=!1,this.disabledOptions=[],this.notFoundMessage=null,this.filteredOptions=[],this.search=new n.NI(""),this.noResult=!1,this.search.valueChanges.subscribe(()=>this.filter())}ngOnChanges(y){null!==this.control&&y.control&&this.control.valueChanges.pipe((0,i.R)(this.unsubscribe)).subscribe(()=>this.resetFilter()),this.filter()}opened(y,w){!1===y?this.resetFilter():w.focus()}resetFilter(){this.search.setValue("")}filter(){const y=this.search.value.toLowerCase().trim();this.filteredOptions=this.options.map(w=>({option:w,filtered:-1===w.label.toLowerCase().indexOf(y),disabled:this.disabledOptions.includes(w.value)})),this.noResult=!this.filteredOptions.some(w=>!w.filtered)}trackBy(y,w){return w.option.value}handleSearchSpace(y){y.stopPropagation()}isStatInOptions(y){return this.options.some(w=>w.value===y)}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275cmp=c.Xpm({type:b,selectors:[["app-search-select"]],inputs:{label:"label",control:"control",options:"options",noErrorPadding:"noErrorPadding",disabledOptions:"disabledOptions",notFoundMessage:"notFoundMessage"},features:[c.qOj,c.TTD],decls:1,vars:1,consts:[["appearance","outline","color","primary",3,"no-error-padding",4,"ngIf"],["appearance","outline","color","primary"],[4,"ngIf"],["color","primary",3,"formControl","openedChange"],["disabled","","role","search"],["matInput","","type","text","placeholder","Rechercher...",3,"formControl","keydown.space"],["searchInput",""],["role","no-result","disabled","",4,"ngIf"],[3,"value","disabled","filtered",4,"ngFor","ngForOf","ngForTrackBy"],["role","no-result","disabled",""],[3,"value","disabled"],[3,"innerHTML"]],template:function(y,w){1&y&&c.YNc(0,d,9,9,"mat-form-field",0),2&y&&c.Q6J("ngIf",null!==w.control&&w.options.length>0)},dependencies:[C.sg,C.O5,e.KE,e.bx,e.hX,t.Nt,s.gD,g.ey,n.Fj,n.JJ,n.oH],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),b})()},4296:(k,I,_)=>{_.d(I,{F1:()=>i,yF:()=>n});const n="https://github.com/cayrac/slorm-planner",i="http://www.slormitestudios.com"},311:(k,I,_)=>{_.d(I,{x:()=>g});var n=_(2419),i=_(1135),O=_(7579),c=_(8372),C=_(2340),e=_(5e3);let t=(()=>{class p{constructor(){this.CHANGES=[{version:"0.0.2",update:o=>{o.configuration.frostbolt_shot_recently=0,o.configuration.has_elemental_prowess_buff=!1,o.configuration.has_splash_splash_buff=!1,o.configuration.has_booster_max_buff=!1,o.version="0.0.2"}},{version:"0.0.4",update:o=>{o.configuration.use_enemy_state=!1,o.version="0.0.4"}},{version:"0.0.8",update:o=>{o.version="0.0.8";for(const l of o.layers)l.character.originalVersion=l.character.version,l.character.version=n.veS;o.configuration.has_electrify_buff=!1,o.configuration.elemental_spirit_stacks=0,o.configuration.is_channeling_focus=!1}},{version:"0.0.9",update:o=>{o.version="0.0.9";for(const l of o.layers)l.character.version=n.veS}},{version:"0.0.10",update:o=>{o.version="0.0.10"}},{version:"0.0.11",update:o=>{o.version="0.0.11",o.name="New build"}},{version:"0.0.12",update:o=>{o.version="0.0.12";for(const l of o.layers)l.character.importVersion=null}},{version:"0.1.0",update:o=>{o.version="0.1.0",void 0===o.configuration.concentration_buff&&(o.configuration.concentration_buff=!1),void 0===o.configuration.summoned_skeleton_squires&&(o.configuration.summoned_skeleton_squires=0),void 0===o.configuration.always_summon_maximum_skeleton_squires&&(o.configuration.always_summon_maximum_skeleton_squires=!1),void 0===o.configuration.minimum_unreserved_mana&&(o.configuration.minimum_unreserved_mana=0),void 0===o.configuration.fulgurorn_dedication_stacks&&(o.configuration.fulgurorn_dedication_stacks=0),void 0===o.configuration.enemy_inner_weakness_stacks&&(o.configuration.enemy_inner_weakness_stacks=0),void 0===o.configuration.add_totem_tag_to_prime_totem_skills&&(o.configuration.add_totem_tag_to_prime_totem_skills=!1),void 0===o.configuration.highest_slorm_temple_floor&&(o.configuration.highest_slorm_temple_floor=0),void 0===o.configuration.show_temple_keeper_as_totem&&(o.configuration.show_temple_keeper_as_totem=!1),void 0===o.configuration.ultima_momentum_buff&&(o.configuration.ultima_momentum_buff=!1),void 0===o.configuration.elder_slorms&&(o.configuration.elder_slorms=0),void 0===o.configuration.show_elder_inner_fire_damage&&(o.configuration.show_elder_inner_fire_damage=!1),void 0===o.configuration.exposed_armor_buff&&(o.configuration.exposed_armor_buff=!1),void 0===o.configuration.apex_predator_stacks&&(o.configuration.apex_predator_stacks=0),void 0===o.configuration.enemy_enfeeble_stacks&&(o.configuration.enemy_enfeeble_stacks=0),void 0===o.configuration.enfeeble_stacks_in_radius&&(o.configuration.enfeeble_stacks_in_radius=0),"all_characters_level"in o.configuration&&(o.configuration.all_characters_level=void 0,o.configuration.all_other_characters_level=100)}},{version:"0.1.1",update:o=>{o.version="0.1.1"}},{version:"0.1.2",update:o=>{o.version="0.1.2",void 0===o.configuration.chilled_enemy_nearby&&(o.configuration.chilled_enemy_nearby=n.g5j.chilled_enemy_nearby),void 0===o.configuration.in_combat&&(o.configuration.in_combat=n.g5j.in_combat)}},{version:"0.1.3",update:o=>{o.version="0.1.3"}},{version:"0.1.4",update:o=>{o.version="0.1.4"}},{version:"0.1.5",update:o=>{o.version="0.1.5"}},{version:"0.2.0",update:o=>{o.version="0.2.0";for(const l of o.layers)l.character.reaper.baseAffinity=n.DxO,l.character.reaper.bonusAffinity=0,l.character.runes={effect:null,enhancement:null,activation:null};void 0===o.configuration.is_rune_active&&(o.configuration.is_rune_active=!1),void 0===o.configuration.effect_rune_affinity&&(o.configuration.effect_rune_affinity=100),void 0===o.configuration.effective_rune_stacks&&(o.configuration.effective_rune_stacks=225)}},{version:"0.2.1",update:o=>{o.version="0.2.1"}},{version:"0.2.2",update:o=>{o.version="0.2.2"}},{version:"0.2.3",update:o=>{o.version="0.2.3"}},{version:"0.2.5",update:o=>{o.version="0.2.5"}},{version:"0.2.5.1",update:o=>{o.version="0.2.5.1"}},{version:"0.2.5.2",update:o=>{o.version="0.2.5.2"}},{version:"0.3.0",update:o=>{o.version="0.3.0",o.configuration.has_living_inferno_buff=!1,o.configuration.has_shadow_shield_buff=!1,o.configuration.has_shadow_bargain_buff=!1,o.configuration.has_flawless_defense_buff=!1,o.configuration.aurelon_bargain_stacks=0,o.configuration.cleansing_surge_stacks=0,o.configuration.overcharged_stacks=0,o.configuration.has_frostfire_buff=!1,o.configuration.target_is_burning=!1,100===o.configuration.all_other_characters_level&&(o.configuration.all_other_characters_level=140)}},{version:"0.3.1",update:o=>{o.version="0.3.1"}},{version:"0.4.0",update:o=>{o.version="0.4.0",o.configuration.has_ancestral_instability_buff=!1,o.configuration.ancestral_instability_buff_duration=0,o.configuration.target_negative_effects=0,o.configuration.efficiency_buff=!1,o.configuration.has_avatar_of_shadow_buff=!1,o.configuration.highest_same_type_reaper_level=100}},{version:"0.4.1",update:o=>{o.version="0.4.1"}},{version:"0.4.2",update:o=>{o.version="0.4.2"}},{version:"0.5.0",update:o=>{o.version="0.5.0",o.configuration.is_triggered_by_book_smash=!1;for(const l of o.layers)l.character.ancestralLegacies.activeFirstNode=null}},{version:"0.5.1",update:o=>{o.version="0.5.1"}},{version:"0.6.0",update:o=>{o.version="0.6.0",o.configuration.indirect_defense_stacks=0,o.configuration.other_characters_mastery_total=30,o.configuration.support_streak_stacks=0,o.configuration.victims_combo=0,o.configuration.enemy_horrified_stacks=0,o.configuration.bloodthirst_stacks=0,o.configuration.has_blood_frenzy_buff=!1,o.configuration.elemental_fury_stacks=0,o.configuration.fighter_bane_stacks=0,o.configuration.mage_bane_stacks=0,o.configuration.moonlight_stacks=0,o.configuration.sunlight_stacks=0,o.configuration.moonlight_side=!0,o.configuration.life_orbs_count=0,o.configuration.ancestral_wrath_stacks=0,o.configuration.is_curving_time_or_time_shifting=!1,o.configuration.ancestral_preparation_stacks=0,o.configuration.unity_level_0_47=0,o.configuration.unity_level_0_48=0,o.configuration.unity_level_0_49=0,o.configuration.unity_level_0_50=0,o.configuration.unity_level_0_51=0,o.configuration.unity_level_0_52=0,o.configuration.unity_level_1_47=0,o.configuration.unity_level_1_48=0,o.configuration.unity_level_1_49=0,o.configuration.unity_level_1_50=0,o.configuration.unity_level_1_51=0,o.configuration.unity_level_1_52=0,o.configuration.unity_level_2_47=0,o.configuration.unity_level_2_48=0,o.configuration.unity_level_2_49=0,o.configuration.unity_level_2_50=0,o.configuration.unity_level_2_51=0,o.configuration.unity_level_2_52=0,o.configuration.unity_level_0_47_p=0,o.configuration.unity_level_0_48_p=0,o.configuration.unity_level_0_49_p=0,o.configuration.unity_level_0_50_p=0,o.configuration.unity_level_0_51_p=0,o.configuration.unity_level_0_52_p=0,o.configuration.unity_level_1_47_p=0,o.configuration.unity_level_1_48_p=0,o.configuration.unity_level_1_49_p=0,o.configuration.unity_level_1_50_p=0,o.configuration.unity_level_1_51_p=0,o.configuration.unity_level_1_52_p=0,o.configuration.unity_level_2_47_p=0,o.configuration.unity_level_2_48_p=0,o.configuration.unity_level_2_49_p=0,o.configuration.unity_level_2_50_p=0,o.configuration.unity_level_2_51_p=0,o.configuration.unity_level_2_52_p=0,o.configuration.has_life_bargain_buff=!1,o.configuration.enemy_is_chill_or_frozen=!1,o.configuration.absorbed_damage_wrath=0,o.configuration.add_skeletons_to_controlled_minions=!1;for(const l of o.layers){const d=l.character.reaper.affinity;l.character.reaper.baseReaperAffinity=d,l.character.reaper.baseEffectAffinity=d}}},{version:"0.6.1",update:o=>{o.version="0.6.1"}},{version:"0.6.2",update:o=>{o.version="0.6.2"}},{version:"0.6.3",update:o=>{o.version="0.6.3";for(const l of o.layers)l.character.reaper.baseReaperAffinity=Number.isInteger(l.character.reaper.baseReaperAffinity)?l.character.reaper.baseReaperAffinity:100,l.character.reaper.baseEffectAffinity=Number.isInteger(l.character.reaper.baseEffectAffinity)?l.character.reaper.baseEffectAffinity:100}},{version:"0.6.4",update:o=>{o.version="0.6.4"}},{version:"0.7.0",update:o=>{o.version="0.7.0",o.configuration.ray_of_obliteration_power=o.configuration.ray_of_obliteration_grow_stacks,o.configuration.recent_delighted_arrow_shot=!1,o.configuration.unrelenting_stacks=0,delete o.configuration.unity_level_0_47_p,delete o.configuration.unity_level_0_48_p,delete o.configuration.unity_level_0_49_p,delete o.configuration.unity_level_0_50_p,delete o.configuration.unity_level_0_51_p,delete o.configuration.unity_level_0_52_p,delete o.configuration.unity_level_1_47_p,delete o.configuration.unity_level_1_48_p,delete o.configuration.unity_level_1_49_p,delete o.configuration.unity_level_1_50_p,delete o.configuration.unity_level_1_51_p,delete o.configuration.unity_level_1_52_p,delete o.configuration.unity_level_2_47_p,delete o.configuration.unity_level_2_48_p,delete o.configuration.unity_level_2_49_p,delete o.configuration.unity_level_2_50_p,delete o.configuration.unity_level_2_51_p,delete o.configuration.unity_level_2_52_p;for(const l of o.layers)l.character.reaper.primordialKills=l.character.reaper.primordialInfo.kills,l.character.reaper.baseKills=l.character.reaper.baseKills.kills,l.character.reaper.masteryLevel=0,delete l.character.reaper.primordialInfo,delete l.character.reaper.baseInfo}}]}updateToLatestVersion(o){void 0===o.version&&(o.version="0.0.1",o.configuration=n.g5j);for(let l of this.CHANGES)(0,n.n4)(l.version,o.version)>0&&l.update(o)}}return p.\u0275fac=function(o){return new(o||p)},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();var s=_(6729);let g=(()=>{class p{constructor(o,l,d){this.jsonConverterService=o,this.buildRetrocompatibilityService=l,this.slormancerCharacterUpdaterService=d,this.MAX_LAYERS=10,this.BUILDS_STORAGE_KEY="builds",this.CURRENT_BUILD_STORAGE_KEY="current-build",this.CURRENT_LAYER_STORAGE_KEY="current-layer",this.builds=[],this.build=null,this.layer=null,this.buildChanged=new i.X(null),this.layerChanged=new i.X(null),this.saveTrigger=new O.x,this.reload(),this.oldFormatTransition(),this.saveTrigger.pipe((0,c.b)(500)).subscribe(()=>this.saveToStorage())}getCurrentLayerIndex(){const o=localStorage.getItem(this.CURRENT_LAYER_STORAGE_KEY),l=null===o?0:parseInt(o,10);return Number.isNaN(l)?0:l}oldFormatTransition(){const o="slorm-planner-build",l=localStorage.getItem(o);if(null!==l&&0===this.builds.length){const d=this.jsonConverterService.jsonToBuild(JSON.parse(l));this.addBuild(d),localStorage.removeItem(o),this.saveToStorage()}}reload(){this.builds=[],this.build=null,this.layer=null;try{const o=localStorage.getItem(this.BUILDS_STORAGE_KEY),l=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY),d=this.getCurrentLayerIndex();if(null!==o&&(this.builds=JSON.parse(o)),null!==l){const f=localStorage.getItem(l);null!==f&&(this.build=this.jsonConverterService.jsonToBuild(JSON.parse(f)),this.buildRetrocompatibilityService.updateToLatestVersion(this.build))}if(null!==this.build){let f=(0,n.BeF)(this.build.layers[d],this.build.layers[0]);void 0!==f&&(this.layer=f);for(const b of this.build.layers)this.slormancerCharacterUpdaterService.updateCharacter(b.character,this.build.configuration)}}catch(o){console.error("Failed to reload build : ",o)}this.buildChanged.next(this.build),this.layerChanged.next(this.layer)}saveToStorage(){localStorage.setItem(this.BUILDS_STORAGE_KEY,JSON.stringify(this.builds));const o=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);if(null!==o&&null!==this.build){localStorage.setItem(o,JSON.stringify(this.jsonConverterService.buildToJson(this.build)));let l=0;null!==this.layer&&(l=this.build.layers.indexOf(this.layer)),localStorage.setItem(this.CURRENT_LAYER_STORAGE_KEY,l<0?"0":l.toString())}}saveBuild(){if(null!==this.build){for(const l of this.build.layers)this.slormancerCharacterUpdaterService.updateCharacter(l.character,this.build.configuration);const o=this.getBuildPreview();if(null!==o&&(o.name=this.build.name),null!==this.build){let l=this.getCurrentLayerIndex();const d=null===this.layer?-1:this.build.layers.indexOf(this.layer);l=-1!==d?d:Math.min(l,this.build.layers.length-1),this.layer=(0,n.lA$)(this.build.layers[l])}this.saveTrigger.next(),this.buildChanged.next(this.build),this.layerChanged.next(this.layer)}}saveLayer(){null!==this.build&&null!==this.layer&&(this.slormancerCharacterUpdaterService.updateCharacter(this.layer.character,this.build.configuration),this.saveTrigger.next())}loadBuild(o){localStorage.setItem(this.CURRENT_BUILD_STORAGE_KEY,o.storageKey),localStorage.setItem(this.CURRENT_LAYER_STORAGE_KEY,"0"),this.reload()}deleteBuild(){const o=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);if(null!==o){const l=this.builds.findIndex(d=>d.storageKey===o);if(-1!==l){this.builds.splice(l,1),localStorage.removeItem(o),localStorage.removeItem(this.CURRENT_BUILD_STORAGE_KEY),this.saveToStorage();const d=Math.min(l,this.builds.length-1),f=this.builds[d];f?this.loadBuild(f):this.reload()}}}loadLayer(o){null!==this.build&&-1!==this.build.layers.indexOf(o)&&(this.layer=o,this.saveBuild())}addBuild(o){null!==o&&this.buildRetrocompatibilityService.updateToLatestVersion(o);const l={heroClass:o.heroClass,name:o.name,storageKey:"build-"+(new Date).getTime(),version:C.N.version};this.builds.push(l),this.build=o,this.layer=(0,n.BeF)(o.layers[0],null),localStorage.setItem(this.CURRENT_BUILD_STORAGE_KEY,l.storageKey),this.saveBuild()}getBuilds(){return this.builds}getBuild(){return this.build}getBuildPreview(){const o=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);return(0,n.lA$)(this.builds.find(l=>l.storageKey===o))}getLayer(){return this.layer}hasRoomForAnotherLayer(o=null){return null===this.build||this.build.layers.length<this.MAX_LAYERS&&(null===o||this.build.heroClass===o.heroClass)}}return p.\u0275fac=function(o){return new(o||p)(e.LFG(s.D),e.LFG(t),e.LFG(n.Pdp))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},2763:(k,I,_)=>{_.d(I,{Y:()=>O});var n=_(655),i=_(5e3);let O=(()=>{class c{constructor(){}copyToClipboard(e){let t=null;try{return t=document.createElement("textarea"),t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t),!0}catch(s){null!==t&&document.body.contains(t)&&document.body.removeChild(t)}return!1}copyImageToClipboard(e){try{return navigator.clipboard.write([new ClipboardItem({"image/png":e})]),!0}catch(t){}return!1}getClipboardText(){return(0,n.mG)(this,void 0,void 0,function*(){let e=null;if(navigator.clipboard)try{e=yield navigator.clipboard.readText()}catch(t){}return e})}canCopyImage(){return"undefined"!=typeof ClipboardItem}}return c.\u0275fac=function(e){return new(e||c)},c.\u0275prov=i.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},1671:(k,I,_)=>{_.d(I,{K:()=>O});var n=_(2419),i=_(5e3);let O=(()=>{class c{constructor(e,t,s){this.slormancerDataService=e,this.slormancerTranslateService=t,this.slormancerReaperService=s,this.DEFENSIVE_STATS=["reduced_damage_from_all_percent","reduced_damage_from_area_percent","reduced_damage_from_melee_percent","reduced_damage_from_projectile_percent","reduced_damage_on_elite_percent","res_phy_add","res_phy_percent","res_mag_add","res_mag_percent","dodge_add","dodge_percent","the_max_health_add","the_max_health_percent","tenacity_percent"],this.STATS_OPTIONS_CACHE={},this.LEGENDARY_OPTIONS_CACHE={},this.ALL_STATS_OPTIONS_CACHE=[],this.ALL_RARITIES_OPTIONS_CACHE=[],this.ALL_REAPER_BUFF_OPTIONS_CACHE=[],this.ALL_SKILL_BUFF_OPTIONS_CACHE={0:[],1:[],2:[]},this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE=[],this.ALL_REAPER_OPTIONS_CACHE={p:{0:[],1:[],2:[]},b:{0:[],1:[],2:[]}},this.ULTIMATUM_OPTIONS_CACHE=[],this.initRarityOptionsCache(),this.initStatOptionsCache(),this.initLegendaryOptionsCache(),this.initReaperBuffOptions(),this.initSkillBuffOptions(),this.initAttributeBuffOptions(),this.initReaperOptions(),this.initUltimatumOptions()}getReaperOptions(e,t){return this.ALL_REAPER_OPTIONS_CACHE[t?"p":"b"][e]}getAllStatsoptions(){return this.ALL_STATS_OPTIONS_CACHE}getAllRaritiesOptions(){return this.ALL_RARITIES_OPTIONS_CACHE}getStatsOptions(e,t){let s=this.ALL_STATS_OPTIONS_CACHE;const g=this.getBaseKey(e),p=this.STATS_OPTIONS_CACHE[g];return p&&(t===n.uqS.Normal?s=(0,n.BeF)(p.P,[]):t===n.uqS.Magic||t===n.uqS.Rare?s=(0,n.BeF)(p.S,[]):t===n.uqS.Epic?s=(0,n.BeF)(p.E,[]):t===n.uqS.Defensive&&(s=(0,n.BeF)(p.D,[]))),s}getLegendaryOptions(e,t){let s=[];const g=this.LEGENDARY_OPTIONS_CACHE[e];return g&&(s=g[t]),s}getReaperBuffOptions(){return this.ALL_REAPER_BUFF_OPTIONS_CACHE}getSkillBuffOptions(e){return this.ALL_SKILL_BUFF_OPTIONS_CACHE[e]}getAttributeBuffOptions(){return this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE}getUltimatumOptions(){return this.ULTIMATUM_OPTIONS_CACHE}getBaseKey(e){return e===n.JNB.Body?"ARMOR":e.toUpperCase()}initRarityOptionsCache(){this.ALL_RARITIES_OPTIONS_CACHE=n.nte.map(e=>({label:this.slormancerTranslateService.translate("RAR_loot_"+e),value:e}))}initStatOptionsCache(){const e=this.slormancerDataService.getGameDataStats().filter(t=>"X"!==t.PERCENT);this.STATS_OPTIONS_CACHE={},this.ALL_STATS_OPTIONS_CACHE=[];for(const t of e){const s={label:this.slormancerTranslateService.translate(t.REF)+("%"===t.PERCENT?" (%)":""),value:t.REF};this.ALL_STATS_OPTIONS_CACHE.push(s);for(const g of n.liR){const p=this.getBaseKey(g),M=t[p];if(""!==M){let o=this.STATS_OPTIONS_CACHE[p];void 0===o&&(o={P:[],S:[],E:[],D:[]},this.STATS_OPTIONS_CACHE[p]=o),"P"===M&&(o.P.push(s),o.S.push(s),o.E.push(s),this.DEFENSIVE_STATS.includes(t.REF)&&o.D.push(s)),"S"===M&&(o.S.push(s),o.E.push(s),this.DEFENSIVE_STATS.includes(t.REF)&&o.D.push(s)),"E"===M&&o.E.push(s)}}}for(const t of n.liR){const s=this.getBaseKey(t),g=this.STATS_OPTIONS_CACHE[s];g&&(g.P.sort((p,M)=>(0,n.rR7)(p.label,M.label)),g.S.sort((p,M)=>(0,n.rR7)(p.label,M.label)),g.E.sort((p,M)=>(0,n.rR7)(p.label,M.label)))}this.ALL_STATS_OPTIONS_CACHE.sort((t,s)=>(0,n.rR7)(t.label,s.label))}initLegendaryOptionsCache(){const e=this.slormancerDataService.getGameDataLegendaries().filter(t=>t.LOOTABLE);this.LEGENDARY_OPTIONS_CACHE={};for(const t of e){const s={value:t.REF,label:t.EN_NAME};let g=this.LEGENDARY_OPTIONS_CACHE[t.ITEM];void 0===g&&(g={0:[],1:[],2:[]},this.LEGENDARY_OPTIONS_CACHE[t.ITEM]=g),-1===t.HERO||99===t.HERO?(g[0].push(s),g[1].push(s),g[2].push(s)):g[t.HERO].push(s)}}initReaperBuffOptions(){this.ALL_REAPER_BUFF_OPTIONS_CACHE=n.cIS.filter(e=>e!==n.Q1_.OhmAgad&&e!==n.Q1_.ReapersmithBrotherhood).map(e=>({value:e,label:this.slormancerTranslateService.translate("weapon_reapersmith_"+e)}))}initSkillBuffOptions(){this.ALL_SKILL_BUFF_OPTIONS_CACHE={[n.iHO.Warrior]:this.slormancerDataService.getGameDataActiveSkills(n.iHO.Warrior).map(e=>({value:e.REF,label:e.EN_NAME})),[n.iHO.Huntress]:this.slormancerDataService.getGameDataActiveSkills(n.iHO.Huntress).map(e=>({value:e.REF,label:e.EN_NAME})),[n.iHO.Mage]:this.slormancerDataService.getGameDataActiveSkills(n.iHO.Mage).map(e=>({value:e.REF,label:e.EN_NAME}))}}initAttributeBuffOptions(){this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE=n.AFD.map(e=>({value:e,label:this.slormancerTranslateService.translate("character_trait_"+e)}))}initReaperOptions(){this.ALL_REAPER_OPTIONS_CACHE={p:{0:[],1:[],2:[]},b:{0:[],1:[],2:[]}};const e=this.slormancerDataService.getGameDataAvailableReaper();for(const t of e)this.ALL_REAPER_OPTIONS_CACHE.p[n.iHO.Warrior].push({value:t.REF,label:this.slormancerReaperService.getReaperName(t.EN_NAME,!0,n.iHO.Warrior)}),this.ALL_REAPER_OPTIONS_CACHE.p[n.iHO.Huntress].push({value:t.REF,label:this.slormancerReaperService.getReaperName(t.EN_NAME,!0,n.iHO.Huntress)}),this.ALL_REAPER_OPTIONS_CACHE.p[n.iHO.Mage].push({value:t.REF,label:this.slormancerReaperService.getReaperName(t.EN_NAME,!0,n.iHO.Mage)}),this.ALL_REAPER_OPTIONS_CACHE.b[n.iHO.Warrior].push({value:t.REF,label:this.slormancerReaperService.getReaperName(t.EN_NAME,!1,n.iHO.Warrior)}),this.ALL_REAPER_OPTIONS_CACHE.b[n.iHO.Huntress].push({value:t.REF,label:this.slormancerReaperService.getReaperName(t.EN_NAME,!1,n.iHO.Huntress)}),this.ALL_REAPER_OPTIONS_CACHE.b[n.iHO.Mage].push({value:t.REF,label:this.slormancerReaperService.getReaperName(t.EN_NAME,!1,n.iHO.Mage)})}initUltimatumOptions(){this.ULTIMATUM_OPTIONS_CACHE=n.N_V.map(e=>({value:e,label:this.slormancerTranslateService.translate("ultimatum_"+e)}))}}return c.\u0275fac=function(e){return new(e||c)(i.LFG(n.ogB),i.LFG(n.n6D),i.LFG(n.IxD))},c.\u0275prov=i.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},6729:(k,I,_)=>{_.d(I,{D:()=>O});var n=_(2419),i=_(5e3);let O=(()=>{class c{constructor(e,t,s,g,p,M,o,l){this.slormancerDataService=e,this.slormancerCharacterBuilderService=t,this.slormancerItemService=s,this.slormancerLegendaryService=g,this.slormancerAffixService=p,this.slormancerReaperService=M,this.slormancerRunesService=o,this.slormancerUltimatumService=l,this.RARITY_MAPPING=[{rarity:n.uqS.Normal,mapping:0},{rarity:n.uqS.Magic,mapping:1},{rarity:n.uqS.Rare,mapping:2},{rarity:n.uqS.Epic,mapping:3},{rarity:n.uqS.Legendary,mapping:4},{rarity:n.uqS.Defensive,mapping:5}],this.STAT_MAPPING={},this.REVERSE_STAT_MAPPING={};for(const d of e.getGameDataStats())this.STAT_MAPPING[d.REF_NB]=d.REF,this.REVERSE_STAT_MAPPING[d.REF]=d.REF_NB}rarityToNumber(e){const t=this.RARITY_MAPPING.find(s=>s.rarity===e);return t?t.mapping:0}numberToRarity(e){const t=this.RARITY_MAPPING.find(s=>s.mapping===e);return t?t.rarity:n.uqS.Normal}itemToJson(e,t){return null===e?null:{base:t?e.base:null,level:e.level,reinforcment:e.reinforcment,affixes:e.affixes.map(s=>({rarity:this.rarityToNumber(s.rarity),pure:100===s.pure?0:s.pure,stat:(0,n.BeF)(this.REVERSE_STAT_MAPPING[s.craftedEffect.effect.stat],0),craftedValue:s.craftedEffect.craftedValue})),legendaryEffect:null===e.legendaryEffect?null:{craftedValue:e.legendaryEffect.value,id:e.legendaryEffect.id},reaperEnchantment:null===e.reaperEnchantment?null:{craftedValue:e.reaperEnchantment.craftedValue,reaperSmith:e.reaperEnchantment.craftedReaperSmith},skillEnchantment:null===e.skillEnchantment?null:{craftedValue:e.skillEnchantment.craftedValue,skill:e.skillEnchantment.craftedSkill},attributeEnchantment:null===e.attributeEnchantment?null:{craftedValue:e.attributeEnchantment.craftedValue,attribute:e.attributeEnchantment.craftedAttribute}}}ancestralLegacyToJson(e){return{id:e.id,rank:e.baseRank}}reaperToJson(e){return{id:e.id,level:e.baseLevel,affinity:e.baseReaperAffinity,effectAffinity:e.baseEffectAffinity,kills:e.baseKills,primordialKills:e.primordialKills,primordial:e.primordial?1:0,mastery:e.masteryLevel}}runesToJson(e){return{activationId:null===e.activation?null:e.activation.id,activationLevel:null===e.activation?0:e.activation.level,effectId:null===e.effect?null:e.effect.id,effectLevel:null===e.effect?0:e.effect.level,enhancementId:null===e.enhancement?null:e.enhancement.id,enhancementLevel:null===e.enhancement?0:e.enhancement.level}}jsonToRunes(e,t,s){let g={activation:null,effect:null,enhancement:null};return void 0!==e&&(null!==e.activationId&&(g.activation=this.slormancerRunesService.getRuneById(e.activationId,t,e.activationLevel,s)),null!==e.effectId&&(g.effect=this.slormancerRunesService.getRuneById(e.effectId,t,e.effectLevel,s)),null!==e.enhancementId&&(g.enhancement=this.slormancerRunesService.getRuneById(e.enhancementId,t,e.enhancementLevel,s))),g}ultimatumToJson(e){let t=null;return null!==e&&(t={level:e.level,type:e.type}),t}skillToJson(e,t=!1){return{id:e.skill.id,rank:e.skill.baseLevel,upgrades:e.upgrades.map(s=>({id:s.id,rank:s.baseRank,selected:-1!==e.selectedUpgrades.indexOf(s.id)?1:0})).filter(s=>!t||s.selected)}}getActivableId(e){let t=null;return null!==e&&(t="isActivable"in e?e.id:200+e.id),t}characterToJson(e){return{type:"c",level:e.level,version:e.version,originalVersion:e.originalVersion,heroClass:e.heroClass,gear:{helm:this.itemToJson(e.gear.helm,!1),body:this.itemToJson(e.gear.body,!1),shoulder:this.itemToJson(e.gear.shoulder,!1),bracer:this.itemToJson(e.gear.bracer,!1),glove:this.itemToJson(e.gear.glove,!1),boot:this.itemToJson(e.gear.boot,!1),ring_l:this.itemToJson(e.gear.ring_l,!1),ring_r:this.itemToJson(e.gear.ring_r,!1),amulet:this.itemToJson(e.gear.amulet,!1),belt:this.itemToJson(e.gear.belt,!1),cape:this.itemToJson(e.gear.cape,!1)},inventory:e.inventory.map(t=>this.itemToJson(t,!0)),sharedInventory:e.sharedInventory.map(t=>t.map(s=>this.itemToJson(s,!0))),ultimatum:this.ultimatumToJson(e.ultimatum),ancestralLegacies:{ancestralLegacies:e.ancestralLegacies.ancestralLegacies.map(t=>this.ancestralLegacyToJson(t)),nodes:e.ancestralLegacies.activeNodes,firstNode:e.ancestralLegacies.activeFirstNode},reaper:this.reaperToJson(e.reaper),runes:this.runesToJson(e.runes),skills:e.skills.map(t=>this.skillToJson(t)),attributes:{[n.ahi.Toughness]:e.attributes.allocated[n.ahi.Toughness].baseRank,[n.ahi.Savagery]:e.attributes.allocated[n.ahi.Savagery].baseRank,[n.ahi.Fury]:e.attributes.allocated[n.ahi.Fury].baseRank,[n.ahi.Determination]:e.attributes.allocated[n.ahi.Determination].baseRank,[n.ahi.Zeal]:e.attributes.allocated[n.ahi.Zeal].baseRank,[n.ahi.Willpower]:e.attributes.allocated[n.ahi.Willpower].baseRank,[n.ahi.Dexterity]:e.attributes.allocated[n.ahi.Dexterity].baseRank,[n.ahi.Bravery]:e.attributes.allocated[n.ahi.Bravery].baseRank},support:null===e.supportSkill?null:e.supportSkill.id,primary:null===e.primarySkill?null:e.primarySkill.id,secondary:null===e.secondarySkill?null:e.secondarySkill.id,activable1:this.getActivableId(e.activable1),activable2:this.getActivableId(e.activable2),activable3:this.getActivableId(e.activable3),activable4:this.getActivableId(e.activable4)}}characterToMinimalJson(e){return{type:"c",level:e.level,version:e.version,originalVersion:e.originalVersion,heroClass:e.heroClass,gear:{helm:this.itemToJson(e.gear.helm,!1),body:this.itemToJson(e.gear.body,!1),shoulder:this.itemToJson(e.gear.shoulder,!1),bracer:this.itemToJson(e.gear.bracer,!1),glove:this.itemToJson(e.gear.glove,!1),boot:this.itemToJson(e.gear.boot,!1),ring_l:this.itemToJson(e.gear.ring_l,!1),ring_r:this.itemToJson(e.gear.ring_r,!1),amulet:this.itemToJson(e.gear.amulet,!1),belt:this.itemToJson(e.gear.belt,!1),cape:this.itemToJson(e.gear.cape,!1)},inventory:null,sharedInventory:null,ultimatum:this.ultimatumToJson(e.ultimatum),ancestralLegacies:{ancestralLegacies:e.ancestralLegacies.ancestralLegacies.filter(t=>-1!==e.ancestralLegacies.activeAncestralLegacies.indexOf(t.id)).map(t=>this.ancestralLegacyToJson(t)),nodes:e.ancestralLegacies.activeNodes,firstNode:e.ancestralLegacies.activeFirstNode},reaper:this.reaperToJson(e.reaper),runes:this.runesToJson(e.runes),skills:e.skills.filter(t=>t.skill===e.supportSkill||t.skill===e.primarySkill||t.skill===e.secondarySkill).map(t=>this.skillToJson(t,!0)),attributes:{[n.ahi.Toughness]:e.attributes.allocated[n.ahi.Toughness].baseRank,[n.ahi.Savagery]:e.attributes.allocated[n.ahi.Savagery].baseRank,[n.ahi.Fury]:e.attributes.allocated[n.ahi.Fury].baseRank,[n.ahi.Determination]:e.attributes.allocated[n.ahi.Determination].baseRank,[n.ahi.Zeal]:e.attributes.allocated[n.ahi.Zeal].baseRank,[n.ahi.Willpower]:e.attributes.allocated[n.ahi.Willpower].baseRank,[n.ahi.Dexterity]:e.attributes.allocated[n.ahi.Dexterity].baseRank,[n.ahi.Bravery]:e.attributes.allocated[n.ahi.Bravery].baseRank},support:null===e.supportSkill?null:e.supportSkill.id,primary:null===e.primarySkill?null:e.primarySkill.id,secondary:null===e.secondarySkill?null:e.secondarySkill.id,activable1:this.getActivableId(e.activable1),activable2:this.getActivableId(e.activable2),activable3:this.getActivableId(e.activable3),activable4:this.getActivableId(e.activable4)}}layerToJson(e){return{type:"l",character:this.characterToJson(e.character),name:e.name}}buildToJson(e){return{type:"p",version:e.version,heroClass:e.heroClass,name:e.name,layers:e.layers.map(t=>this.layerToJson(t)),configuration:Object.assign({},e.configuration)}}jsonToItem(e,t,s=null){let g=null;if(null!==e){const p=e.affixes.map(b=>this.slormancerAffixService.getAffixFromStat(this.STAT_MAPPING[b.stat],e.level,e.reinforcment,this.numberToRarity(b.rarity),b.craftedValue,b.pure)).filter(n.BXh);let M=s;null===M&&(M=null===e.base?n.JNB.Amulet:e.base);let o=null===e.legendaryEffect?null:this.slormancerLegendaryService.getLegendaryEffectById(e.legendaryEffect.id,e.legendaryEffect.craftedValue,e.reinforcment,t),l=null===e.reaperEnchantment?null:this.slormancerItemService.getReaperEnchantment(e.reaperEnchantment.reaperSmith,e.reaperEnchantment.craftedValue),d=null===e.skillEnchantment?null:this.slormancerItemService.getSkillEnchantment(e.skillEnchantment.skill,e.skillEnchantment.craftedValue),f=null===e.attributeEnchantment?null:this.slormancerItemService.getAttributeEnchantment(e.attributeEnchantment.attribute,e.attributeEnchantment.craftedValue);g=this.slormancerItemService.getEquipableItem(M,t,e.level,p,e.reinforcment,o,l,d,f)}return g}normalizeJsonCharacter(e){"0.2.152"===e.version&&(e.originalVersion=e.version,e.ultimatum=null),(0,n.n4)(e.version,"0.2.0")<0&&(e.reaper.affinity=n.DxO),(0,n.n4)(e.version,"0.5.0")<0&&(e.ancestralLegacies.firstNode=null),(0,n.n4)(e.version,"0.7.0")<0&&(e.reaper.mastery=0)}jsonToCharacter(e){this.normalizeJsonCharacter(e);const t=this.slormancerReaperService.getReaperById(e.reaper.id,e.heroClass,1===e.reaper.primordial,e.reaper.level,0,e.reaper.kills,e.reaper.primordialKills,e.reaper.affinity,e.reaper.effectAffinity,0,e.reaper.mastery),s=null===e.ultimatum?null:this.slormancerUltimatumService.getUltimatum(e.ultimatum.type,e.ultimatum.level),g=this.slormancerDataService.getGameDataAncestralLegacyIds().map((l,d)=>e.ancestralLegacies.ancestralLegacies.find(f=>f.id===d)).map(l=>l?l.rank:0),p=this.slormancerDataService.getGameDataSkills(e.heroClass).map((l,d)=>{let f=0;const b=e.skills.find(Z=>Z.id===d);if(b)f=(0,n.NMM)(b.rank);else{const Z=e.skills.map(y=>y.upgrades).flat().find(y=>y.id===d);Z&&(f=Z.rank)}return f}),M=this.slormancerDataService.getGameDataSkills(e.heroClass).map((l,d)=>{const f=e.skills.map(b=>b.upgrades).flat().find(b=>b.id===d);return f?f.selected:0});return this.slormancerCharacterBuilderService.getCharacter(e.heroClass,e.level,e.version,e.originalVersion,null,t,this.jsonToRunes(e.runes,e.heroClass,null===t?null:t.id),s,e.ancestralLegacies.nodes,e.ancestralLegacies.firstNode,g,M,p,this.jsonToItem(e.gear.helm,e.heroClass,n.JNB.Helm),this.jsonToItem(e.gear.body,e.heroClass,n.JNB.Body),this.jsonToItem(e.gear.shoulder,e.heroClass,n.JNB.Shoulder),this.jsonToItem(e.gear.bracer,e.heroClass,n.JNB.Bracer),this.jsonToItem(e.gear.glove,e.heroClass,n.JNB.Glove),this.jsonToItem(e.gear.boot,e.heroClass,n.JNB.Boot),this.jsonToItem(e.gear.ring_l,e.heroClass,n.JNB.Ring),this.jsonToItem(e.gear.ring_r,e.heroClass,n.JNB.Ring),this.jsonToItem(e.gear.amulet,e.heroClass,n.JNB.Amulet),this.jsonToItem(e.gear.belt,e.heroClass,n.JNB.Belt),this.jsonToItem(e.gear.cape,e.heroClass,n.JNB.Cape),null===e.inventory?null:e.inventory.map(l=>this.jsonToItem(l,e.heroClass,null)),null===e.sharedInventory?null:e.sharedInventory.map(l=>l.map(d=>this.jsonToItem(d,e.heroClass,null))),e.attributes[n.ahi.Toughness],e.attributes[n.ahi.Savagery],e.attributes[n.ahi.Fury],e.attributes[n.ahi.Determination],e.attributes[n.ahi.Zeal],e.attributes[n.ahi.Willpower],e.attributes[n.ahi.Dexterity],e.attributes[n.ahi.Bravery],e.primary,e.secondary,e.support,e.activable1,e.activable2,e.activable3,e.activable4)}jsonToLayer(e){return{name:e.name,character:this.jsonToCharacter(e.character)}}jsonToBuild(e){return{version:e.version,heroClass:e.heroClass,name:e.name?e.name:"Default name",layers:e.layers.map(t=>this.jsonToLayer(t)),configuration:Object.assign({},e.configuration)}}jsonToSharedData(e){return{character:"c"===e.type?this.jsonToCharacter(e):null,configuration:null,layer:"l"===e.type?this.jsonToLayer(e):null,planner:"p"===e.type?this.jsonToBuild(e):null}}}return c.\u0275fac=function(e){return new(e||c)(i.LFG(n.ogB),i.LFG(n.oYj),i.LFG(n.SgH),i.LFG(n.ArO),i.LFG(n.lRX),i.LFG(n.IxD),i.LFG(n._VP),i.LFG(n.hrN))},c.\u0275prov=i.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},8223:(k,I,_)=>{_.d(I,{e:()=>s});var n=_(7261),i=_(5e3),O=_(9808),c=_(7423),C=_(5245);function e(g,p){if(1&g){const M=i.EpF();i.TgZ(0,"button",5),i.NdJ("click",function(){i.CHM(M);const l=i.oxw();return i.KtG(l.actionClick())}),i._uU(1),i.qZA()}if(2&g){const M=i.oxw();i.xp6(1),i.Oqu(M.action)}}let t=(()=>{class g{constructor(M,o){this.data=M,this.snackBarRef=o,this.message=M.message,this.action=M.action,this.actionCallback=M.actionCallback}close(){this.snackBarRef.dismiss()}actionClick(){null!==this.actionCallback&&this.actionCallback(),this.close()}}return g.\u0275fac=function(M){return new(M||g)(i.Y36(n.qD),i.Y36(n.OX))},g.\u0275cmp=i.Xpm({type:g,selectors:[["app-snackbar"]],decls:6,vars:2,consts:[[1,"content"],["src","assets/img/icon/message/success.png",1,"mc-ripped"],[1,"message",3,"innerHTML"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],[3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(M,o){1&M&&(i.TgZ(0,"div",0),i._UZ(1,"img",1)(2,"div",2),i.YNc(3,e,2,1,"button",3),i.TgZ(4,"mat-icon",4),i.NdJ("click",function(){return o.close()}),i._uU(5,"close"),i.qZA()()),2&M&&(i.xp6(2),i.Q6J("innerHTML",o.message,i.oJD),i.xp6(1),i.Q6J("ngIf",null!==o.action&&null!==o.actionCallback))},dependencies:[O.O5,c.lW,C.Hw],styles:[".content[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:row;align-items:center;gap:16px}.content[_ngcontent-%COMP%]   .mc-ripped[_ngcontent-%COMP%]{height:30px;image-rendering:pixelated;animation:float 2s ease-in-out infinite}.content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-grow:1}.content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]     img{height:32px;image-rendering:pixelated;margin:0 4px}.content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}@keyframes float{0%{transform:translatey(2px)}50%{transform:translatey(-2px)}to{transform:translatey(2px)}}"]}),g})(),s=(()=>{class g{constructor(M){this.snackBar=M,this.DEFAULT_DURATION=5e3,this.ACTION_DURATION=2e4,this.currentSnackBar=null}getConfig(M,o=null,l=null){return{duration:null!==o&&null!==l?this.ACTION_DURATION:this.DEFAULT_DURATION,data:{message:M,action:o,actionCallback:l}}}message(M,o=null,l=null){this.currentSnackBar=this.snackBar.openFromComponent(t,this.getConfig(M,o,l))}error(M,o=null,l=null){null!==this.currentSnackBar&&this.currentSnackBar.dismiss(),this.currentSnackBar=this.snackBar.openFromComponent(t,this.getConfig(M,o,l))}}return g.\u0275fac=function(M){return new(M||g)(i.LFG(n.ux))},g.\u0275prov=i.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},2424:(k,I,_)=>{_.d(I,{o:()=>c});var n=_(2419),i=_(1135),O=_(5e3);let c=(()=>{class C{constructor(){this.search=null,this.dom=document.createElement("div"),this.searchChanged=new i.X(null)}hasSearch(){return null!==this.search}setSearch(t){this.search=null!==t&&t.length>0?t:null,this.searchChanged.next(this.search)}getCleanSearchValue(){return null===this.search?null:this.search.toLowerCase().trim()}removeHtmlTags(t,s=[]){let g=t;if(null!==g){if(this.dom.innerHTML=g.toLowerCase(),s.length>0)for(const p of s){const M=this.dom.getElementsByClassName(p);for(let o=0,l=M.length;o<l;o++){const d=M.item(o);d&&d.remove()}}g=this.dom.textContent}return g}stringsMatchSearch(t){let s=!0;const g=this.getCleanSearchValue();return null!==g&&(s=null===this.search||void 0!==t.find(p=>(0,n.BXh)(p)&&-1!==p.toLowerCase().indexOf(g))),s}itemMatchSearch(t){return this.stringsMatchSearch([t.level.toString(),t.name,t.base,t.rarity,...t.affixes.map(s=>[s.isPure?"pure":null,this.removeHtmlTags(s.valueLabel+" "+s.statLabel,["details"])]).flat(),null===t.legendaryEffect?null:this.removeHtmlTags(t.legendaryEffect.description,["details"]),null!==t.reaperEnchantment?this.removeHtmlTags(t.reaperEnchantment.label,["details"]):null,null!==t.skillEnchantment?this.removeHtmlTags(t.skillEnchantment.label,["details"]):null,null!==t.attributeEnchantment?this.removeHtmlTags(t.attributeEnchantment.label,["details"]):null])||null!==t.legendaryEffect&&null!==t.legendaryEffect.activable&&this.activableMatchSearch(t.legendaryEffect.activable)}runeMatchSearch(t){return this.stringsMatchSearch([t.level.toString(),t.name,this.removeHtmlTags(t.constraintLabel),this.removeHtmlTags(t.description),t.flavor,t.smithLabel,t.typeLabel])}ultimatumMatchSearch(t){return this.stringsMatchSearch([t.title,t.levelLabel,t.bonusTitle,this.removeHtmlTags(t.bonusLabel),t.malusTitle,t.malusLabel])}upgradeMatchSearch(t){return this.stringsMatchSearch([t.name,t.type,this.removeHtmlTags(t.description),...t.genres,t.genresLabel,this.removeHtmlTags(t.costLabel),this.removeHtmlTags(t.costType),...t.relatedBuffs.map(s=>s.name),...t.relatedClassMechanics.map(s=>s.name),...t.relatedMechanics.map(s=>s.name)])}ancestralLegacyMatchSearch(t){return this.stringsMatchSearch([t.name,t.costType,...t.genres,t.isActivable?"activable":null,this.removeHtmlTags(t.description),...t.relatedBuffs.map(s=>s.name),...t.relatedMechanics.map(s=>s.name),...t.types,t.typeLabel,t.genresLabel,t.costLabel])}reaperMatchSearch(t){return this.stringsMatchSearch([t.name,t.description,t.benediction,t.malediction,t.smith.name,t.smithLabel,t.victimsLabel,t.levelLabel,t.damageTypeLabel,null!==t.benediction?t.benedictionTitleLabel:"",null!==t.malediction?t.maledictionTitleLabel:"",0!==t.activables.length?t.activablesTitleLabel:"",t.damagesLabel,t.maxDamagesLabel,t.affinityLabel,t.lore])||t.activables.some(s=>this.activableMatchSearch(s))}activableMatchSearch(t){return this.stringsMatchSearch([t.name,t.genresLabel,t.cooldownLabel,t.costLabel,t.description])}traitMatchSearch(t){return this.stringsMatchSearch([t.rankLabel,this.removeHtmlTags(t.cumulativeStats),this.removeHtmlTags(t.description),t.traitLevelLabel])}}return C.\u0275fac=function(t){return new(t||C)},C.\u0275prov=O.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},4802:(k,I,_)=>{_.d(I,{m:()=>z});var n=_(9808),i=_(8003),O=_(2419),c=_(2722),C=_(1671),e=_(6446),t=_(5e3),s=_(7423),g=_(5245),p=_(7322),M=_(4102),o=_(508),l=_(8029),d=_(3075);function f(h,T){if(1&h){const a=t.EpF();t.TgZ(0,"div",4)(1,"button",5),t.NdJ("click",function(){t.CHM(a);const E=t.oxw();return t.KtG(E.addAttributeEnchantment())}),t.TgZ(2,"mat-icon"),t._uU(3,"add"),t.qZA()()()}}function b(h,T){if(1&h&&(t.TgZ(0,"mat-option",16),t._UZ(1,"span",17),t.qZA()),2&h){const a=T.$implicit;t.Q6J("value",a.value),t.xp6(1),t.Q6J("innerHTML",a.label,t.oJD)}}function Z(h,T){if(1&h){const a=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),t._uU(4,"Attribute Enchantment"),t.qZA(),t.TgZ(5,"mat-select",9),t.YNc(6,b,2,2,"mat-option",10),t.qZA()()(),t.TgZ(7,"div",11)(8,"mat-slider",12),t.NdJ("input",function(E){t.CHM(a);const R=t.oxw();return t.KtG(R.updateSliderValue(E))}),t.qZA()(),t.TgZ(9,"div",13)(10,"div",14),t._uU(11),t.qZA(),t.TgZ(12,"button",15),t.NdJ("click",function(){t.CHM(a);const E=t.oxw();return t.KtG(E.removeAttributeEnchantment())}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA()()()()}if(2&h){const a=t.oxw();t.Q6J("formGroup",a.form),t.xp6(6),t.Q6J("ngForOf",a.options),t.xp6(2),t.Q6J("min",1)("max",3)("step",1),t.xp6(3),t.hij(" ",a.displayedValue," ")}}let y=(()=>{class h extends e.B{constructor(a,u){super(),this.itemFormService=a,this.slormancerItemService=u,this.form=null,this.options=[],this.displayedValue="",this.attributeEnchantment=null}ngOnChanges(a){this.options=this.itemFormService.getAttributeBuffOptions(),null!==this.form&&("form"in a&&this.form.valueChanges.pipe((0,c.R)(this.unsubscribe)).subscribe(u=>{var E,R;this.updateAttributeEnchantment(null!==(E=u.attribute)&&void 0!==E?E:null,null!==(R=u.value)&&void 0!==R?R:0)}),this.updateAttributeEnchantment(this.form.controls.attribute.value,this.form.controls.value.value))}updateAttributeEnchantment(a,u){this.attributeEnchantment=null===a?null:this.slormancerItemService.getAttributeEnchantment(a,u),this.displayedValue="",null!==this.attributeEnchantment&&(this.displayedValue="+"+(0,O.BeF)(this.attributeEnchantment.craftableValues[this.attributeEnchantment.craftedValue],0))}updateSliderValue(a){this.displayedValue="";const u=a.value;null!==this.attributeEnchantment&&null!==u&&this.updateAttributeEnchantment(this.attributeEnchantment.craftedValue,u)}removeAttributeEnchantment(){null!==this.form&&this.form.patchValue({attribute:null})}addAttributeEnchantment(){const a=this.options[0];null!==this.form&&a&&this.form.patchValue({attribute:a.value,value:3})}}return h.\u0275fac=function(a){return new(a||h)(t.Y36(C.K),t.Y36(O.SgH))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-item-edit-buff-attribute"]],inputs:{form:"form"},features:[t.qOj,t.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","attribute"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(a,u){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Attribute Enchantment :"),t.qZA(),t.YNc(3,f,4,0,"div",2),t.qZA(),t.YNc(4,Z,15,6,"div",3)),2&a&&(t.xp6(3),t.Q6J("ngIf",null!==u.form&&null===u.attributeEnchantment),t.xp6(1),t.Q6J("ngIf",null!==u.form&&null!==u.attributeEnchantment))},dependencies:[n.sg,n.O5,s.lW,g.Hw,p.KE,p.hX,M.gD,o.ey,l.pH,d.JJ,d.JL,d.sg,d.u]}),h})();function w(h,T){if(1&h){const a=t.EpF();t.TgZ(0,"div",4)(1,"button",5),t.NdJ("click",function(){t.CHM(a);const E=t.oxw();return t.KtG(E.addReaperEnchantment())}),t.TgZ(2,"mat-icon"),t._uU(3,"add"),t.qZA()()()}}function N(h,T){if(1&h&&(t.TgZ(0,"mat-option",16),t._UZ(1,"span",17),t.qZA()),2&h){const a=T.$implicit;t.Q6J("value",a.value),t.xp6(1),t.Q6J("innerHTML",a.label,t.oJD)}}function B(h,T){if(1&h){const a=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),t._uU(4,"Reaper Enchantment"),t.qZA(),t.TgZ(5,"mat-select",9),t.YNc(6,N,2,2,"mat-option",10),t.qZA()()(),t.TgZ(7,"div",11)(8,"mat-slider",12),t.NdJ("input",function(E){t.CHM(a);const R=t.oxw();return t.KtG(R.updateSliderValue(E))}),t.qZA()(),t.TgZ(9,"div",13)(10,"div",14),t._uU(11),t.qZA(),t.TgZ(12,"button",15),t.NdJ("click",function(){t.CHM(a);const E=t.oxw();return t.KtG(E.removeReaperEnchantment())}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA()()()()}if(2&h){const a=t.oxw();t.Q6J("formGroup",a.form),t.xp6(6),t.Q6J("ngForOf",a.options),t.xp6(2),t.Q6J("min",1)("max",5)("step",1),t.xp6(3),t.hij(" ",a.displayedValue," ")}}let U=(()=>{class h extends e.B{constructor(a,u){super(),this.itemFormService=a,this.slormancerItemService=u,this.form=null,this.options=[],this.displayedValue="",this.reaperEnchantment=null}ngOnChanges(a){null!==this.form&&("form"in a&&this.form.valueChanges.pipe((0,c.R)(this.unsubscribe)).subscribe(u=>{var E,R;this.updateReaperEnchantment(null!==(E=u.smith)&&void 0!==E?E:null,null!==(R=u.value)&&void 0!==R?R:0)}),this.updateReaperEnchantment(this.form.controls.smith.value,this.form.controls.value.value)),this.options=this.itemFormService.getReaperBuffOptions()}updateReaperEnchantment(a,u){this.displayedValue="",this.reaperEnchantment=null===a?null:this.slormancerItemService.getReaperEnchantment(a,u),null!==this.reaperEnchantment&&(this.displayedValue="+"+this.reaperEnchantment.craftedValue)}updateSliderValue(a){this.displayedValue="";const u=a.value;null!==this.reaperEnchantment&&null!==u&&this.updateReaperEnchantment(this.reaperEnchantment.craftedReaperSmith,u)}removeReaperEnchantment(){null!==this.form&&this.form.patchValue({smith:null})}addReaperEnchantment(){const a=this.options[0];null!==this.form&&a&&this.form.patchValue({smith:a.value,value:5})}}return h.\u0275fac=function(a){return new(a||h)(t.Y36(C.K),t.Y36(O.SgH))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-item-edit-buff-reaper"]],inputs:{form:"form"},features:[t.qOj,t.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","form-add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"form-add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","smith"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(a,u){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Reaper Enchantment :"),t.qZA(),t.YNc(3,w,4,0,"div",2),t.qZA(),t.YNc(4,B,15,6,"div",3)),2&a&&(t.xp6(3),t.Q6J("ngIf",null!==u.form&&null===u.reaperEnchantment),t.xp6(1),t.Q6J("ngIf",null!==u.form&&null!==u.reaperEnchantment))},dependencies:[n.sg,n.O5,s.lW,g.Hw,p.KE,p.hX,M.gD,o.ey,l.pH,d.JJ,d.JL,d.sg,d.u]}),h})();function H(h,T){if(1&h){const a=t.EpF();t.TgZ(0,"div",4)(1,"button",5),t.NdJ("click",function(){t.CHM(a);const E=t.oxw();return t.KtG(E.addSkillEnchantment())}),t.TgZ(2,"mat-icon"),t._uU(3,"add"),t.qZA()()()}}function D(h,T){if(1&h&&(t.TgZ(0,"mat-option",16),t._UZ(1,"span",17),t.qZA()),2&h){const a=T.$implicit;t.Q6J("value",a.value),t.xp6(1),t.Q6J("innerHTML",a.label,t.oJD)}}function x(h,T){if(1&h){const a=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),t._uU(4,"Skill Enchantment"),t.qZA(),t.TgZ(5,"mat-select",9),t.YNc(6,D,2,2,"mat-option",10),t.qZA()()(),t.TgZ(7,"div",11)(8,"mat-slider",12),t.NdJ("input",function(E){t.CHM(a);const R=t.oxw();return t.KtG(R.updateSliderValue(E))}),t.qZA()(),t.TgZ(9,"div",13)(10,"div",14),t._uU(11),t.qZA(),t.TgZ(12,"button",15),t.NdJ("click",function(){t.CHM(a);const E=t.oxw();return t.KtG(E.removeSkillEnchantment())}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA()()()()}if(2&h){const a=t.oxw();t.Q6J("formGroup",a.form),t.xp6(6),t.Q6J("ngForOf",a.options),t.xp6(2),t.Q6J("min",1)("max",2)("step",1),t.xp6(3),t.hij(" ",a.displayedValue," ")}}let A=(()=>{class h extends e.B{constructor(a,u){super(),this.itemFormService=a,this.slormancerItemService=u,this.heroClass=O.iHO.Huntress,this.form=null,this.options=[],this.displayedValue="",this.skillEnchantment=null}ngOnChanges(a){this.options=this.itemFormService.getSkillBuffOptions(this.heroClass),null!==this.form&&("form"in a&&this.form.valueChanges.pipe((0,c.R)(this.unsubscribe)).subscribe(u=>{var E,R;this.updateSkillEnchantment(null!==(E=u.skill)&&void 0!==E?E:null,null!==(R=u.value)&&void 0!==R?R:0)}),this.updateSkillEnchantment(this.form.controls.skill.value,this.form.controls.value.value))}updateSkillEnchantment(a,u){this.skillEnchantment=null===a?null:this.slormancerItemService.getSkillEnchantment(a,u),this.displayedValue="",null!==this.skillEnchantment&&null!==u&&(this.displayedValue="+"+(0,O.BeF)(this.skillEnchantment.craftableValues[u],0))}updateSliderValue(a){this.displayedValue="";const u=a.value;null!==this.skillEnchantment&&null!==u&&this.updateSkillEnchantment(this.skillEnchantment.craftedSkill,u)}removeSkillEnchantment(){null!==this.form&&this.form.patchValue({skill:null})}addSkillEnchantment(){const a=this.options[0];null!==this.form&&a&&this.form.patchValue({skill:a.value,value:2})}}return h.\u0275fac=function(a){return new(a||h)(t.Y36(C.K),t.Y36(O.SgH))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-item-edit-buff-skill"]],inputs:{heroClass:"heroClass",form:"form"},features:[t.qOj,t.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","skill"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(a,u){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Skill Enchantment :"),t.qZA(),t.YNc(3,H,4,0,"div",2),t.qZA(),t.YNc(4,x,15,6,"div",3)),2&a&&(t.xp6(3),t.Q6J("ngIf",null!==u.form&&null===u.skillEnchantment),t.xp6(1),t.Q6J("ngIf",null!==u.form&&null!==u.skillEnchantment))},dependencies:[n.sg,n.O5,s.lW,g.Hw,p.KE,p.hX,M.gD,o.ey,l.pH,d.JJ,d.JL,d.sg,d.u]}),h})();function m(h,T){if(1&h){const a=t.EpF();t.TgZ(0,"div",4)(1,"button",5),t.NdJ("click",function(){t.CHM(a);const E=t.oxw();return t.KtG(E.addLegendaryEffect())}),t.TgZ(2,"mat-icon"),t._uU(3,"add"),t.qZA()()()}}function F(h,T){if(1&h&&(t.TgZ(0,"mat-option",16),t._UZ(1,"span",17),t.qZA()),2&h){const a=T.$implicit;t.Q6J("value",a.value),t.xp6(1),t.Q6J("innerHTML",a.label,t.oJD)}}function P(h,T){if(1&h){const a=t.EpF();t.TgZ(0,"mat-slider",18),t.NdJ("input",function(E){t.CHM(a);const R=t.oxw(2);return t.KtG(R.updateSliderValue(E))}),t.qZA()}2&h&&t.Q6J("min",75)("max",100)("step",1)}function L(h,T){if(1&h){const a=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),t._uU(4,"Legendary effect"),t.qZA(),t.TgZ(5,"mat-select",9),t.YNc(6,F,2,2,"mat-option",10),t.qZA()()(),t.TgZ(7,"div",11),t.YNc(8,P,1,3,"mat-slider",12),t.qZA(),t.TgZ(9,"div",13)(10,"div",14),t._uU(11),t.qZA(),t.TgZ(12,"button",15),t.NdJ("click",function(){t.CHM(a);const E=t.oxw();return t.KtG(E.removeLegendaryEffect())}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA()()()()}if(2&h){const a=t.oxw();t.Q6J("formGroup",a.form),t.xp6(6),t.Q6J("ngForOf",a.options),t.xp6(2),t.Q6J("ngIf",a.hasLegendaryValues()),t.xp6(3),t.hij(" ",a.displayedValue," ")}}let r=(()=>{class h extends e.B{constructor(a,u){super(),this.itemFormService=a,this.slormancerLegendaryEffectService=u,this.base=O.JNB.Amulet,this.heroClass=O.iHO.Huntress,this.itemReinforcment=0,this.form=null,this.options=[],this.displayedValue="",this.legendaryEffect=null}ngOnChanges(a){null!==this.form&&("form"in a&&this.form.valueChanges.pipe((0,c.R)(this.unsubscribe)).subscribe(u=>{var E,R;this.updateLegendaryEffect(null!==(E=u.id)&&void 0!==E?E:null,null!==(R=u.value)&&void 0!==R?R:0)}),this.updateLegendaryEffect(this.form.controls.id.value,this.form.controls.value.value)),this.options=this.itemFormService.getLegendaryOptions(this.base,this.heroClass)}updateLegendaryEffect(a,u){this.legendaryEffect=null===this.form||null===a?null:this.slormancerLegendaryEffectService.getLegendaryEffectById(a,this.form.controls.value.value,this.itemReinforcment,this.heroClass),null!==this.legendaryEffect&&this.updateLegendaryValueLabel(this.legendaryEffect.value)}updateLegendaryValueLabel(a){this.displayedValue="",null!==this.legendaryEffect&&null!==a&&(this.displayedValue=this.legendaryEffect.effects.filter(u=>u.possibleCraftedValues.length>1).map(u=>{const E=u.effect.percent?"%":"";return(0,O.AWe)(u,a)+E}).join(" / "))}hasLegendaryValues(){return null!==this.legendaryEffect&&this.legendaryEffect.effects.filter(a=>a.possibleCraftedValues.length>1).length>0}updateSliderValue(a){this.displayedValue="";const u=a.value;null!==this.legendaryEffect&&null!==u&&this.updateLegendaryValueLabel(u)}removeLegendaryEffect(){null!==this.form&&this.form.patchValue({id:null})}addLegendaryEffect(){const a=this.options[0];null!==this.form&&a&&this.form.patchValue({id:a.value,value:100})}}return h.\u0275fac=function(a){return new(a||h)(t.Y36(C.K),t.Y36(O.ArO))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-item-edit-legendary-effect"]],inputs:{base:"base",heroClass:"heroClass",itemReinforcment:"itemReinforcment",form:"form"},features:[t.qOj,t.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","id"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input",4,"ngIf"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"],["color","primary","formControlName","value",3,"min","max","step","input"]],template:function(a,u){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Legendary effect :"),t.qZA(),t.YNc(3,m,4,0,"div",2),t.qZA(),t.YNc(4,L,15,4,"div",3)),2&a&&(t.xp6(3),t.Q6J("ngIf",null!==u.form&&null===u.legendaryEffect),t.xp6(1),t.Q6J("ngIf",null!==u.form&&null!==u.legendaryEffect))},dependencies:[n.sg,n.O5,s.lW,g.Hw,p.KE,p.hX,M.gD,o.ey,l.pH,d.JJ,d.JL,d.sg,d.u]}),h})();var v=_(3761),S=_(7446),J=_(461);function V(h,T){if(1&h){const a=t.EpF();t.TgZ(0,"mat-slider",11),t.NdJ("input",function(E){t.CHM(a);const R=t.oxw(2);return t.KtG(R.updateSliderStat(E))}),t.qZA()}if(2&h){const a=t.oxw(2);t.Q6J("min",a.affix.craftedEffect.minPossibleCraftedValue)("max",a.affix.craftedEffect.maxPossibleCraftedValue)("step",1)}}function q(h,T){if(1&h){const a=t.EpF();t.TgZ(0,"mat-slider",12),t.NdJ("input",function(E){t.CHM(a);const R=t.oxw(2);return t.KtG(R.updateSliderPurity(E))}),t.qZA()}2&h&&t.Q6J("min",101)("max",200)("step",1)}function Y(h,T){if(1&h){const a=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t._UZ(2,"app-search-select",3),t.qZA(),t.TgZ(3,"div",4),t.YNc(4,V,1,3,"mat-slider",5),t.YNc(5,q,1,3,"mat-slider",6),t.qZA(),t.TgZ(6,"div",7)(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"mat-checkbox",9),t._uU(10,"Pure"),t.qZA(),t.TgZ(11,"button",10),t.NdJ("click",function(){t.CHM(a);const E=t.oxw();return t.KtG(E.removeStat())}),t.TgZ(12,"mat-icon"),t._uU(13,"delete"),t.qZA()()()()}if(2&h){const a=t.oxw();t.Q6J("formGroup",a.form),t.xp6(2),t.Q6J("control",a.form.controls.stat)("options",a.options)("disabledOptions",a.alreadyUsedStats),t.xp6(2),t.Q6J("ngIf",!a.form.controls.pure.value),t.xp6(1),t.Q6J("ngIf",a.form.controls.pure.value),t.xp6(2),t.ekj("pure",a.form.controls.pure.value),t.xp6(1),t.Oqu(a.displayedValue),t.xp6(3),t.Q6J("disabled",!a.removable)}}let K=(()=>{class h extends e.B{constructor(a,u){super(),this.itemFormService=a,this.slormancerAffixService=u,this.itemBase=O.JNB.Amulet,this.itemLevel=0,this.itemReinforcment=0,this.alreadyUsedStats=[],this.form=null,this.removable=!1,this.remove=new t.vpe,this.options=[],this.displayedValue="",this.affix=null}ngOnChanges(a){null!==this.form&&("form"in a&&(this.form.controls.rarity.valueChanges.pipe((0,c.R)(this.unsubscribe)).subscribe(u=>{this.options=this.itemFormService.getStatsOptions(this.itemBase,u)}),this.form.valueChanges.pipe((0,c.R)(this.unsubscribe)).subscribe(()=>this.updateAffix())),("form"in a||"itemBase"in a)&&(this.options=this.itemFormService.getStatsOptions(this.itemBase,this.form.controls.rarity.value)),("form"in a||"itemLevel"in a||"itemReinforcment"in a)&&this.updateAffix())}updateAffix(){null!==this.form&&(this.affix=this.slormancerAffixService.getAffixFromStat(this.form.controls.stat.value,this.itemLevel,this.itemReinforcment,this.form.controls.rarity.value,this.form.controls.value.value,this.form.controls.purity.value),null!==this.affix&&this.slormancerAffixService.updateAffix(this.affix),this.updatePurity(this.form.controls.pure.value,this.form.controls.purity.value,this.form.controls.value.value))}updatePurity(a,u,E){a?this.setPuritylabel(u):this.setStatLabel(E)}updateSliderPurity(a){null!==a.value&&this.setPuritylabel(a.value)}updateSliderStat(a){null!==a.value&&this.setStatLabel(a.value)}setPuritylabel(a){this.displayedValue=Math.round(a-100)+"%"}setStatLabel(a){if(this.displayedValue="",null!==this.affix){const u=this.affix.craftedEffect.effect.percent?"%":"";this.displayedValue=null===this.affix?"":"+"+((0,O.AWe)(this.affix.craftedEffect,a)+u)}}removeStat(){this.remove.emit()}}return h.\u0275fac=function(a){return new(a||h)(t.Y36(C.K),t.Y36(O.lRX))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-item-edit-stat"]],inputs:{itemBase:"itemBase",itemLevel:"itemLevel",itemReinforcment:"itemReinforcment",alreadyUsedStats:"alreadyUsedStats",form:"form",removable:"removable"},outputs:{remove:"remove"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[["class","stat-line",3,"formGroup",4,"ngIf"],[1,"stat-line",3,"formGroup"],[1,"select"],["label","Stat","notFoundMessage","This stat is not longer available",3,"control","options","disabledOptions"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input",4,"ngIf"],["color","accent","formControlName","purity",3,"min","max","step","input",4,"ngIf"],[1,"additional"],[1,"value"],["color","primary","formControlName","pure"],["mat-icon-button","","color","primary","type","button",3,"disabled","click"],["color","primary","formControlName","value",3,"min","max","step","input"],["color","accent","formControlName","purity",3,"min","max","step","input"]],template:function(a,u){1&a&&t.YNc(0,Y,14,10,"div",0),2&a&&t.Q6J("ngIf",null!==u.form&&null!==u.affix)},dependencies:[n.O5,s.lW,g.Hw,l.pH,S.oG,d.JJ,d.JL,d.sg,d.u,J.a],styles:[".pure[_ngcontent-%COMP%]{color:#20d787}"]}),h})();var Q=_(4344),G=_(4890),X=_(7295),W=_(9881),j=_(2349),$=_(7531);let z=(()=>{class h{}return h.\u0275fac=function(a){return new(a||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[n.ez,W.q,W.q]}),h})();t.B6R(v.F,[n.sg,n.O5,s.lW,g.Hw,j.ZT,j.xY,j.H8,p.TO,p.KE,p.hX,$.Nt,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.qQ,d.Fd,d.sg,d.u,Q.F,K,r,U,A,y],[]),t.B6R(X.g,[n.O5,i.K,G.G],[])}}]);